/*
 * Copyright (c) 2019 by Filestack.
 * Some rights reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 */
!function (e, t) { "object" == typeof exports && "undefined" != typeof module ? t(exports) : "function" == typeof define && define.amd ? define("filestack", ["exports"], t) : t(e.filestack = {}) }(this, function (e) { "use strict"; var t; function r(e) { return (r = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (e) { return typeof e } : function (e) { return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e })(e) } t = { urls: { fileApiUrl: "https://www.filestackapi.com/api/file", uploadApiUrl: "https://upload.filestackapi.com", cloudApiUrl: "https://cloud.filestackapi.com", cdnUrl: "https://cdn.filestackcontent.com", pickerUrl: "https://static.filestackapi.com/picker/1.4.4/picker.js" } }; var a = function (e, t) { return (a = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var r in t) t.hasOwnProperty(r) && (e[r] = t[r]) })(e, t) }; var i = function () { return (i = Object.assign || function (e) { for (var t, r = 1, a = arguments.length; a > r; r++)for (var i in t = arguments[r]) Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i]); return e }).apply(this, arguments) }; function o(e, t, r, a) { return new (r || (r = Promise))(function (i, o) { function n(e) { try { u(a.next(e)) } catch (e) { o(e) } } function s(e) { try { u(a.throw(e)) } catch (e) { o(e) } } function u(e) { e.done ? i(e.value) : new r(function (t) { t(e.value) }).then(n, s) } u((a = a.apply(e, t || [])).next()) }) } function n(e, t) { var r, a, i, o, n = { label: 0, sent: function () { if (1 & i[0]) throw i[1]; return i[1] }, trys: [], ops: [] }; return o = { next: s(0), throw: s(1), return: s(2) }, "function" == typeof Symbol && (o[Symbol.iterator] = function () { return this }), o; function s(o) { return function (s) { return function (o) { if (r) throw new TypeError("Generator is already executing."); for (; n;)try { if (r = 1, a && (i = 2 & o[0] ? a.return : o[0] ? a.throw || ((i = a.return) && i.call(a), 0) : a.next) && !(i = i.call(a, o[1])).done) return i; switch (a = 0, i && (o = [2 & o[0], i.value]), o[0]) { case 0: case 1: i = o; break; case 4: return n.label++ , { value: o[1], done: !1 }; case 5: n.label++ , a = o[1], o = [0]; continue; case 7: o = n.ops.pop(), n.trys.pop(); continue; default: if (!(i = (i = n.trys).length > 0 && i[i.length - 1]) && (6 === o[0] || 2 === o[0])) { n = 0; continue } if (3 === o[0] && (!i || o[1] > i[0] && i[3] > o[1])) { n.label = o[1]; break } if (6 === o[0] && i[1] > n.label) { n.label = i[1], i = o; break } if (i && i[2] > n.label) { n.label = i[2], n.ops.push(o); break } i[2] && n.ops.pop(), n.trys.pop(); continue }o = t.call(e, n) } catch (e) { o = [6, e], a = 0 } finally { r = i = 0 } if (5 & o[0]) throw o[1]; return { value: o[0] ? o[1] : void 0, done: !0 } }([o, s]) } } } var s = function (e) { return "function" == typeof e }, u = function (e) { return null == e }, l = function (e) { return e.displayName || e.name || "<function" + e.length + ">" }; function c(e, t) { return "function" == typeof t ? l(t) : t } var p = function (e) { try { return JSON.stringify(e, c, 2) } catch (t) { return e + "" } }; function d(e, t) { !0 !== e && (s(t) ? t = t() : u(t) && (t = 'Assert failed (turn on "Pause on exceptions" in your Source panel)'), d.fail(t)) } d.fail = function (e) { throw new TypeError("[tcomb] " + e) }, d.stringify = p; var f = d, h = function (e) { return "string" == typeof e }, m = function (e) { return Array.isArray ? Array.isArray(e) : e instanceof Array }, y = function (e) { return !u(e) && "object" === r(e) && !m(e) }, v = function (e) { return s(e) && y(e.meta) }, g = function (e) { return v(e) ? e.displayName : l(e) }, b = function (e, t) { f(!(e instanceof t), function () { return "Cannot use the new operator to instantiate the type " + g(t) }) }, P = function (e, t) { function r(a, i) { return b(this, r), i = i || [e], f(t(a), function () { return "Invalid value " + f.stringify(a) + " supplied to " + i.join("/") }), a } return f(h(e), function () { return "Invalid argument name " + f.stringify(e) + " supplied to irreducible(name, predicate) (expected a string)" }), f(s(t), "Invalid argument predicate " + f.stringify(t) + " supplied to irreducible(name, predicate) (expected a function)"), r.meta = { kind: "irreducible", name: e, predicate: t, identity: !0 }, r.displayName = e, r.is = t, r }, w = P("Any", function () { return !0 }), E = P("Array", m), _ = function (e) { return !0 === e || !1 === e }, x = P("Boolean", _), k = P("Date", function (e) { return e instanceof Date }), S = P("Error", function (e) { return e instanceof Error }), O = P("Function", s), j = P("Nil", u), F = function (e) { return "number" == typeof e && isFinite(e) && !isNaN(e) }, A = P("Number", F), D = function (e) { return u(e) || h(e) }, I = function (e) { return !v(e) || (f(x.is(e.meta.identity), function () { return "Invalid meta identity " + f.stringify(e.meta.identity) + " supplied to type " + g(e) }), e.meta.identity) }, $ = function (e, t, a) { return v(e) ? e.meta.identity || "object" !== r(t) || null === t ? e(t, a) : new e(t, a) : (a = a || [l(e)], f(t instanceof e, function () { return "Invalid value " + p(t) + " supplied to " + a.join("/") }), t) }, R = function (e, t) { return v(t) ? t.is(e) : e instanceof t }; function T(e, t) { return "{" + g(e) + " | " + l(t) + "}" } function C(e, t, r) { f(s(e), function () { return "Invalid argument type " + f.stringify(e) + " supplied to refinement(type, predicate, [name]) combinator (expected a type)" }), f(s(t), function () { return "Invalid argument predicate supplied to refinement(type, predicate, [name]) combinator (expected a function)" }), f(D(r), function () { return "Invalid argument name " + f.stringify(r) + " supplied to refinement(type, predicate, [name]) combinator (expected a string)" }); var a = r || T(e, t), i = I(e); function o(r, n) { i && b(this, o); var s = $(e, r, n = n || [a]); return f(t(s), function () { return "Invalid value " + f.stringify(r) + " supplied to " + n.join("/") }), s } return o.meta = { kind: "subtype", type: e, predicate: t, name: r, identity: i }, o.displayName = a, o.is = function (r) { return R(r, e) && t(r) }, o.update = function (e, t) { return o(f.update(e, t)) }, o } C.getDefaultName = T; var z = C, q = z(A, function (e) { return e % 1 == 0 }, "Integer"), U = P("Object", y), N = P("RegExp", function (e) { return e instanceof RegExp }), L = P("String", h), V = P("Type", v); function M(e, t) { return "{[key: " + g(e) + "]: " + g(t) + "}" } function Q(e, t, r) { f(s(e), function () { return "Invalid argument domain " + f.stringify(e) + " supplied to dict(domain, codomain, [name]) combinator (expected a type)" }), f(s(t), function () { return "Invalid argument codomain " + f.stringify(t) + " supplied to dict(domain, codomain, [name]) combinator (expected a type)" }), f(D(r), function () { return "Invalid argument name " + f.stringify(r) + " supplied to dict(domain, codomain, [name]) combinator (expected a string)" }); var a = r || M(e, t), i = g(e), o = g(t), n = I(e) && I(t); function u(r, n) { n = n || [a], f(y(r), function () { return "Invalid value " + f.stringify(r) + " supplied to " + n.join("/") }); var s = !0, u = {}; for (var l in r) if (r.hasOwnProperty(l)) { l = $(e, l, n.concat(i)); var c = r[l], p = $(t, c, n.concat(l + ": " + o)); s = s && c === p, u[l] = p } return s && (u = r), Object.freeze(u), u } return u.meta = { kind: "dict", domain: e, codomain: t, name: r, identity: n }, u.displayName = a, u.is = function (r) { if (!y(r)) return !1; for (var a in r) if (r.hasOwnProperty(a) && (!R(a, e) || !R(r[a], t))) return !1; return !0 }, u.update = function (e, t) { return u(f.update(e, t)) }, u } Q.getDefaultName = M; var B = Q, H = function (e, t, r) { if (u(t)) return e; for (var a in t) t.hasOwnProperty(a) && (!0 !== r && f(!e.hasOwnProperty(a) || e[a] === t[a], function () { return 'Invalid call to mixin(target, source, [overwrite]): cannot overwrite property "' + a + '" of target object' }), e[a] = t[a]); return e }, K = function (e) { return v(e) && "union" === e.meta.kind }, J = 1; function X(e) { return Object.keys(e).map(function (e) { return f.stringify(e) }).join(" | ") } function Z(e, t) { f(y(e), function () { return "Invalid argument map " + f.stringify(e) + " supplied to enums(map, [name]) combinator (expected a dictionary of String -> String | Number)" }), f(D(t), function () { return "Invalid argument name " + f.stringify(t) + " supplied to enums(map, [name]) combinator (expected a string)" }); var r = t || X(e); function a(t, i) { return b(this, a), i = i || [r], f(a.is(t), function () { return "Invalid value " + f.stringify(t) + " supplied to " + i.join("/") + " (expected one of " + f.stringify(Object.keys(e)) + ")" }), t } return a.meta = { kind: "enums", map: e, name: t, identity: !0 }, a.displayName = r, a.is = function (t) { return e.hasOwnProperty(t) }, a } Z.of = function (e, t) { e = h(e) ? e.split(" ") : e; var r = {}; return e.forEach(function (e) { r[e] = e }), Z(r, t) }, Z.getDefaultName = X; var G = Z; function Y(e) { return "Array<" + g(e) + ">" } function W(e, t) { f(s(e), function () { return "Invalid argument type " + f.stringify(e) + " supplied to list(type, [name]) combinator (expected a type)" }), f(D(t), function () { return "Invalid argument name " + f.stringify(t) + " supplied to list(type, [name]) combinator (expected a string)" }); var r = t || Y(e), a = g(e), i = I(e); function o(t, i) { i = i || [r], f(m(t), function () { return "Invalid value " + f.stringify(t) + " supplied to " + i.join("/") + " (expected an array of " + a + ")" }); for (var o = !0, n = [], s = 0, u = t.length; u > s; s++) { var l = t[s], c = $(e, l, i.concat(s + ": " + a)); o = o && l === c, n.push(c) } return o && (n = t), Object.freeze(n), n } return o.meta = { kind: "list", type: e, name: t, identity: i }, o.displayName = r, o.is = function (t) { return m(t) && t.every(function (t) { return R(t, e) }) }, o.update = function (e, t) { return o(f.update(e, t)) }, o } W.getDefaultName = Y; var ee = W, te = function (e) { return v(e) && "maybe" === e.meta.kind }; function re(e) { return "?" + g(e) } function ae(e, t) { if (te(e) || e === w || e === j) return e; f(s(e), function () { return "Invalid argument type " + f.stringify(e) + " supplied to maybe(type, [name]) combinator (expected a type)" }), f(D(t), function () { return "Invalid argument name " + f.stringify(t) + " supplied to maybe(type, [name]) combinator (expected a string)" }); var r = t || re(e), a = I(e); function i(t, r) { return a && b(this, i), j.is(t) ? t : $(e, t, r) } return i.meta = { kind: "maybe", type: e, name: t, identity: a }, i.displayName = r, i.is = function (t) { return j.is(t) || R(t, e) }, i } ae.getDefaultName = re; var ie = ae; var oe = function (e) { return "{" + Object.keys(e).map(function (t) { return t + ": " + g(e[t]) }).join(", ") + "}" }, ne = function (e) { return v(e) && "struct" === e.meta.kind }, se = function (e) { return v(e) && "interface" === e.meta.kind }; function ue(e) { return v(e) && "subtype" === e.meta.kind } var le = function (e) { return { predicates: function e(t) { return ue(t) ? [t.meta.predicate].concat(e(t.meta.type)) : [] }(e), unrefinedType: function e(t) { return ue(t) ? e(t.meta.type) : t }(e) } }; var ce = function (e, t, r) { f(s(e), function () { return "Invalid argument combinator supplied to extend(combinator, mixins, options), expected a function" }), f(m(t), function () { return "Invalid argument mixins supplied to extend(combinator, mixins, options), expected an array" }); var a = {}, i = {}, o = [], n = {}; t.forEach(function (e, t) { var r, s = le(e), u = s.unrefinedType; f(y(u) || ne(u) || se(u), function () { return "Invalid argument mixins[" + t + "] supplied to extend(combinator, mixins, options), expected an object, struct, interface or a refinement (of struct or interface)" }), Array.prototype.push.apply(o, s.predicates), H(a, y(r = u) ? r : r.meta.props), H(i, u.prototype), H(n, function (e) { return y(e) ? null : e.meta.defaultProps }(u), !0) }), (r = e.getOptions(r)).defaultProps = H(n, r.defaultProps, !0); var u = function (e, t, r) { var a = e.reduce(function (e, t) { return z(e, t) }, t); return r && (a.displayName = r, a.meta.name = r), a }(o, e(a, { strict: r.strict, defaultProps: r.defaultProps }), r.name); return H(u.prototype, i), u }; function pe(e) { return "Struct" + oe(e) } function de(e, t) { return ce(he, e, t) } function fe(e) { return y(e) || (e = u(e) ? {} : { name: e }), e.hasOwnProperty("strict") || (e.strict = he.strict), e.hasOwnProperty("defaultProps") || (e.defaultProps = {}), e } function he(e, t) { var r = (t = fe(t)).name, a = t.strict, i = t.defaultProps; f(B(L, O).is(e), function () { return "Invalid argument props " + f.stringify(e) + " supplied to struct(props, [options]) combinator (expected a dictionary String -> Type)" }), f(D(r), function () { return "Invalid argument name " + f.stringify(r) + " supplied to struct(props, [options]) combinator (expected a string)" }), f(_(a), function () { return "Invalid argument strict " + f.stringify(a) + " supplied to struct(props, [options]) combinator (expected a boolean)" }), f(y(i), function () { return "Invalid argument defaultProps " + f.stringify(i) + " supplied to struct(props, [options]) combinator (expected an object)" }); var o = r || pe(e); function n(t, r) { if (n.is(t)) return t; if (r = r || [o], f(y(t), function () { return "Invalid value " + f.stringify(t) + " supplied to " + r.join("/") + " (expected an object)" }), a) for (s in t) t.hasOwnProperty(s) && f(e.hasOwnProperty(s), function () { return 'Invalid additional prop "' + s + '" supplied to ' + r.join("/") }); if (!(this instanceof n)) return new n(t, r); for (var s in e) if (e.hasOwnProperty(s)) { var u = e[s], l = t[s]; void 0 === l && (l = i[s]), this[s] = $(u, l, r.concat(s + ": " + g(u))) } Object.freeze(this) } return n.meta = { kind: "struct", props: e, name: r, identity: !1, strict: a, defaultProps: i }, n.displayName = o, n.is = function (e) { return e instanceof n }, n.update = function (e, t) { return new n(f.update(e, t)) }, n.extend = function (e, t) { return de([n].concat(e), t) }, n } he.strict = !1, he.getOptions = fe, he.getDefaultName = pe, he.extend = de; var me = he; function ye(e) { return "[" + e.map(g).join(", ") + "]" } function ve(e, t) { f(m(e) && e.every(s), function () { return "Invalid argument types " + f.stringify(e) + " supplied to tuple(types, [name]) combinator (expected an array of types)" }), f(D(t), function () { return "Invalid argument name " + f.stringify(t) + " supplied to tuple(types, [name]) combinator (expected a string)" }); var r = t || ye(e), a = e.every(I); function i(t, a) { a = a || [r], f(m(t) && t.length === e.length, function () { return "Invalid value " + f.stringify(t) + " supplied to " + a.join("/") + " (expected an array of length " + e.length + ")" }); for (var i = !0, o = [], n = 0, s = e.length; s > n; n++) { var u = e[n], l = t[n], c = $(u, l, a.concat(n + ": " + g(u))); i = i && l === c, o.push(c) } return i && (o = t), Object.freeze(o), o } return i.meta = { kind: "tuple", types: e, name: t, identity: a }, i.displayName = r, i.is = function (t) { return m(t) && t.length === e.length && e.every(function (e, r) { return R(t[r], e) }) }, i.update = function (e, t) { return i(f.update(e, t)) }, i } ve.getDefaultName = ye; var ge = ve; function be(e) { return e.map(g).join(" | ") } function Pe(e, t) { f(m(e) && e.every(s) && e.length >= 2, function () { return "Invalid argument types " + f.stringify(e) + " supplied to union(types, [name]) combinator (expected an array of at least 2 types)" }), f(D(t), function () { return "Invalid argument name " + f.stringify(t) + " supplied to union(types, [name]) combinator (expected a string)" }); var r = t || be(e), a = e.every(I); function i(e, t) { var o = i.dispatch(e); return !o && i.is(e) ? e : (a && b(this, i), t = t || [r], f(s(o), function () { return "Invalid value " + f.stringify(e) + " supplied to " + t.join("/") + " (no constructor returned by dispatch)" }), t[t.length - 1] += "(" + g(o) + ")", $(o, e, t)) } return i.meta = { kind: "union", types: e, name: t, identity: a }, i.displayName = r, i.is = function (t) { return e.some(function (e) { return R(t, e) }) }, i.dispatch = function (t) { for (var r = 0, a = e.length; a > r; r++) { var i = e[r]; if (K(i)) { var o = i.dispatch(t); if (!u(o)) return o } else if (R(t, i)) return i } }, i.update = function (e, t) { return i(f.update(e, t)) }, i } Pe.getDefaultName = be; var we = Pe; function Ee(e, t) { return "(" + e.map(g).join(", ") + ") => " + g(t) } function _e(e) { return O.is(e) && y(e.instrumentation) } function xe(e) { for (var t = e.length, r = !1, a = t - 1; a >= 0; a--) { var i = e[a]; if (!v(i) || "maybe" !== i.meta.kind) return a + 1; r = !0 } return r ? 0 : t } function ke(e, t, r) { e = m(e) ? e : [e], f(ee(O).is(e), function () { return "Invalid argument domain " + f.stringify(e) + " supplied to func(domain, codomain, [name]) combinator (expected an array of types)" }), f(O.is(t), function () { return "Invalid argument codomain " + f.stringify(t) + " supplied to func(domain, codomain, [name]) combinator (expected a type)" }), f(D(r), function () { return "Invalid argument name " + f.stringify(r) + " supplied to func(domain, codomain, [name]) combinator (expected a string)" }); var a = r || Ee(e, t), i = e.length, o = xe(e); function n(e, t) { return _e(e) ? (t = t || [a], f(n.is(e), function () { return "Invalid value " + f.stringify(e) + " supplied to " + t.join("/") }), e) : n.of(e) } return n.meta = { kind: "func", domain: e, codomain: t, name: r, identity: !0 }, n.displayName = a, n.is = function (r) { return _e(r) && r.instrumentation.domain.length === i && r.instrumentation.domain.every(function (t, r) { return t === e[r] }) && r.instrumentation.codomain === t }, n.of = function (r, s) { if (f(O.is(r), function () { return "Invalid argument f supplied to func.of " + a + " (expected a function)" }), f(u(s) || _(s), function () { return "Invalid argument curried " + f.stringify(s) + " supplied to func.of " + a + " (expected a boolean)" }), n.is(r)) return r; function c() { var n = Array.prototype.slice.call(arguments), u = n.length; if (ge(e.slice(0, s ? u : Math.max(u, o)), "arguments of function " + a)(n), s && i > u) { f(u > 0, "Invalid arguments.length = 0 for curried function " + a); var l = Function.prototype.bind.apply(r, [this].concat(n)); return ke(e.slice(u), t).of(l, !0) } return $(t, r.apply(this, n)) } return c.instrumentation = { domain: e, codomain: t, f: r }, c.displayName = l(r), c }, n } ke.getDefaultName = Ee, ke.getOptionalArgumentsIndex = xe; var Se = ke, Oe = I; function je(e) { return e.map(g).join(" & ") } function Fe(e, t) { f(m(e) && e.every(s) && e.length >= 2, function () { return "Invalid argument types " + f.stringify(e) + " supplied to intersection(types, [name]) combinator (expected an array of at least 2 types)" }), f(D(t), function () { return "Invalid argument name " + f.stringify(t) + " supplied to intersection(types, [name]) combinator (expected a string)" }); var r = t || je(e), a = e.every(Oe); function i(e, t) { return a && I(this, i), t = t || [r], f(i.is(e), function () { return "Invalid value " + f.stringify(e) + " supplied to " + t.join("/") }), e } return i.meta = { kind: "intersection", types: e, name: t, identity: a }, i.displayName = r, i.is = function (t) { return e.every(function (e) { return R(t, e) }) }, i.update = function (e, t) { return i(f.update(e, t)) }, i } Fe.getDefaultName = je; var Ae = Fe; var De = function (e, t) { for (var r in t) t.hasOwnProperty(r) && (e[r] = t[r]); return e }; function Ie(e, t) { return ce(Re, e, t) } function $e(e) { return y(e) || (e = u(e) ? {} : { name: e }), e.hasOwnProperty("strict") || (e.strict = Re.strict), e } function Re(e, t) { var r = (t = $e(t)).name, a = t.strict; f(B(L, O).is(e), function () { return "Invalid argument props " + f.stringify(e) + " supplied to interface(props, [options]) combinator (expected a dictionary String -> Type)" }), f(D(r), function () { return "Invalid argument name " + f.stringify(r) + " supplied to interface(props, [options]) combinator (expected a string)" }), f(_(a), function () { return "Invalid argument strict " + f.stringify(a) + " supplied to struct(props, [options]) combinator (expected a boolean)" }); var i = r || oe(e), o = Object.keys(e).map(function (t) { return e[t] }).every(I); function n(t, r) { if (r = r || [i], f(!u(t), function () { return "Invalid value " + t + " supplied to " + r.join("/") }), a) for (var n in t) f(e.hasOwnProperty(n), function () { return 'Invalid additional prop "' + n + '" supplied to ' + r.join("/") }); var s = !0, l = o ? {} : De({}, t); for (var c in e) { var p = e[c], d = t[c], h = $(p, d, r.concat(c + ": " + g(p))); s = s && d === h, l[c] = h } return s && (l = t), Object.freeze(l), l } return n.meta = { kind: "interface", props: e, name: r, identity: o, strict: a }, n.displayName = i, n.is = function (t) { if (u(t)) return !1; if (a) for (var r in t) if (!e.hasOwnProperty(r)) return !1; for (var i in e) if (!R(t[i], e[i])) return !1; return !0 }, n.update = function (e, t) { return n(f.update(e, t)) }, n.extend = function (e, t) { return Ie([n].concat(e), t) }, n } Re.strict = !1, Re.getOptions = $e, Re.getDefaultName = oe, Re.extend = Ie; var Te = Re; function Ce(e) { return y(e) ? e instanceof Date || e instanceof RegExp ? e : De({}, e) : m(e) ? e.concat() : e } function ze(e) { return Ue.commands.hasOwnProperty(e) } function qe(e) { return Ue.commands[e] } function Ue(e, t) { f(y(t), function () { return "Invalid argument patch " + f.stringify(t) + " supplied to function update(instance, patch): expected an object containing commands" }); var r, a = e, i = !1; for (var o in t) t.hasOwnProperty(o) && (ze(o) ? (r = qe(o)(t[o], a)) !== e ? (i = !0, a = r) : a = e : (a === e && (a = Ce(e)), r = Ue(a[o], t[o]), i = i || r !== a[o], a[o] = r)); return i ? a : e } Ue.commands = { $apply: function (e, t) { return f(s(e), "Invalid argument f supplied to immutability helper { $apply: f } (expected a function)"), e(t) }, $push: function (e, t) { return f(m(e), "Invalid argument elements supplied to immutability helper { $push: elements } (expected an array)"), f(m(t), "Invalid value supplied to immutability helper $push (expected an array)"), e.length > 0 ? t.concat(e) : t }, $remove: function (e, t) { if (f(m(e), "Invalid argument keys supplied to immutability helper { $remove: keys } (expected an array)"), f(y(t), "Invalid value supplied to immutability helper $remove (expected an object)"), e.length > 0) { t = Ce(t); for (var r = 0, a = e.length; a > r; r++)delete t[e[r]] } return t }, $set: function (e) { return e }, $splice: function (e, t) { return f(m(e) && e.every(m), "Invalid argument splices supplied to immutability helper { $splice: splices } (expected an array of arrays)"), f(m(t), "Invalid value supplied to immutability helper $splice (expected an array)"), e.length > 0 ? (t = Ce(t), e.reduce(function (e, t) { return e.splice.apply(e, t), e }, t)) : t }, $swap: function (e, t) { if (f(y(e), "Invalid argument config supplied to immutability helper { $swap: config } (expected an object)"), f(F(e.from), "Invalid argument config.from supplied to immutability helper { $swap: config } (expected a number)"), f(F(e.to), "Invalid argument config.to supplied to immutability helper { $swap: config } (expected a number)"), f(m(t), "Invalid value supplied to immutability helper $swap (expected an array)"), e.from !== e.to) { var r = (t = Ce(t))[e.to]; t[e.to] = t[e.from], t[e.from] = r } return t }, $unshift: function (e, t) { return f(m(e), "Invalid argument elements supplied to immutability helper {$unshift: elements} (expected an array)"), f(m(t), "Invalid value supplied to immutability helper $unshift (expected an array)"), e.length > 0 ? e.concat(t) : t }, $merge: function (e, t) { var r = !1, a = Ce(t); for (var i in e) e.hasOwnProperty(i) && (a[i] = e[i], r = r || a[i] !== t[i]); return r ? a : t } }; var Ne = Ue; f.Any = w, f.Array = E, f.Boolean = x, f.Date = k, f.Error = S, f.Function = O, f.Nil = j, f.Number = A, f.Integer = q, f.IntegerT = f.Integer, f.Object = U, f.RegExp = N, f.String = L, f.Type = V, f.TypeT = f.Type, f.Arr = f.Array, f.Bool = f.Boolean, f.Dat = f.Date, f.Err = f.Error, f.Func = f.Function, f.Num = f.Number, f.Obj = f.Object, f.Re = f.RegExp, f.Str = f.String, f.dict = B, f.declare = function (e) { var t; function r(a, i) { return f(!u(t), function () { return "Type declared but not defined, don't forget to call .define on every declared type" }), K(t) && f(t.dispatch === r.dispatch, function () { return "Please define the custom " + e + ".dispatch function before calling " + e + ".define()" }), t(a, i) } return f(D(e), function () { return "Invalid argument name " + e + " supplied to declare([name]) (expected a string)" }), r.define = function (a) { return f(v(a), function () { return "Invalid argument type " + f.stringify(a) + " supplied to define(type) (expected a type)" }), f(u(t), function () { return "Declare.define(type) can only be invoked once" }), K(a) && r.hasOwnProperty("dispatch") && (a.dispatch = r.dispatch), H(r, t = a, !0), e && (t.displayName = r.displayName = e, r.meta.name = e), r.meta.identity = t.meta.identity, r.prototype = t.prototype, r }, r.displayName = e || g(r) + "$" + J++ , r.meta = { identity: !1 }, r.prototype = null, r }, f.enums = G, f.irreducible = P, f.list = ee, f.maybe = ie, f.refinement = z, f.struct = me, f.tuple = ge, f.union = we, f.func = Se, f.intersection = Ae, f.subtype = f.refinement, f.inter = Te, f.interface = f.inter, f.assert = f, f.update = Ne, f.mixin = H, f.isType = v, f.is = R, f.getTypeName = g, f.match = function (e) { for (var t, r, a, i, o = 1, n = arguments.length; n > o;)if (t = arguments[o], r = arguments[o + 1], s(a = arguments[o + 2]) && !v(a) ? o += 3 : (a = r, r = w.is, o += 2), i = (i || 0) + 1, f(v(t), function () { return "Invalid type in clause #" + i }), f(s(r), function () { return "Invalid guard in clause #" + i }), f(s(a), function () { return "Invalid block in clause #" + i }), t.is(e) && r(e)) return a(e); f.fail("Match error") }; var Le = f, Ve = Le.stringify, Me = {}, Qe = Le.struct({ message: Le.Any, actual: Le.Any, expected: Le.Any, path: Le.list(Le.union([Le.String, Le.Number])) }, "ValidationError"); function Be(e, t, r, a) { return Le.Function.is(t.getValidationErrorMessage) ? t.getValidationErrorMessage(e, r, a) : function (e, t, r) { var a = Le.getTypeName(t), i = r.length ? "/" + r.join("/") + ": " + a : a; return "Invalid value " + Ve(e) + " supplied to " + i }(e, t, r) } Qe.of = function (e, t, r, a) { return new Qe({ message: Be(e, t, r, a), actual: e, expected: t, path: r }) }; var He = Le.struct({ errors: Le.list(Qe), value: Le.Any }, "ValidationResult"); function Ke(e, t, r) { var a = Le.Array.is(r = r || {}) ? r : r.path || []; return new He(Je(e, t, a, r)) } function Je(e, t, r, a) { return Le.isType(t) ? Xe[t.meta.kind](e, t, r, a) : Xe.es6classes(e, t, r, a) } He.prototype.isValid = function () { return !this.errors.length }, He.prototype.firstError = function () { return this.isValid() ? null : this.errors[0] }, He.prototype.toString = function () { return this.isValid() ? "[ValidationResult, true, " + Ve(this.value) + "]" : "[ValidationResult, false, (" + this.errors.map(function (e) { return Ve(e.message) }).join(", ") + ")]" }; var Xe = Ke.validators = {}; Xe.es6classes = function (e, t, r, a) { return { value: e, errors: e instanceof t ? [] : [Qe.of(e, t, r, a.context)] } }, Xe.irreducible = Xe.enums = function (e, t, r, a) { return { value: e, errors: t.is(e) ? [] : [Qe.of(e, t, r, a.context)] } }, Xe.list = function (e, t, r, a) { if (!Le.Array.is(e)) return { value: e, errors: [Qe.of(e, t, r, a.context)] }; for (var i = { value: [], errors: [] }, o = 0, n = e.length; n > o; o++) { var s = Je(e[o], t.meta.type, r.concat(o), a); i.value[o] = s.value, i.errors = i.errors.concat(s.errors) } return i }, Xe.subtype = function (e, t, r, a) { var i = Je(e, t.meta.type, r, a); return i.errors.length ? i : (t.meta.predicate(i.value) || (i.errors = [Qe.of(e, t, r, a.context)]), i) }, Xe.maybe = function (e, t, r, a) { return Le.Nil.is(e) ? { value: e, errors: [] } : Je(e, t.meta.type, r, a) }, Xe.struct = function (e, t, r, a) { if (!Le.Object.is(e)) return { value: e, errors: [Qe.of(e, t, r, a.context)] }; if (t.is(e)) return { value: e, errors: [] }; var i = { value: {}, errors: [] }, o = t.meta.props, n = t.meta.defaultProps || Me; for (var s in o) if (o.hasOwnProperty(s)) { var u = e[s]; void 0 === u && (u = n[s]); var l = Je(u, o[s], r.concat(s), a); i.value[s] = l.value, i.errors = i.errors.concat(l.errors) } if (a.hasOwnProperty("strict") ? a.strict : t.meta.strict) for (var c in e) e.hasOwnProperty(c) && !o.hasOwnProperty(c) && i.errors.push(Qe.of(e[c], Le.Nil, r.concat(c), a.context)); return i.errors.length || (i.value = new t(i.value)), i }, Xe.tuple = function (e, t, r, a) { var i = t.meta.types, o = i.length; if (!Le.Array.is(e) || e.length > o) return { value: e, errors: [Qe.of(e, t, r, a.context)] }; for (var n = { value: [], errors: [] }, s = 0; o > s; s++) { var u = Je(e[s], i[s], r.concat(s), a); n.value[s] = u.value, n.errors = n.errors.concat(u.errors) } return n }, Xe.dict = function (e, t, r, a) { if (!Le.Object.is(e)) return { value: e, errors: [Qe.of(e, t, r, a.context)] }; var i = { value: {}, errors: [] }; for (var o in e) if (e.hasOwnProperty(o)) { var n = r.concat(o), s = Je(o, t.meta.domain, n, a), u = Je(e[o], t.meta.codomain, n, a); i.value[o] = u.value, i.errors = i.errors.concat(s.errors, u.errors) } return i }, Xe.union = function (e, t, r, a) { var i = t.dispatch(e); return Le.Function.is(i) ? Je(e, i, r.concat(t.meta.types.indexOf(i)), a) : { value: e, errors: [Qe.of(e, t, r, a.context)] } }, Xe.intersection = function (e, t, r, a) { for (var i = t.meta.types, o = i.length, n = { value: e, errors: [] }, s = 0, u = 0; o > u; u++) { "struct" === i[u].meta.kind && s++; var l = Je(e, i[u], r, a); n.errors = n.errors.concat(l.errors) } return s > 1 && n.errors.push(Qe.of(e, t, r, a.context)), n }, Xe.interface = function (e, t, r, a) { if (!Le.Object.is(e)) return { value: e, errors: [Qe.of(e, t, r, a.context)] }; var i = { value: {}, errors: [] }, o = t.meta.props; for (var n in o) { var s = Je(e[n], o[n], r.concat(n), a); i.value[n] = s.value, i.errors = i.errors.concat(s.errors) } if (a.hasOwnProperty("strict") ? a.strict : t.meta.strict) for (var u in e) o.hasOwnProperty(u) || Le.Nil.is(e[u]) || i.errors.push(Qe.of(e[u], Le.Nil, r.concat(u), a.context)); return i }, Le.mixin(Le, { ValidationError: Qe, ValidationResult: He, validate: Ke }); var Ze = Le.Boolean, Ge = Le.Function, Ye = Le.Integer, We = Le.Number, et = Le.String, tt = Le.enums, rt = Le.refinement, at = Le.union, it = Le.struct, ot = Le.validate, nt = Le.list, st = "undefined" != typeof window ? window : "undefined" != typeof global ? global : "undefined" != typeof self ? self : {}; function ut(e, t) { return e(t = { exports: {} }, t.exports), t.exports } function lt(e) { return e && e.default || e } var ct = ut(function (e) { function t(e) { if (e) return function (e) { for (var r in t.prototype) e[r] = t.prototype[r]; return e }(e) } e.exports = t, t.prototype.on = t.prototype.addEventListener = function (e, t) { return this._callbacks = this._callbacks || {}, (this._callbacks["$" + e] = this._callbacks["$" + e] || []).push(t), this }, t.prototype.once = function (e, t) { function r() { this.off(e, r), t.apply(this, arguments) } return r.fn = t, this.on(e, r), this }, t.prototype.off = t.prototype.removeListener = t.prototype.removeAllListeners = t.prototype.removeEventListener = function (e, t) { if (this._callbacks = this._callbacks || {}, 0 == arguments.length) return this._callbacks = {}, this; var r, a = this._callbacks["$" + e]; if (!a) return this; if (1 == arguments.length) return delete this._callbacks["$" + e], this; for (var i = 0; a.length > i; i++)if ((r = a[i]) === t || r.fn === t) { a.splice(i, 1); break } return this }, t.prototype.emit = function (e) { this._callbacks = this._callbacks || {}; var t = [].slice.call(arguments, 1), r = this._callbacks["$" + e]; if (r) for (var a = 0, i = (r = r.slice(0)).length; i > a; ++a)r[a].apply(this, t); return this }, t.prototype.listeners = function (e) { return this._callbacks = this._callbacks || {}, this._callbacks["$" + e] || [] }, t.prototype.hasListeners = function (e) { return !!this.listeners(e).length } }); var pt = function (e) { return null !== e && "object" === r(e) }, dt = ft; function ft(e) { if (e) return function (e) { for (var t in ft.prototype) e[t] = ft.prototype[t]; return e }(e) } ft.prototype.clearTimeout = function () { return clearTimeout(this._timer), clearTimeout(this._responseTimeoutTimer), delete this._timer, delete this._responseTimeoutTimer, this }, ft.prototype.parse = function (e) { return this._parser = e, this }, ft.prototype.responseType = function (e) { return this._responseType = e, this }, ft.prototype.serialize = function (e) { return this._serializer = e, this }, ft.prototype.timeout = function (e) { if (!e || "object" !== r(e)) return this._timeout = e, this._responseTimeout = 0, this; for (var t in e) switch (t) { case "deadline": this._timeout = e.deadline; break; case "response": this._responseTimeout = e.response; break; default: console.warn("Unknown timeout option", t) }return this }, ft.prototype.retry = function (e, t) { return 0 !== arguments.length && !0 !== e || (e = 1), e > 0 || (e = 0), this._maxRetries = e, this._retries = 0, this._retryCallback = t, this }; var ht = ["ECONNRESET", "ETIMEDOUT", "EADDRINFO", "ESOCKETTIMEDOUT"]; ft.prototype._shouldRetry = function (e, t) { if (!this._maxRetries || this._retries++ >= this._maxRetries) return !1; if (this._retryCallback) try { var r = this._retryCallback(e, t); if (!0 === r) return !0; if (!1 === r) return !1 } catch (e) { console.error(e) } if (t && t.status && t.status >= 500 && 501 != t.status) return !0; if (e) { if (e.code && ~ht.indexOf(e.code)) return !0; if (e.timeout && "ECONNABORTED" == e.code) return !0; if (e.crossDomain) return !0 } return !1 }, ft.prototype._retry = function () { return this.clearTimeout(), this.req && (this.req = null, this.req = this.request()), this._aborted = !1, this.timedout = !1, this._end() }, ft.prototype.then = function (e, t) { if (!this._fullfilledPromise) { var r = this; this._endCalled && console.warn("Warning: superagent request was sent twice, because both .end() and .then() were called. Never call .end() if you use promises"), this._fullfilledPromise = new Promise(function (e, t) { r.end(function (r, a) { r ? t(r) : e(a) }) }) } return this._fullfilledPromise.then(e, t) }, ft.prototype.catch = function (e) { return this.then(void 0, e) }, ft.prototype.use = function (e) { return e(this), this }, ft.prototype.ok = function (e) { if ("function" != typeof e) throw Error("Callback required"); return this._okCallback = e, this }, ft.prototype._isResponseOK = function (e) { return !!e && (this._okCallback ? this._okCallback(e) : e.status >= 200 && 300 > e.status) }, ft.prototype.getHeader = ft.prototype.get = function (e) { return this._header[e.toLowerCase()] }, ft.prototype.set = function (e, t) { if (pt(e)) { for (var r in e) this.set(r, e[r]); return this } return this._header[e.toLowerCase()] = t, this.header[e] = t, this }, ft.prototype.unset = function (e) { return delete this._header[e.toLowerCase()], delete this.header[e], this }, ft.prototype.field = function (e, t) { if (null == e) throw Error(".field(name, val) name can not be empty"); if (this._data && console.error(".field() can't be used if .send() is used. Please use only .send() or only .field() & .attach()"), pt(e)) { for (var r in e) this.field(r, e[r]); return this } if (Array.isArray(t)) { for (var a in t) this.field(e, t[a]); return this } if (null == t) throw Error(".field(name, val) val can not be empty"); return "boolean" == typeof t && (t = "" + t), this._getFormData().append(e, t), this }, ft.prototype.abort = function () { return this._aborted ? this : (this._aborted = !0, this.xhr && this.xhr.abort(), this.req && this.req.abort(), this.clearTimeout(), this.emit("abort"), this) }, ft.prototype._auth = function (e, t, r, a) { switch (r.type) { case "basic": this.set("Authorization", "Basic " + a(e + ":" + t)); break; case "auto": this.username = e, this.password = t; break; case "bearer": this.set("Authorization", "Bearer " + e) }return this }, ft.prototype.withCredentials = function (e) { return null == e && (e = !0), this._withCredentials = e, this }, ft.prototype.redirects = function (e) { return this._maxRedirects = e, this }, ft.prototype.maxResponseSize = function (e) { if ("number" != typeof e) throw TypeError("Invalid argument"); return this._maxResponseSize = e, this }, ft.prototype.toJSON = function () { return { method: this.method, url: this.url, data: this._data, headers: this._header } }, ft.prototype.send = function (e) { var t = pt(e), r = this._header["content-type"]; if (this._formData && console.error(".send() can't be used if .attach() or .field() is used. Please use only .send() or only .field() & .attach()"), t && !this._data) Array.isArray(e) ? this._data = [] : this._isHost(e) || (this._data = {}); else if (e && this._data && this._isHost(this._data)) throw Error("Can't merge these send calls"); if (t && pt(this._data)) for (var a in e) this._data[a] = e[a]; else "string" == typeof e ? (r || this.type("form"), this._data = "application/x-www-form-urlencoded" == (r = this._header["content-type"]) ? this._data ? this._data + "&" + e : e : (this._data || "") + e) : this._data = e; return !t || this._isHost(e) ? this : (r || this.type("json"), this) }, ft.prototype.sortQuery = function (e) { return this._sort = void 0 === e || e, this }, ft.prototype._finalizeQueryString = function () { var e = this._query.join("&"); if (e && (this.url += (0 > this.url.indexOf("?") ? "?" : "&") + e), this._query.length = 0, this._sort) { var t = this.url.indexOf("?"); if (t >= 0) { var r = this.url.substring(t + 1).split("&"); "function" == typeof this._sort ? r.sort(this._sort) : r.sort(), this.url = this.url.substring(0, t) + "?" + r.join("&") } } }, ft.prototype._appendQueryString = function () { console.trace("Unsupported") }, ft.prototype._timeoutError = function (e, t, r) { if (!this._aborted) { var a = Error(e + t + "ms exceeded"); a.timeout = t, a.code = "ECONNABORTED", a.errno = r, this.timedout = !0, this.abort(), this.callback(a) } }, ft.prototype._setTimeouts = function () { var e = this; this._timeout && !this._timer && (this._timer = setTimeout(function () { e._timeoutError("Timeout of ", e._timeout, "ETIME") }, this._timeout)), this._responseTimeout && !this._responseTimeoutTimer && (this._responseTimeoutTimer = setTimeout(function () { e._timeoutError("Response timeout of ", e._responseTimeout, "ETIMEDOUT") }, this._responseTimeout)) }; var mt = function (e) { return e.split(/ *; */).shift() }, yt = function (e) { return e.split(/ *; */).reduce(function (e, t) { var r = t.split(/ *= */), a = r.shift(), i = r.shift(); return a && i && (e[a] = i), e }, {}) }, vt = function (e) { return e.split(/ *, */).reduce(function (e, t) { var r = t.split(/ *; */), a = r[0].slice(1, -1); return e[r[1].split(/ *= */)[1].slice(1, -1)] = a, e }, {}) }, gt = bt; function bt(e) { if (e) return function (e) { for (var t in bt.prototype) e[t] = bt.prototype[t]; return e }(e) } function Pt() { this._defaults = [] } bt.prototype.get = function (e) { return this.header[e.toLowerCase()] }, bt.prototype._setHeaderProperties = function (e) { var t = e["content-type"] || ""; this.type = mt(t); var r = yt(t); for (var a in r) this[a] = r[a]; this.links = {}; try { e.link && (this.links = vt(e.link)) } catch (e) { } }, bt.prototype._setStatusProperties = function (e) { var t = e / 100 | 0; this.status = this.statusCode = e, this.statusType = t, this.info = 1 == t, this.ok = 2 == t, this.redirect = 3 == t, this.clientError = 4 == t, this.serverError = 5 == t, this.error = (4 == t || 5 == t) && this.toError(), this.created = 201 == e, this.accepted = 202 == e, this.noContent = 204 == e, this.badRequest = 400 == e, this.unauthorized = 401 == e, this.notAcceptable = 406 == e, this.forbidden = 403 == e, this.notFound = 404 == e, this.unprocessableEntity = 422 == e }, ["use", "on", "once", "set", "query", "type", "accept", "auth", "withCredentials", "sortQuery", "retry", "ok", "redirects", "timeout", "buffer", "serialize", "parse", "ca", "key", "pfx", "cert"].forEach(function (e) { Pt.prototype[e] = function () { return this._defaults.push({ fn: e, arguments: arguments }), this } }), Pt.prototype._setDefaults = function (e) { this._defaults.forEach(function (t) { e[t.fn].apply(e, t.arguments) }) }; var wt = Pt, Et = ut(function (e, t) { var a; function i() { } "undefined" != typeof window ? a = window : "undefined" != typeof self ? a = self : (console.warn("Using browser-only version of superagent in non-browser environment"), a = st); var o = t = e.exports = function (e, r) { return "function" == typeof r ? new t.Request("GET", e).end(r) : 1 == arguments.length ? new t.Request("GET", e) : new t.Request(e, r) }; t.Request = d, o.getXHR = function () { if (!(!a.XMLHttpRequest || a.location && "file:" == a.location.protocol && a.ActiveXObject)) return new XMLHttpRequest; try { return new ActiveXObject("Microsoft.XMLHTTP") } catch (e) { } try { return new ActiveXObject("Msxml2.XMLHTTP.6.0") } catch (e) { } try { return new ActiveXObject("Msxml2.XMLHTTP.3.0") } catch (e) { } try { return new ActiveXObject("Msxml2.XMLHTTP") } catch (e) { } throw Error("Browser-only version of superagent could not find XHR") }; var n = "".trim ? function (e) { return e.trim() } : function (e) { return e.replace(/(^\s*|\s*$)/g, "") }; function s(e) { if (!pt(e)) return e; var t = []; for (var r in e) u(t, r, e[r]); return t.join("&") } function u(e, t, r) { if (null != r) if (Array.isArray(r)) r.forEach(function (r) { u(e, t, r) }); else if (pt(r)) for (var a in r) u(e, t + "[" + a + "]", r[a]); else e.push(encodeURIComponent(t) + "=" + encodeURIComponent(r)); else null === r && e.push(encodeURIComponent(t)) } function l(e) { for (var t, r, a = {}, i = e.split("&"), o = 0, n = i.length; n > o; ++o)-1 == (r = (t = i[o]).indexOf("=")) ? a[decodeURIComponent(t)] = "" : a[decodeURIComponent(t.slice(0, r))] = decodeURIComponent(t.slice(r + 1)); return a } function c(e) { return /[\/+]json($|[^-\w])/.test(e) } function p(e) { this.req = e, this.xhr = this.req.xhr, this.text = "HEAD" != this.req.method && ("" === this.xhr.responseType || "text" === this.xhr.responseType) || void 0 === this.xhr.responseType ? this.xhr.responseText : null, this.statusText = this.req.xhr.statusText; var t = this.xhr.status; 1223 === t && (t = 204), this._setStatusProperties(t), this.header = this.headers = function (e) { for (var t, r, a, i, o = e.split(/\r?\n/), s = {}, u = 0, l = o.length; l > u; ++u)-1 !== (t = (r = o[u]).indexOf(":")) && (a = r.slice(0, t).toLowerCase(), i = n(r.slice(t + 1)), s[a] = i); return s }(this.xhr.getAllResponseHeaders()), this.header["content-type"] = this.xhr.getResponseHeader("content-type"), this._setHeaderProperties(this.header), this.body = null === this.text && e._responseType ? this.xhr.response : "HEAD" != this.req.method ? this._parseBody(this.text ? this.text : this.xhr.response) : null } function d(e, t) { var r = this; this._query = this._query || [], this.method = e, this.url = t, this.header = {}, this._header = {}, this.on("end", function () { var e, t = null, a = null; try { a = new p(r) } catch (e) { return (t = Error("Parser is unable to parse the response")).parse = !0, t.original = e, r.xhr ? (t.rawResponse = void 0 === r.xhr.responseType ? r.xhr.responseText : r.xhr.response, t.status = r.xhr.status ? r.xhr.status : null, t.statusCode = t.status) : (t.rawResponse = null, t.status = null), r.callback(t) } r.emit("response", a); try { r._isResponseOK(a) || (e = Error(a.statusText || "Unsuccessful HTTP response")) } catch (t) { e = t } e ? (e.original = t, e.response = a, e.status = a.status, r.callback(e, a)) : r.callback(null, a) }) } function f(e, t, r) { var a = o("DELETE", e); return "function" == typeof t && (r = t, t = null), t && a.send(t), r && a.end(r), a } o.serializeObject = s, o.parseString = l, o.types = { html: "text/html", json: "application/json", xml: "text/xml", urlencoded: "application/x-www-form-urlencoded", form: "application/x-www-form-urlencoded", "form-data": "application/x-www-form-urlencoded" }, o.serialize = { "application/x-www-form-urlencoded": s, "application/json": JSON.stringify }, o.parse = { "application/x-www-form-urlencoded": l, "application/json": JSON.parse }, gt(p.prototype), p.prototype._parseBody = function (e) { var t = o.parse[this.type]; return this.req._parser ? this.req._parser(this, e) : (!t && c(this.type) && (t = o.parse["application/json"]), t && e && (e.length || e instanceof Object) ? t(e) : null) }, p.prototype.toError = function () { var e = this.req, t = e.method, r = e.url, a = Error("cannot " + t + " " + r + " (" + this.status + ")"); return a.status = this.status, a.method = t, a.url = r, a }, o.Response = p, ct(d.prototype), dt(d.prototype), d.prototype.type = function (e) { return this.set("Content-Type", o.types[e] || e), this }, d.prototype.accept = function (e) { return this.set("Accept", o.types[e] || e), this }, d.prototype.auth = function (e, t, a) { 1 === arguments.length && (t = ""), "object" === r(t) && null !== t && (a = t, t = ""), a || (a = { type: "function" == typeof btoa ? "basic" : "auto" }); return this._auth(e, t, a, function (e) { if ("function" == typeof btoa) return btoa(e); throw Error("Cannot use basic auth, btoa is not a function") }) }, d.prototype.query = function (e) { return "string" != typeof e && (e = s(e)), e && this._query.push(e), this }, d.prototype.attach = function (e, t, r) { if (t) { if (this._data) throw Error("superagent can't mix .send() and .attach()"); this._getFormData().append(e, t, r || t.name) } return this }, d.prototype._getFormData = function () { return this._formData || (this._formData = new a.FormData), this._formData }, d.prototype.callback = function (e, t) { if (this._shouldRetry(e, t)) return this._retry(); var r = this._callback; this.clearTimeout(), e && (this._maxRetries && (e.retries = this._retries - 1), this.emit("error", e)), r(e, t) }, d.prototype.crossDomainError = function () { var e = Error("Request has been terminated\nPossible causes: the network is offline, Origin is not allowed by Access-Control-Allow-Origin, the page is being unloaded, etc."); e.crossDomain = !0, e.status = this.status, e.method = this.method, e.url = this.url, this.callback(e) }, d.prototype.buffer = d.prototype.ca = d.prototype.agent = function () { return console.warn("This is not supported in browser version of superagent"), this }, d.prototype.pipe = d.prototype.write = function () { throw Error("Streaming is not supported in browser version of superagent") }, d.prototype._isHost = function (e) { return e && "object" === r(e) && !Array.isArray(e) && "[object Object]" !== Object.prototype.toString.call(e) }, d.prototype.end = function (e) { return this._endCalled && console.warn("Warning: .end() was called twice. This is not supported in superagent"), this._endCalled = !0, this._callback = e || i, this._finalizeQueryString(), this._end() }, d.prototype._end = function () { var e = this, t = this.xhr = o.getXHR(), r = this._formData || this._data; this._setTimeouts(), t.onreadystatechange = function () { var r = t.readyState; if (r >= 2 && e._responseTimeoutTimer && clearTimeout(e._responseTimeoutTimer), 4 == r) { var a; try { a = t.status } catch (e) { a = 0 } if (!a) { if (e.timedout || e._aborted) return; return e.crossDomainError() } e.emit("end") } }; var a = function (t, r) { r.total > 0 && (r.percent = r.loaded / r.total * 100), r.direction = t, e.emit("progress", r) }; if (this.hasListeners("progress")) try { t.onprogress = a.bind(null, "download"), t.upload && (t.upload.onprogress = a.bind(null, "upload")) } catch (e) { } try { this.username && this.password ? t.open(this.method, this.url, !0, this.username, this.password) : t.open(this.method, this.url, !0) } catch (e) { return this.callback(e) } if (this._withCredentials && (t.withCredentials = !0), !this._formData && "GET" != this.method && "HEAD" != this.method && "string" != typeof r && !this._isHost(r)) { var i = this._header["content-type"], n = this._serializer || o.serialize[i ? i.split(";")[0] : ""]; !n && c(i) && (n = o.serialize["application/json"]), n && (r = n(r)) } for (var s in this.header) null != this.header[s] && this.header.hasOwnProperty(s) && t.setRequestHeader(s, this.header[s]); return this._responseType && (t.responseType = this._responseType), this.emit("request", this), t.send(void 0 !== r ? r : null), this }, o.agent = function () { return new wt }, ["GET", "POST", "OPTIONS", "PATCH", "PUT", "DELETE"].forEach(function (e) { wt.prototype[e.toLowerCase()] = function (t, r) { var a = new o.Request(e, t); return this._setDefaults(a), r && a.end(r), a } }), wt.prototype.del = wt.prototype.delete, o.get = function (e, t, r) { var a = o("GET", e); return "function" == typeof t && (r = t, t = null), t && a.query(t), r && a.end(r), a }, o.head = function (e, t, r) { var a = o("HEAD", e); return "function" == typeof t && (r = t, t = null), t && a.query(t), r && a.end(r), a }, o.options = function (e, t, r) { var a = o("OPTIONS", e); return "function" == typeof t && (r = t, t = null), t && a.send(t), r && a.end(r), a }, o.del = f, o.delete = f, o.patch = function (e, t, r) { var a = o("PATCH", e); return "function" == typeof t && (r = t, t = null), t && a.send(t), r && a.end(r), a }, o.post = function (e, t, r) { var a = o("POST", e); return "function" == typeof t && (r = t, t = null), t && a.send(t), r && a.end(r), a }, o.put = function (e, t, r) { var a = o("PUT", e); return "function" == typeof t && (r = t, t = null), t && a.send(t), r && a.end(r), a } }), _t = Et.get, xt = Et.put, kt = Et.delete, St = Object.freeze({ default: Et, __moduleExports: Et, get: _t, post: Et.post, put: xt, delete: kt, head: Et.head, Request: Et.Request }), Ot = function (e, t) { return St[e](t).set("Filestack-Source", "JS-1.14.6") }, jt = function () { return function (e, t, r, a) { this.resolve = e, this.fn = t, this.self = r || null, this.args = a } }(), Ft = function () { function e() { this._s1 = [], this._s2 = [] } return e.prototype.push = function (e) { this._s1.push(e) }, e.prototype.shift = function () { var e = this._s2; if (0 === e.length) { var t = this._s1; if (0 === t.length) return; this._s1 = e, e = this._s2 = t.reverse() } return e.pop() }, e.prototype.isEmpty = function () { return !this._s1.length && !this._s2.length }, e }(); var At, Dt, It = function (e, t) { var a = new Ft; function i(t, r, i) { if (e) { e--; var n = new Promise(function (e) { e(t.apply(r, i)) }); return n.then(o, o), n } return new Promise(function (e) { a.push(new jt(e, t, r, i)) }) } function o() { if (e++ , !a.isEmpty()) { var t = a.shift(); t.resolve(i(t.fn, t.self, t.args)) } } if (void 0 !== t && "function" != typeof t) throw new TypeError("Expected throat fn to be a function but got " + r(t)); return function () { for (var e = [], r = 0; arguments.length > r; r++)e[r] = arguments[r]; return i(t, this, e) } }, $t = function (e, t) { var r = e; if (t) { var a = /filestackapi.com|filestackcontent.com/i; Object.keys(a).forEach(function (e) { r[e] = a[e].replace(a, t) }) } return r }, Rt = function (e, t, r) { void 0 === r && (r = {}); var a = Object.keys(r), i = t.map(function (e) { return e.name }), o = i.join(", "); return a.forEach(function (t) { if (0 > i.indexOf(t)) throw Error(t + " is not a valid option for " + e + ". Valid options are: " + o) }), t.forEach(function (e) { var t = r[e.name]; if ("location" === e.name && "string" == typeof t && (t = t.toLowerCase()), void 0 !== t) { var a = ot(t, e.type); if (!a.isValid()) { var i = a.firstError(); if (i && i.message) throw Error(i.message) } } }), a }, Tt = function (e) { var t = i({}, e); return Object.keys(t).forEach(function (e) { return !t[e] && void 0 !== t[e] && delete t[e] }), t }, Ct = function (e, t, r) { var a = !1, i = !1; return function () { for (var o = [], n = 0; arguments.length > n; n++)o[n] = arguments[n]; i = !!r && !a; var s = this; if (a || (a = !0, setTimeout(function () { if (a = !1, !r) return e.apply(s, o) }, t)), i) return i = !1, e.apply(this, arguments) } }, zt = function (e, t, r, a) { if (!t || "string" != typeof t) throw Error("A valid Filestack handle is required for remove"); if (!(e.policy && e.signature || a && a.policy && a.signature)) throw Error("Security policy and signature are required for remove"); var i = e.urls.fileApiUrl + "/" + t, o = { key: e.apikey, policy: a && a.policy || e.policy, signature: a && a.signature || e.signature }; return r && (o.skip_storage = !0), new Promise(function (e, t) { kt(i).query(o).end(function (r, a) { r ? t(r) : e(a) }) }) }; !function (e) { e.get = "get", e.head = "head" }(At || (At = {})), function (e) { e.blob = "blob", e.json = "json" }(Dt || (Dt = {})); var qt, Ut = { $schema: "http://json-schema.org/draft-07/schema#", title: "Filestack Transformations", description: "Filestack transformations parameters", type: "object", additionalProperties: !1, definitions: { securityCallDef: { $id: "#securityCallDef", type: "string", enum: ["pick", "read", "stat", "write", "writeUrl", "store", "convert", "remove", "exif", "runWorkflow"] }, regionsDef: { $id: "#regionsDef", type: "string", enum: ["us-east-1", "us-west-1", "us-west-2", "eu-west-1", "eu-central-1", "ap-northeast-1", "ap-northeast-2", "ap-southeast-1", "ap-southeast-2", "sa-east-1"] }, locationsDef: { $id: "#locationsDef", type: "string", enum: ["s3", "S3", "rackspace", "gcs", "azure", " dropbox"] }, colorDef: { $id: "#colorDef", oneOf: [{ type: "string", pattern: "^([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$" }, { type: "string", enum: ["aliceblue", "antiquewhite", "aqua", "aquamarine", "azure", "beige", "bisque", "black", "blanchedalmond", "blue", "blueviolet", "brown", "burlywood", "cadetblue", "chartreuse", "chocolate", "coral", "cornflowerblue", "cornsilk", "crimson", "cyan", "darkblue", "darkcyan", "darkgoldenrod", "darkgray", "darkgreen", "darkgrey", "darkkhaki", "darkmagenta", "darkolivegreen", "darkorange", "darkorchid", "darkred", "darksalmon", "darkseagreen", "darkslateblue", "darkslategray", "darkslategrey", "darkturquoise", "darkviolet", "deeppink", "deepskyblue", "dimgray", "dimgrey", "dodgerblue", "firebrick", "floralwhite", "forestgreen", "fractal", "fuchsia", "gainsboro", "ghostwhite", "gold", "goldenrod", "gray0", "gray1", "gray2", "gray3", "gray4", "gray5", "gray6", "gray7", "gray8", "gray9", "gray10", "gray11", "gray12", "gray13", "gray14", "gray15", "gray16", "gray17", "gray18", "gray19", "gray20", "gray21", "gray22", "gray23", "gray24", "gray25", "gray26", "gray27", "gray28", "gray29", "gray30", "gray31", "gray32", "gray33", "gray34", "gray35", "gray36", "gray37", "gray38", "gray39", "gray40", "gray41", "gray42", "gray43", "gray44", "gray45", "gray46", "gray47", "gray48", "gray49", "gray50", "gray51", "gray52", "gray53", "gray54", "gray55", "gray56", "gray57", "gray58", "gray59", "gray60", "gray61", "gray62", "gray63", "gray64", "gray65", "gray66", "gray67", "gray68", "gray69", "gray70", "gray71", "gray72", "gray73", "gray74", "gray75", "gray76", "gray77", "gray78", "gray79", "gray80", "gray81", "gray82", "gray83", "gray84", "gray85", "gray86", "gray87", "gray88", "gray89", "gray90", "gray91", "gray92", "gray93", "gray94", "gray95", "gray96", "gray97", "gray98", "gray99", "gray100", "gray", "green", "greenyellow", "grey", "honeydew", "hotpink", "indianred", "indigo", "ivory", "khaki", "lavender", "lavenderblush", "lawngreen", "lemonchiffon", "lightblue", "lightcoral", "lightcyan", "lightgoldenrodyellow", "lightgray", "lightgreen", "lightgrey", "lightpink", "lightsalmon", "lightseagreen", "lightskyblue", "lightslategray", "lightslategrey", "lightsteelblue", "lightyellow", "lime", "limegreen", "linen", "magenta", "maroon", "mediumaquamarine", "mediumblue", "mediumorchid", "mediumpurple", "mediumseagreen", "mediumslateblue", "mediumspringgreen", "mediumturquoise", "mediumvioletred", "midnightblue", "mintcream", "mistyrose", "moccasin", "navajowhite", "navy", "none", "oldlace", "olive", "olivedrab", "orange", "orangered", "orchid", "palegoldenrod", "palegreen", "paleturquoise", "palevioletred", "papayawhip", "peachpuff", "peru", "pink", "plum", "powderblue", "purple", "red", "rosybrown", "royalblue", "saddlebrown", "salmon", "sandybrown", "seagreen", "seashell", "sienna", "silver", "skyblue", "slateblue", "slategray", "slategrey", "snow", "springgreen", "steelblue", "tan", "teal", "thistle", "tomato", "turquoise", "violet", "wheat", "white", "whitesmoke", "yellow", "yellowgreen"] }] }, pageFormatDef: { $id: "#pageFormatDef", type: "string", enum: ["a2", "a3", "a4", "a5", "b4", "b5", "letter", "legal", "tabloid"] }, pageRangeDef: { $id: "#pageRangeDef", type: "array", uniqueItems: !0, items: [{ oneOf: [{ type: "integer", minimum: 1 }, { type: "string", pattern: "^(\\d+(?:-\\d+)?)$|^(-\\d+)$|^(\\d+-)$", errorMessage: 'Param should be provided in one of the following formats: "1,2,3,5", "1-3", "1-", "-2" ' }] }] }, facesDef: { $id: "#facesDef", oneOf: [{ type: "string", enum: ["all"] }, { type: "integer", minimum: 1, maximum: 1e3 }, { type: "array", uniqueItems: !0, items: [{ type: "integer", minimum: 1, maximum: 1e3 }] }] }, objectsDef: { $id: "#objectsDef", type: "array", minItems: 1, maxItems: 50, items: [{ type: "array", additionalItems: !1, minItems: 4, items: [{ type: "integer", minimum: 0, maximum: 1e4 }, { type: "integer", minimum: 0, maximum: 1e4 }, { type: "integer", minimum: 1, maximum: 1e4 }, { type: "integer", minimum: 1, maximum: 1e4 }] }] }, positionDef: { $id: "#positionDef", default: ["middle", "center"], oneOf: [{ type: "string", enum: ["top", "middle", "bottom", "left", "center", "right"] }, { type: "array", uniqueItems: !0, additionalItems: !1, minItems: 2, default: ["middle", "center"], items: [{ type: "string", enum: ["top", "middle", "bottom"] }, { type: "string", enum: ["left", "center", "right"] }] }] } }, properties: { flip: { type: "boolean", additionalProperties: !1 }, no_metadata: { type: "boolean", additionalProperties: !1 }, compress: { additionalProperties: !1, oneOf: [{ type: "boolean" }, { type: "object", properties: { metadata: { type: "boolean", default: !1 } } }] }, flop: { type: "boolean", additionalProperties: !1 }, enchance: { type: "boolean", additionalProperties: !1 }, redeye: { type: "boolean", additionalProperties: !1 }, monochrome: { type: "boolean", additionalProperties: !1 }, negative: { type: "boolean", additionalProperties: !1 }, tags: { type: "boolean", additionalProperties: !1 }, sfw: { type: "boolean", additionalProperties: !1 }, imagesize: { type: "boolean", additionalProperties: !1 }, metadata: { type: "object", params: { type: "array", items: { type: "string", enum: ["filename", "mimetype", "size", "width", "height", "writeable", "path", "container", "cloud", "exif", "source_url", "md5", "sha256", "sha1", "sha512"] }, minItems: 0, uniqueItems: !0, additionalItems: !1 }, additionalProperties: !1 }, resize: { type: "object", properties: { width: { type: "number", minimum: 0, maximum: 1e4 }, height: { type: "number", minimum: 0, maximum: 1e4 }, fit: { type: "string", enum: ["clip", "crop", "scale", "max"], default: "clip" }, align: { $ref: "#positionDef", default: "center" } }, additionalProperties: !1, anyOf: [{ required: ["width"] }, { required: ["height"] }] }, crop: { type: "object", properties: { dim: { type: "array", additionalItems: !1, minItems: 4, items: [{ type: "integer", minimum: 0, maximum: 1e5 }, { type: "integer", minimum: 0, maximum: 1e5 }, { type: "integer", minimum: 1, maximum: 1e5 }, { type: "integer", minimum: 1, maximum: 1e5 }] } }, required: ["dim"] }, rotate: { type: "object", properties: { deg: { oneOf: [{ type: "string", enum: ["exif"] }, { type: "number", minimum: 0, maximum: 359 }] }, exif: { type: "boolean" }, background: { $ref: "#colorDef", default: "FFFFFFFF" } }, additionalProperties: !1 }, detect_faces: { oneOf: [{ type: "boolean" }, { type: "object", properties: { maxsize: { type: "number", minimum: 0, maximum: 1e4, default: .35 }, minsize: { type: "number", minimum: 0, maximum: 1e4, default: .35 }, export: { type: "boolean" }, color: { $ref: "#colorDef", default: "000000FF" } }, additionalProperties: !1 }] }, crop_faces: { oneOf: [{ type: "boolean" }, { type: "object", properties: { faces: { default: 1, $ref: "#facesDef" }, width: { type: "number", minimum: 1, maximum: 1e4 }, height: { type: "number", minimum: 1, maximum: 1e4 }, maxsize: { type: "number", minimum: 0, maximum: 1e4, default: .35 }, minsize: { type: "number", minimum: 0, maximum: 1e4, default: .35 }, buffer: { type: "integer", minimum: 0, maximum: 1e4 }, mode: { type: "string", enum: ["crop", "thumb", "fill"], default: "thumb" } }, additionalProperties: !1 }] }, pixelate_faces: { oneOf: [{ type: "boolean" }, { type: "object", properties: { faces: { $ref: "#facesDef", default: "all" }, maxsize: { type: "number", minimum: 0, maximum: 1e4, default: .35 }, minsize: { type: "number", minimum: 0, maximum: 1e4, default: .35 }, buffer: { type: "integer", minimum: 0, maximum: 1e4 }, amount: { type: "integer", minimum: 2, maximum: 100, default: 10 }, blur: { type: "number", minimum: 0, maximum: 20, default: 4 }, type: { type: "string", enum: ["rect", "oval"], default: "rect" } }, additionalProperties: !1 }] }, blur_faces: { oneOf: [{ type: "boolean" }, { type: "object", properties: { faces: { $ref: "#facesDef", default: "all" }, maxsize: { type: "number", minimum: 0, maximum: 1e4, default: .35 }, minsize: { type: "number", minimum: 0, maximum: 1e4, default: .35 }, buffer: { type: "integer", minimum: 0, maximum: 1e4 }, amount: { type: "number", minimum: 0, maximum: 10, default: 10 }, blur: { type: "number", minimum: 0, maximum: 20, default: 4 }, type: { type: "string", enum: ["rect", "oval"], default: "rect" } }, additionalProperties: !1 }] }, rounded_corners: { oneOf: [{ type: "boolean" }, { type: "object", properties: { radius: { oneOf: [{ type: "integer", minimum: 1, maximum: 1e4 }, { type: "string", enum: ["max"] }] }, blur: { type: "number", minimum: 0, maximum: 20, default: .3 }, background: { $ref: "#colorDef" } }, additionalProperties: !1 }] }, vignette: { oneOf: [{ type: "boolean" }, { type: "object", properties: { amount: { type: "integer", minimum: 0, maximum: 100, default: 20 }, blurmode: { type: "string", enum: ["gaussian", "linear"], default: "gaussian" }, background: { $ref: "#colorDef" } }, additionalProperties: !1 }] }, polaroid: { oneOf: [{ type: "boolean" }, { type: "object", properties: { rotate: { type: "integer", minimum: 0, maximum: 359 }, color: { $ref: "#colorDef", default: "snow" }, background: { $ref: "#colorDef" } }, additionalProperties: !1 }] }, torn_edges: { oneOf: [{ type: "boolean" }, { type: "object", properties: { spread: { type: "array", additionalItems: !1, minItems: 2, items: [{ type: "integer", minimum: 1, maximum: 1e4, default: 1 }, { type: "integer", minimum: 1, maximum: 1e4, default: 10 }] }, background: { $ref: "#colorDef" } }, additionalProperties: !1 }] }, shadow: { oneOf: [{ type: "boolean" }, { type: "object", properties: { blur: { type: "number", minimum: 0, maximum: 20, default: 100 }, opacity: { type: "integer", minimum: 0, maximum: 100, default: 60 }, vector: { type: "array", additionalItems: !1, minItems: 2, items: [{ type: "integer", minimum: -1e3, maximum: 1e3, default: 4 }, { type: "integer", minimum: -1e3, maximum: 1e3, default: 4 }] }, color: { $ref: "#colorDef" }, background: { $ref: "#colorDef" } }, additionalProperties: !1 }] }, circle: { oneOf: [{ type: "boolean" }, { type: "object", properties: { background: { $ref: "#colorDef" } }, additionalProperties: !1 }] }, border: { oneOf: [{ type: "boolean" }, { type: "object", properties: { color: { $ref: "#colorDef" }, background: { $ref: "#colorDef" }, width: { type: "integer", minimum: 0, maximum: 1e3 } }, additionalProperties: !1 }] }, sharpen: { oneOf: [{ type: "boolean" }, { type: "object", properties: { amount: { type: "integer", minimum: 0, maximum: 20, default: 2 } }, additionalProperties: !1 }] }, blur: { oneOf: [{ type: "boolean" }, { type: "object", properties: { amount: { type: "integer", minimum: 0, maximum: 20, default: 2 } }, additionalProperties: !1 }] }, blackwhite: { oneOf: [{ type: "boolean" }, { type: "object", properties: { threshold: { type: "integer", minimum: 0, maximum: 100, default: 50 } }, additionalProperties: !1 }] }, sepia: { oneOf: [{ type: "boolean" }, { type: "object", properties: { tone: { type: "integer", minimum: 0, maximum: 100, default: 80 } }, additionalProperties: !1 }] }, pixelate: { oneOf: [{ type: "boolean" }, { type: "object", properties: { amount: { type: "integer", minimum: 2, maximum: 100, default: 2 } }, additionalProperties: !1 }] }, oil_paint: { oneOf: [{ type: "boolean" }, { type: "object", properties: { amount: { type: "integer", minimum: 2, maximum: 100, default: 2 } }, additionalProperties: !1 }] }, modulate: { oneOf: [{ type: "boolean" }, { type: "object", properties: { brightness: { type: "integer", minimum: 0, maximum: 1e4, default: 100 }, saturation: { type: "integer", minimum: 0, maximum: 1e4, default: 100 }, hue: { type: "integer", minimum: 0, maximum: 359, default: 0 } }, additionalProperties: !1 }] }, asci: { oneOf: [{ type: "boolean" }, { type: "object", properties: { foreground: { $ref: "#colorDef", default: "000000FF" }, background: { $ref: "#colorDef", default: "FFFFFFFF" }, colored: { type: "boolean", default: !1 }, size: { type: "integer", minimum: 10, maximum: 100, default: 100 }, reverse: { type: "boolean", default: !1 } }, additionalProperties: !1 }] }, collage: { type: "object", properties: { files: { type: "array", additionalItems: !1, minItems: 1, items: [{ type: "string" }] }, margin: { type: "integer", minimum: 1, maximum: 100, default: 10 }, width: { type: "integer", minimum: 0, maximum: 1e4 }, height: { type: "integer", minimum: 0, maximum: 1e4 }, color: { $ref: "#colorDef", default: "FFFFFFFF" }, fit: { type: "string", enum: ["auto", "crop"] }, autorotate: { type: "boolean", default: !1 } }, required: ["width", "height", "files"], additionalProperties: !1 }, urlscreenshot: { oneOf: [{ type: "boolean" }, { type: "object", properties: { agent: { type: "string", enum: ["desktop", "mobile"], default: "desktop" }, width: { type: "integer", minimum: 1, maximum: 1920, default: 1024 }, height: { type: "integer", minimum: 1, maximum: 8e3, default: 768 }, mode: { type: "string", enum: ["all", "window"], default: "all" }, delay: { type: "integer", minimum: 0, maximum: 2e4, default: 1e3 }, orientation: { type: "string", enum: ["portrait", "landscape"], default: "portrait" }, device: { type: "string", default: "" } }, additionalProperties: !1 }] }, upscale: { oneOf: [{ type: "boolean" }, { type: "object", properties: { noise: { type: "string", enum: ["none", "low", "medium", "high"], default: "none" }, upscale: { type: "boolean", default: !0 }, style: { type: "string", enum: ["artwork", "photo"], default: "photo" } }, additionalProperties: !1 }] }, output: { type: "object", additionalProperties: !1, properties: { format: { type: "string", enum: ["doc", "docx", "html", "jpg", "odp", "ods", "odt", "pjpg", "pdf", "png", "ppt", "pptx", "svg", "txt", "webp", "xls", "xlsx"] }, page: { type: "integer", minimum: 1, maximum: 99999 }, density: { type: "integer", minimum: 1, maximum: 500 }, compress: { type: "boolean" }, quality: { oneOf: [{ type: "string", enum: ["input"] }, { type: "integer", minimum: 1, maximum: 100, default: 95 }] }, secure: { type: "boolean", default: !1 }, docinfo: { type: "boolean", default: !1 }, strip: { type: "boolean", default: !1 }, colorspace: { type: "string", enum: ["rgb", "cmyk", "input"], default: "rgb" }, background: { $ref: "#colorDef" }, pageformat: { type: "string", enum: ["a2", "a3", "a4", "a5", "b4", "b5", "letter", "legal", "tabloid"] }, pageorientation: { type: "string", enum: ["landscape", "portrait"] } } }, pjpg: { oneOf: [{ type: "boolean" }, { type: "object", additionalProperties: !1, properties: { quality: { type: "integer", minimum: 0, maximum: 100 }, metadata: { type: "boolean", default: !1 } } }] }, quality: { type: "object", additionalProperties: !1, properties: { value: { type: "integer", minimum: 1, maximum: 100 } } }, cache: { oneOf: [{ type: "boolean" }, { type: "object", properties: { expiry: { type: "integer" } } }] }, video_convert: { type: "object", additionalProperties: !1, properties: { width: { type: "integer", minimum: 1, maximum: 4096 }, height: { type: "integer", minimum: 1, maximum: 4096 }, preset: { type: "string" }, force: { type: "boolean" }, title: { type: "string" }, extname: { type: "string" }, upscale: { type: "boolean" }, aspect_mode: { type: "string", enum: ["letterbox", "pad", "crop", "preserve", "constrain"], default: "letterbox" }, audio_sample_rate: { type: "integer", minimum: 1, maximum: 99999 }, two_pass: { type: "boolean" }, video_bitrate: { type: "integer", minimum: 1, maximum: 5e3 }, fps: { type: "integer", minimum: 1, maximum: 300 }, keyframe_interval: { type: "integer", minimum: 250, maximum: 250 }, audio_bitrate: { type: "integer", minimum: 1, maximum: 999 }, audio_channels: { type: "integer", minimum: 1, maximum: 12 }, clip_length: { type: "string", pattern: "^([0-1]?\\d|2[0-3])(?::([0-5]?\\d))?(?::([0-5]?\\d))?$" }, clip_offset: { type: "string", pattern: "^([0-1]?\\d|2[0-3])(?::([0-5]?\\d))?(?::([0-5]?\\d))?$" }, watermark_url: { type: "string" }, watermark_top: { type: "integer", minimum: 0, maximum: 9999 }, watermark_right: { type: "integer", minimum: 0, maximum: 9999 }, watermark_bottom: { type: "integer", minimum: 0, maximum: 9999 }, watermark_left: { type: "integer", minimum: 0, maximum: 9999 }, frame_count: { type: "integer", minimum: 1, maximum: 1, default: 1 }, filename: { type: "string" }, location: { $ref: "#locationsDef" }, path: { type: "string" }, container: { type: "string" }, access: { type: "string", enum: ["public", "private"], default: "public" } } }, store: { oneOf: [{ type: "boolean" }, { type: "object", additionalProperties: !1, properties: { filename: { type: "string" }, location: { $ref: "#locationsDef" }, path: { type: "string" }, container: { type: "string" }, region: { $ref: "#regionsDef" }, access: { type: "string", enum: ["public", "private"], default: "private" }, base64decode: { type: "boolean" }, workflows: { type: "array", additionalItems: !1, minItems: 1, maxItems: 20, items: [{ type: "string" }, { type: "object", additionalProperties: !1, properties: { id: { type: "string" } } }] } } }] }, watermark: { type: "object", properties: { file: { type: "string" }, size: { type: "number", minimum: 0, maximum: 500 }, position: { $ref: "#positionDef" } }, required: ["file"], additionalProperties: !1 }, partial_blur: { type: "object", properties: { objects: { $ref: "#objectsDef" }, amount: { type: "number", minimum: 0, maximum: 20 }, blur: { type: "number", minimum: 0, maximum: 20 }, type: { type: "string", enum: ["rect", "oval"] } }, required: ["objects"] }, partial_pixelate: { type: "object", properties: { objects: { $ref: "#objectsDef" }, amount: { type: "number", minimum: 2, maximum: 100 }, blur: { type: "number", minimum: 0, maximum: 20 }, type: { type: "string", enum: ["rect", "oval"] } }, required: ["objects"] }, security: { type: "object", additionalProperties: !1, properties: { policy: { type: "string" }, signature: { type: "string" } }, required: ["policy", "signature"] }, pdfinfo: { oneOf: [{ type: "boolean" }, { type: "object", properties: { colorinfo: { type: "boolean" } } }] }, pdfconvert: { type: "object", additionalProperties: !1, properties: { pageorientation: { type: "string", enum: ["portrait", "landscape"] }, pageformat: { $ref: "#pageFormatDef" }, pages: { $ref: "#pageRangeDef" } }, anyOf: [{ required: ["pageorientation"] }, { required: ["pageformat"] }, { required: ["pages"] }] } } }, Nt = ut(function (e, t) { !function (e) { function t() { for (var e = arguments.length, t = Array(e), r = 0; e > r; r++)t[r] = arguments[r]; if (t.length > 1) { t[0] = t[0].slice(0, -1); for (var a = t.length - 1, i = 1; a > i; ++i)t[i] = t[i].slice(1, -1); return t[a] = t[a].slice(1), t.join("") } return t[0] } function r(e) { return "(?:" + e + ")" } function a(e) { return void 0 === e ? "undefined" : null === e ? "null" : Object.prototype.toString.call(e).split(" ").pop().split("]").shift().toLowerCase() } function i(e) { return e.toUpperCase() } function o(e) { var a = t("[0-9]", "[A-Fa-f]"), i = r(r("%[EFef]" + a + "%" + a + a + "%" + a + a) + "|" + r("%[89A-Fa-f]" + a + "%" + a + a) + "|" + r("%" + a + a)), o = "[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]", n = t("[\\:\\/\\?\\#\\[\\]\\@]", o), s = e ? "[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]" : "[]", u = e ? "[\\uE000-\\uF8FF]" : "[]", l = t("[A-Za-z]", "[0-9]", "[\\-\\.\\_\\~]", s), c = (r("[A-Za-z]" + t("[A-Za-z]", "[0-9]", "[\\+\\-\\.]") + "*"), r(r(i + "|" + t(l, o, "[\\:]")) + "*"), r(r("25[0-5]") + "|" + r("2[0-4][0-9]") + "|" + r("1[0-9][0-9]") + "|" + r("0?[1-9][0-9]") + "|0?0?[0-9]")), p = r(c + "\\." + c + "\\." + c + "\\." + c), d = r(a + "{1,4}"), f = r(r(d + "\\:" + d) + "|" + p), h = r(r(d + "\\:") + "{6}" + f), m = r("\\:\\:" + r(d + "\\:") + "{5}" + f), y = r(r(d) + "?\\:\\:" + r(d + "\\:") + "{4}" + f), v = r(r(r(d + "\\:") + "{0,1}" + d) + "?\\:\\:" + r(d + "\\:") + "{3}" + f), g = r(r(r(d + "\\:") + "{0,2}" + d) + "?\\:\\:" + r(d + "\\:") + "{2}" + f), b = r(r(r(d + "\\:") + "{0,3}" + d) + "?\\:\\:" + d + "\\:" + f), P = r(r(r(d + "\\:") + "{0,4}" + d) + "?\\:\\:" + f), w = r(r(r(d + "\\:") + "{0,5}" + d) + "?\\:\\:" + d), E = r(r(r(d + "\\:") + "{0,6}" + d) + "?\\:\\:"), _ = r([h, m, y, v, g, b, P, w, E].join("|")), x = r(r(l + "|" + i) + "+"), k = (r("[vV]" + a + "+\\." + t(l, o, "[\\:]") + "+"), r(r(i + "|" + t(l, o)) + "*"), r(i + "|" + t(l, o, "[\\:\\@]"))); return r(r(i + "|" + t(l, o, "[\\@]")) + "+"), r(r(k + "|" + t("[\\/\\?]", u)) + "*"), { NOT_SCHEME: RegExp(t("[^]", "[A-Za-z]", "[0-9]", "[\\+\\-\\.]"), "g"), NOT_USERINFO: RegExp(t("[^\\%\\:]", l, o), "g"), NOT_HOST: RegExp(t("[^\\%\\[\\]\\:]", l, o), "g"), NOT_PATH: RegExp(t("[^\\%\\/\\:\\@]", l, o), "g"), NOT_PATH_NOSCHEME: RegExp(t("[^\\%\\/\\@]", l, o), "g"), NOT_QUERY: RegExp(t("[^\\%]", l, o, "[\\:\\@\\/\\?]", u), "g"), NOT_FRAGMENT: RegExp(t("[^\\%]", l, o, "[\\:\\@\\/\\?]"), "g"), ESCAPE: RegExp(t("[^]", l, o), "g"), UNRESERVED: RegExp(l, "g"), OTHER_CHARS: RegExp(t("[^\\%]", l, n), "g"), PCT_ENCODED: RegExp(i, "g"), IPV4ADDRESS: RegExp("^(" + p + ")$"), IPV6ADDRESS: RegExp("^\\[?(" + _ + ")" + r(r("\\%25|\\%(?!" + a + "{2})") + "(" + x + ")") + "?\\]?$") } } var n = o(!1), s = o(!0), u = function (e, t) { if (Array.isArray(e)) return e; if (Symbol.iterator in Object(e)) return function (e, t) { var r = [], a = !0, i = !1, o = void 0; try { for (var n, s = e[Symbol.iterator](); !(a = (n = s.next()).done) && (r.push(n.value), !t || r.length !== t); a = !0); } catch (e) { i = !0, o = e } finally { try { !a && s.return && s.return() } finally { if (i) throw o } } return r }(e, t); throw new TypeError("Invalid attempt to destructure non-iterable instance") }, l = 2147483647, c = /^xn--/, p = /[^\0-\x7E]/, d = /[\x2E\u3002\uFF0E\uFF61]/g, f = { overflow: "Overflow: input needs wider integers to process", "not-basic": "Illegal input >= 0x80 (not a basic code point)", "invalid-input": "Invalid input" }, h = Math.floor, m = String.fromCharCode; function y(e) { throw new RangeError(f[e]) } function v(e, t) { var r = e.split("@"), a = ""; r.length > 1 && (a = r[0] + "@", e = r[1]); var i = (e = e.replace(d, ".")).split("."), o = function (e, t) { for (var r = [], a = e.length; a--;)r[a] = t(e[a]); return r }(i, t).join("."); return a + o } function g(e) { for (var t = [], r = 0, a = e.length; a > r;) { var i = e.charCodeAt(r++); if (55296 > i || i > 56319 || r >= a) t.push(i); else { var o = e.charCodeAt(r++); 56320 == (64512 & o) ? t.push(((1023 & i) << 10) + (1023 & o) + 65536) : (t.push(i), r--) } } return t } var b = function (e, t) { return e + 22 + 75 * (26 > e) - ((0 != t) << 5) }, P = function (e, t, r) { var a = 0; for (e = r ? h(e / 700) : e >> 1, e += h(e / t); e > 455; a += 36)e = h(e / 35); return h(a + 36 * e / (e + 38)) }, w = function (e) { var t, r = [], a = e.length, i = 0, o = 128, n = 72, s = e.lastIndexOf("-"); 0 > s && (s = 0); for (var u = 0; s > u; ++u)128 > e.charCodeAt(u) || y("not-basic"), r.push(e.charCodeAt(u)); for (var c = s > 0 ? s + 1 : 0; a > c;) { for (var p = i, d = 1, f = 36; ; f += 36) { a > c || y("invalid-input"); var m = 10 > (t = e.charCodeAt(c++)) - 48 ? t - 22 : 26 > t - 65 ? t - 65 : 26 > t - 97 ? t - 97 : 36; 36 > m && m <= h((l - i) / d) || y("overflow"), i += m * d; var v = f > n ? n + 26 > f ? f - n : 26 : 1; if (v > m) break; var g = 36 - v; d > h(l / g) && y("overflow"), d *= g } var b = r.length + 1; n = P(i - p, b, 0 == p), h(i / b) > l - o && y("overflow"), o += h(i / b), i %= b, r.splice(i++, 0, o) } return String.fromCodePoint.apply(String, r) }, E = function (e) { var t = [], r = (e = g(e)).length, a = 128, i = 0, o = 72, n = !0, s = !1, u = void 0; try { for (var c, p = e[Symbol.iterator](); !(n = (c = p.next()).done); n = !0) { var d = c.value; 128 > d && t.push(m(d)) } } catch (e) { s = !0, u = e } finally { try { !n && p.return && p.return() } finally { if (s) throw u } } var f = t.length, v = f; for (f && t.push("-"); r > v;) { var w = l, E = !0, _ = !1, x = void 0; try { for (var k, S = e[Symbol.iterator](); !(E = (k = S.next()).done); E = !0) { var O = k.value; O >= a && w > O && (w = O) } } catch (e) { _ = !0, x = e } finally { try { !E && S.return && S.return() } finally { if (_) throw x } } var j = v + 1; w - a > h((l - i) / j) && y("overflow"), i += (w - a) * j, a = w; var F = !0, A = !1, D = void 0; try { for (var I, $ = e[Symbol.iterator](); !(F = (I = $.next()).done); F = !0) { var R = I.value; if (a > R && ++i > l && y("overflow"), R == a) { for (var T = i, C = 36; ; C += 36) { var z = C > o ? o + 26 > C ? C - o : 26 : 1; if (z > T) break; var q = T - z, U = 36 - z; t.push(m(b(z + q % U, 0))), T = h(q / U) } t.push(m(b(T, 0))), o = P(i, j, v == f), i = 0, ++v } } } catch (e) { A = !0, D = e } finally { try { !F && $.return && $.return() } finally { if (A) throw D } } ++i, ++a } return t.join("") }, _ = { version: "2.1.0", ucs2: { decode: g, encode: function (e) { return String.fromCodePoint.apply(String, function (e) { if (Array.isArray(e)) { for (var t = 0, r = Array(e.length); e.length > t; t++)r[t] = e[t]; return r } return Array.from(e) }(e)) } }, decode: w, encode: E, toASCII: function (e) { return v(e, function (e) { return p.test(e) ? "xn--" + E(e) : e }) }, toUnicode: function (e) { return v(e, function (e) { return c.test(e) ? w(e.slice(4).toLowerCase()) : e }) } }, x = {}; function k(e) { var t = e.charCodeAt(0); return 16 > t ? "%0" + t.toString(16).toUpperCase() : 128 > t ? "%" + t.toString(16).toUpperCase() : 2048 > t ? "%" + (t >> 6 | 192).toString(16).toUpperCase() + "%" + (63 & t | 128).toString(16).toUpperCase() : "%" + (t >> 12 | 224).toString(16).toUpperCase() + "%" + (t >> 6 & 63 | 128).toString(16).toUpperCase() + "%" + (63 & t | 128).toString(16).toUpperCase() } function S(e) { for (var t = "", r = 0, a = e.length; a > r;) { var i = parseInt(e.substr(r + 1, 2), 16); if (128 > i) t += String.fromCharCode(i), r += 3; else if (i >= 194 && 224 > i) { if (6 > a - r) t += e.substr(r, 6); else { var o = parseInt(e.substr(r + 4, 2), 16); t += String.fromCharCode((31 & i) << 6 | 63 & o) } r += 6 } else if (224 > i) t += e.substr(r, 3), r += 3; else { if (9 > a - r) t += e.substr(r, 9); else { var n = parseInt(e.substr(r + 4, 2), 16), s = parseInt(e.substr(r + 7, 2), 16); t += String.fromCharCode((15 & i) << 12 | (63 & n) << 6 | 63 & s) } r += 9 } } return t } function O(e, t) { function r(e) { var r = S(e); return r.match(t.UNRESERVED) ? r : e } return e.scheme && (e.scheme = (e.scheme + "").replace(t.PCT_ENCODED, r).toLowerCase().replace(t.NOT_SCHEME, "")), void 0 !== e.userinfo && (e.userinfo = (e.userinfo + "").replace(t.PCT_ENCODED, r).replace(t.NOT_USERINFO, k).replace(t.PCT_ENCODED, i)), void 0 !== e.host && (e.host = (e.host + "").replace(t.PCT_ENCODED, r).toLowerCase().replace(t.NOT_HOST, k).replace(t.PCT_ENCODED, i)), void 0 !== e.path && (e.path = (e.path + "").replace(t.PCT_ENCODED, r).replace(e.scheme ? t.NOT_PATH : t.NOT_PATH_NOSCHEME, k).replace(t.PCT_ENCODED, i)), void 0 !== e.query && (e.query = (e.query + "").replace(t.PCT_ENCODED, r).replace(t.NOT_QUERY, k).replace(t.PCT_ENCODED, i)), void 0 !== e.fragment && (e.fragment = (e.fragment + "").replace(t.PCT_ENCODED, r).replace(t.NOT_FRAGMENT, k).replace(t.PCT_ENCODED, i)), e } function j(e) { return e.replace(/^0*(.*)/, "$1") || "0" } function F(e, t) { var r = e.match(t.IPV4ADDRESS) || [], a = u(r, 2), i = a[1]; return i ? i.split(".").map(j).join(".") : e } function A(e, t) { var r = e.match(t.IPV6ADDRESS) || [], a = u(r, 3), i = a[1], o = a[2]; if (i) { for (var n = i.toLowerCase().split("::").reverse(), s = u(n, 2), l = s[0], c = s[1], p = c ? c.split(":").map(j) : [], d = l.split(":").map(j), f = t.IPV4ADDRESS.test(d[d.length - 1]), h = f ? 7 : 8, m = d.length - h, y = Array(h), v = 0; h > v; ++v)y[v] = p[v] || d[m + v] || ""; f && (y[h - 1] = F(y[h - 1], t)); var g = y.reduce(function (e, t, r) { if (!t || "0" === t) { var a = e[e.length - 1]; a && a.index + a.length === r ? a.length++ : e.push({ index: r, length: 1 }) } return e }, []), b = g.sort(function (e, t) { return t.length - e.length })[0], P = void 0; if (b && b.length > 1) { var w = y.slice(0, b.index), E = y.slice(b.index + b.length); P = w.join(":") + "::" + E.join(":") } else P = y.join(":"); return o && (P += "%" + o), P } return e } var D = /^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i, I = void 0 === "".match(/(){0}/)[1]; function $(e) { var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {}, r = {}, a = !1 !== t.iri ? s : n; "suffix" === t.reference && (e = (t.scheme ? t.scheme + ":" : "") + "//" + e); var i = e.match(D); if (i) { I ? (r.scheme = i[1], r.userinfo = i[3], r.host = i[4], r.port = parseInt(i[5], 10), r.path = i[6] || "", r.query = i[7], r.fragment = i[8], isNaN(r.port) && (r.port = i[5])) : (r.scheme = i[1] || void 0, r.userinfo = -1 !== e.indexOf("@") ? i[3] : void 0, r.host = -1 !== e.indexOf("//") ? i[4] : void 0, r.port = parseInt(i[5], 10), r.path = i[6] || "", r.query = -1 !== e.indexOf("?") ? i[7] : void 0, r.fragment = -1 !== e.indexOf("#") ? i[8] : void 0, isNaN(r.port) && (r.port = e.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/) ? i[4] : void 0)), r.host && (r.host = A(F(r.host, a), a)), r.reference = void 0 !== r.scheme || void 0 !== r.userinfo || void 0 !== r.host || void 0 !== r.port || r.path || void 0 !== r.query ? void 0 === r.scheme ? "relative" : void 0 === r.fragment ? "absolute" : "uri" : "same-document", t.reference && "suffix" !== t.reference && t.reference !== r.reference && (r.error = r.error || "URI is not a " + t.reference + " reference."); var o = x[(t.scheme || r.scheme || "").toLowerCase()]; if (t.unicodeSupport || o && o.unicodeSupport) O(r, a); else { if (r.host && (t.domainHost || o && o.domainHost)) try { r.host = _.toASCII(r.host.replace(a.PCT_ENCODED, S).toLowerCase()) } catch (e) { r.error = r.error || "Host's domain name can not be converted to ASCII via punycode: " + e } O(r, n) } o && o.parse && o.parse(r, t) } else r.error = r.error || "URI can not be parsed."; return r } var R = /^\.\.?\//, T = /^\/\.(\/|$)/, C = /^\/\.\.(\/|$)/, z = /^\/?(?:.|\n)*?(?=\/|$)/; function q(e) { for (var t = []; e.length;)if (e.match(R)) e = e.replace(R, ""); else if (e.match(T)) e = e.replace(T, "/"); else if (e.match(C)) e = e.replace(C, "/"), t.pop(); else if ("." === e || ".." === e) e = ""; else { var r = e.match(z); if (!r) throw Error("Unexpected dot segment condition"); var a = r[0]; e = e.slice(a.length), t.push(a) } return t.join("") } function U(e) { var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {}, r = t.iri ? s : n, a = [], i = x[(t.scheme || e.scheme || "").toLowerCase()]; if (i && i.serialize && i.serialize(e, t), e.host) if (r.IPV6ADDRESS.test(e.host)); else if (t.domainHost || i && i.domainHost) try { e.host = t.iri ? _.toUnicode(e.host) : _.toASCII(e.host.replace(r.PCT_ENCODED, S).toLowerCase()) } catch (r) { e.error = e.error || "Host's domain name can not be converted to " + (t.iri ? "Unicode" : "ASCII") + " via punycode: " + r } O(e, r), "suffix" !== t.reference && e.scheme && (a.push(e.scheme), a.push(":")); var o = function (e, t) { var r = !1 !== t.iri ? s : n, a = []; return void 0 !== e.userinfo && (a.push(e.userinfo), a.push("@")), void 0 !== e.host && a.push(A(F(e.host + "", r), r).replace(r.IPV6ADDRESS, function (e, t, r) { return "[" + t + (r ? "%25" + r : "") + "]" })), "number" == typeof e.port && (a.push(":"), a.push(e.port.toString(10))), a.length ? a.join("") : void 0 }(e, t); if (void 0 !== o && ("suffix" !== t.reference && a.push("//"), a.push(o), e.path && "/" !== e.path.charAt(0) && a.push("/")), void 0 !== e.path) { var u = e.path; t.absolutePath || i && i.absolutePath || (u = q(u)), void 0 === o && (u = u.replace(/^\/\//, "/%2F")), a.push(u) } return void 0 !== e.query && (a.push("?"), a.push(e.query)), void 0 !== e.fragment && (a.push("#"), a.push(e.fragment)), a.join("") } function N(e, t) { var r = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {}, a = arguments[3], i = {}; return a || (e = $(U(e, r), r), t = $(U(t, r), r)), !(r = r || {}).tolerant && t.scheme ? (i.scheme = t.scheme, i.userinfo = t.userinfo, i.host = t.host, i.port = t.port, i.path = q(t.path || ""), i.query = t.query) : (void 0 !== t.userinfo || void 0 !== t.host || void 0 !== t.port ? (i.userinfo = t.userinfo, i.host = t.host, i.port = t.port, i.path = q(t.path || ""), i.query = t.query) : (t.path ? ("/" === t.path.charAt(0) ? i.path = q(t.path) : (i.path = void 0 === e.userinfo && void 0 === e.host && void 0 === e.port || e.path ? e.path ? e.path.slice(0, e.path.lastIndexOf("/") + 1) + t.path : t.path : "/" + t.path, i.path = q(i.path)), i.query = t.query) : (i.path = e.path, i.query = void 0 !== t.query ? t.query : e.query), i.userinfo = e.userinfo, i.host = e.host, i.port = e.port), i.scheme = e.scheme), i.fragment = t.fragment, i } function L(e, t) { return e && ("" + e).replace(t && t.iri ? s.PCT_ENCODED : n.PCT_ENCODED, S) } var V = { scheme: "http", domainHost: !0, parse: function (e, t) { return e.host || (e.error = e.error || "HTTP URIs must have a host."), e }, serialize: function (e, t) { return e.port !== ("https" !== (e.scheme + "").toLowerCase() ? 80 : 443) && "" !== e.port || (e.port = void 0), e.path || (e.path = "/"), e } }, M = { scheme: "https", domainHost: V.domainHost, parse: V.parse, serialize: V.serialize }, Q = {}, B = "[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]", H = "[0-9A-Fa-f]", K = r(r("%[EFef][0-9A-Fa-f]%" + H + H + "%" + H + H) + "|" + r("%[89A-Fa-f][0-9A-Fa-f]%" + H + H) + "|" + r("%" + H + H)), J = t("[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]", '[\\"\\\\]'), X = RegExp(B, "g"), Z = RegExp(K, "g"), G = RegExp(t("[^]", "[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]", "[\\.]", '[\\"]', J), "g"), Y = RegExp(t("[^]", B, "[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]"), "g"), W = Y; function ee(e) { var t = S(e); return t.match(X) ? t : e } var te = { scheme: "mailto", parse: function (e, t) { var r = e, a = r.to = r.path ? r.path.split(",") : []; if (r.path = void 0, r.query) { for (var i = !1, o = {}, n = r.query.split("&"), s = 0, u = n.length; u > s; ++s) { var l = n[s].split("="); switch (l[0]) { case "to": for (var c = l[1].split(","), p = 0, d = c.length; d > p; ++p)a.push(c[p]); break; case "subject": r.subject = L(l[1], t); break; case "body": r.body = L(l[1], t); break; default: i = !0, o[L(l[0], t)] = L(l[1], t) } } i && (r.headers = o) } r.query = void 0; for (var f = 0, h = a.length; h > f; ++f) { var m = a[f].split("@"); if (m[0] = L(m[0]), t.unicodeSupport) m[1] = L(m[1], t).toLowerCase(); else try { m[1] = _.toASCII(L(m[1], t).toLowerCase()) } catch (e) { r.error = r.error || "Email address's domain name can not be converted to ASCII via punycode: " + e } a[f] = m.join("@") } return r }, serialize: function (e, t) { var r, a = e, o = null != (r = e.to) ? r instanceof Array ? r : "number" != typeof r.length || r.split || r.setInterval || r.call ? [r] : Array.prototype.slice.call(r) : []; if (o) { for (var n = 0, s = o.length; s > n; ++n) { var u = o[n] + "", l = u.lastIndexOf("@"), c = u.slice(0, l).replace(Z, ee).replace(Z, i).replace(G, k), p = u.slice(l + 1); try { p = t.iri ? _.toUnicode(p) : _.toASCII(L(p, t).toLowerCase()) } catch (e) { a.error = a.error || "Email address's domain name can not be converted to " + (t.iri ? "Unicode" : "ASCII") + " via punycode: " + e } o[n] = c + "@" + p } a.path = o.join(",") } var d = e.headers = e.headers || {}; e.subject && (d.subject = e.subject), e.body && (d.body = e.body); var f = []; for (var h in d) d[h] !== Q[h] && f.push(h.replace(Z, ee).replace(Z, i).replace(Y, k) + "=" + d[h].replace(Z, ee).replace(Z, i).replace(W, k)); return f.length && (a.query = f.join("&")), a } }, re = /^([^\:]+)\:(.*)/, ae = { scheme: "urn", parse: function (e, t) { var r = e.path && e.path.match(re), a = e; if (r) { var i = t.scheme || a.scheme || "urn", o = r[1].toLowerCase(), n = r[2], s = i + ":" + (t.nid || o), u = x[s]; a.nid = o, a.nss = n, a.path = void 0, u && (a = u.parse(a, t)) } else a.error = a.error || "URN can not be parsed."; return a }, serialize: function (e, t) { var r = t.scheme || e.scheme || "urn", a = e.nid, i = r + ":" + (t.nid || a), o = x[i]; o && (e = o.serialize(e, t)); var n = e, s = e.nss; return n.path = (a || t.nid) + ":" + s, n } }, ie = /^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/, oe = { scheme: "urn:uuid", parse: function (e, t) { var r = e; return r.uuid = r.nss, r.nss = void 0, t.tolerant || r.uuid && r.uuid.match(ie) || (r.error = r.error || "UUID is not valid."), r }, serialize: function (e, t) { var r = e; return r.nss = (e.uuid || "").toLowerCase(), r } }; x[V.scheme] = V, x[M.scheme] = M, x[te.scheme] = te, x[ae.scheme] = ae, x[oe.scheme] = oe, e.SCHEMES = x, e.pctEncChar = k, e.pctDecChars = S, e.parse = $, e.removeDotSegments = q, e.serialize = U, e.resolveComponents = N, e.resolve = function (e, t, r) { var a = function (e, t) { var r = e; if (t) for (var a in t) r[a] = t[a]; return r }({ scheme: "null" }, r); return U(N($(e, a), $(t, a), a, !0), a) }, e.normalize = function (e, t) { return "string" == typeof e ? e = U($(e, t), t) : "object" === a(e) && (e = $(U(e, t), t)), e }, e.equal = function (e, t, r) { return "string" == typeof e ? e = U($(e, r), r) : "object" === a(e) && (e = U(e, r)), "string" == typeof t ? t = U($(t, r), r) : "object" === a(t) && (t = U(t, r)), e === t }, e.escapeComponent = function (e, t) { return e && ("" + e).replace(t && t.iri ? s.ESCAPE : n.ESCAPE, k) }, e.unescapeComponent = L, Object.defineProperty(e, "__esModule", { value: !0 }) }(t) }); (qt = Nt) && qt.__esModule && Object.prototype.hasOwnProperty.call(qt, "default"); var Lt = Array.isArray, Vt = Object.keys, Mt = Object.prototype.hasOwnProperty, Qt = function e(t, a) { if (t === a) return !0; if (t && a && "object" == r(t) && "object" == r(a)) { var i, o, n, s = Lt(t), u = Lt(a); if (s && u) { if ((o = t.length) != a.length) return !1; for (i = o; 0 != i--;)if (!e(t[i], a[i])) return !1; return !0 } if (s != u) return !1; var l = t instanceof Date, c = a instanceof Date; if (l != c) return !1; if (l && c) return t.getTime() == a.getTime(); var p = t instanceof RegExp, d = a instanceof RegExp; if (p != d) return !1; if (p && d) return "" + t == "" + a; var f = Vt(t); if ((o = f.length) !== Vt(a).length) return !1; for (i = o; 0 != i--;)if (!Mt.call(a, f[i])) return !1; for (i = o; 0 != i--;)if (!e(t[n = f[i]], a[n])) return !1; return !0 } return t != t && a != a }, Bt = { copy: function (e, t) { for (var r in t = t || {}, e) t[r] = e[r]; return t }, checkDataType: Ht, checkDataTypes: function (e, t) { switch (e.length) { case 1: return Ht(e[0], t, !0); default: var r = "", a = Jt(e); for (var i in a.array && a.object && (r = a.null ? "(" : "(!" + t + " || ", r += "typeof " + t + ' !== "object")', delete a.null, delete a.array, delete a.object), a.number && delete a.integer, a) r += (r ? " && " : "") + Ht(i, t, !0); return r } }, coerceToTypes: function (e, t) { if (Array.isArray(t)) { for (var r = [], a = 0; t.length > a; a++) { var i = t[a]; Kt[i] ? r[r.length] = i : "array" === e && "array" === i && (r[r.length] = i) } if (r.length) return r } else { if (Kt[t]) return [t]; if ("array" === e && "array" === t) return ["array"] } }, toHash: Jt, getProperty: Gt, escapeQuotes: Yt, equal: Qt, ucs2length: function (e) { for (var t, r = 0, a = e.length, i = 0; a > i;)r++ , 55296 > (t = e.charCodeAt(i++)) || t > 56319 || i >= a || 56320 == (64512 & (t = e.charCodeAt(i))) && i++; return r }, varOccurences: function (e, t) { var r = e.match(RegExp(t += "[^0-9]", "g")); return r ? r.length : 0 }, varReplace: function (e, t, r) { return t += "([^0-9])", r = r.replace(/\$/g, "$$$$"), e.replace(RegExp(t, "g"), r + "$1") }, cleanUpCode: function (e) { return e.replace(Wt, "").replace(er, "").replace(tr, "if (!($1))") }, finalCleanUpCode: function (e, t) { var r = e.match(rr); r && 2 == r.length && (e = t ? e.replace(ir, "").replace(sr, ur) : e.replace(ar, "").replace(or, nr)); return (r = e.match(lr)) && 3 === r.length ? e.replace(cr, "") : e }, schemaHasRules: function (e, t) { if ("boolean" == typeof e) return !e; for (var r in e) if (t[r]) return !0 }, schemaHasRulesExcept: function (e, t, r) { if ("boolean" == typeof e) return !e && "not" != r; for (var a in e) if (a != r && t[a]) return !0 }, toQuotedString: pr, getPathExpr: function (e, t, r, a) { return hr(e, r ? "'/' + " + t + (a ? "" : ".replace(/~/g, '~0').replace(/\\//g, '~1')") : a ? "'[' + " + t + " + ']'" : "'[\\'' + " + t + " + '\\']'") }, getPath: function (e, t, r) { var a = pr(r ? "/" + mr(t) : Gt(t)); return hr(e, a) }, getData: function (e, t, r) { var a, i, o, n; if ("" === e) return "rootData"; if ("/" == e[0]) { if (!dr.test(e)) throw Error("Invalid JSON-pointer: " + e); i = e, o = "rootData" } else { if (!(n = e.match(fr))) throw Error("Invalid JSON-pointer: " + e); if (a = +n[1], "#" == (i = n[2])) { if (a >= t) throw Error("Cannot access property/index " + a + " levels up, current level is " + t); return r[t - a] } if (a > t) throw Error("Cannot access data " + a + " levels up, current level is " + t); if (o = "data" + (t - a || ""), !i) return o } for (var s = o, u = i.split("/"), l = 0; u.length > l; l++) { var c = u[l]; c && (o += Gt(yr(c)), s += " && " + o) } return s }, unescapeFragment: function (e) { return yr(decodeURIComponent(e)) }, unescapeJsonPointer: yr, escapeFragment: function (e) { return encodeURIComponent(mr(e)) }, escapeJsonPointer: mr }; function Ht(e, t, r) { var a = r ? " !== " : " === ", i = r ? " || " : " && ", o = r ? "!" : "", n = r ? "" : "!"; switch (e) { case "null": return t + a + "null"; case "array": return o + "Array.isArray(" + t + ")"; case "object": return "(" + o + t + i + "typeof " + t + a + '"object"' + i + n + "Array.isArray(" + t + "))"; case "integer": return "(typeof " + t + a + '"number"' + i + n + "(" + t + " % 1)" + i + t + a + t + ")"; default: return "typeof " + t + a + '"' + e + '"' } } var Kt = Jt(["string", "number", "integer", "boolean", "null"]); function Jt(e) { for (var t = {}, r = 0; e.length > r; r++)t[e[r]] = !0; return t } var Xt = /^[a-z$_][a-z$_0-9]*$/i, Zt = /'|\\/g; function Gt(e) { return "number" == typeof e ? "[" + e + "]" : Xt.test(e) ? "." + e : "['" + Yt(e) + "']" } function Yt(e) { return e.replace(Zt, "\\$&").replace(/\n/g, "\\n").replace(/\r/g, "\\r").replace(/\f/g, "\\f").replace(/\t/g, "\\t") } var Wt = /else\s*{\s*}/g, er = /if\s*\([^)]+\)\s*\{\s*\}(?!\s*else)/g, tr = /if\s*\(([^)]+)\)\s*\{\s*\}\s*else(?!\s*if)/g; var rr = /[^v.]errors/g, ar = /var errors = 0;|var vErrors = null;|validate.errors = vErrors;/g, ir = /var errors = 0;|var vErrors = null;/g, or = "return errors === 0;", nr = "validate.errors = null; return true;", sr = /if \(errors === 0\) return data;\s*else throw new ValidationError\(vErrors\);/, ur = "return data;", lr = /[^A-Za-z_$]rootData[^A-Za-z0-9_$]/g, cr = /if \(rootData === undefined\) rootData = data;/; function pr(e) { return "'" + Yt(e) + "'" } var dr = /^\/(?:[^~]|~0|~1)*$/, fr = /^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/; function hr(e, t) { return '""' == e ? t : (e + " + " + t).replace(/' \+ '/g, "") } function mr(e) { return e.replace(/~/g, "~0").replace(/\//g, "~1") } function yr(e) { return e.replace(/~1/g, "/").replace(/~0/g, "~") } var vr = function (e) { Bt.copy(e, this) }; var gr = ut(function (e) { var t = e.exports = function (e, a, i) { "function" == typeof a && (i = a, a = {}), function e(a, i, o, n, s, u, l, c, p, d) { if (n && "object" == r(n) && !Array.isArray(n)) { for (var f in i(n, s, u, l, c, p, d), n) { var h = n[f]; if (Array.isArray(h)) { if (f in t.arrayKeywords) for (var m = 0; h.length > m; m++)e(a, i, o, h[m], s + "/" + f + "/" + m, u, s, f, n, m) } else if (f in t.propsKeywords) { if (h && "object" == r(h)) for (var y in h) e(a, i, o, h[y], s + "/" + f + "/" + y.replace(/~/g, "~0").replace(/\//g, "~1"), u, s, f, n, y) } else (f in t.keywords || a.allKeys && !(f in t.skipKeywords)) && e(a, i, o, h, s + "/" + f, u, s, f, n) } o(n, s, u, l, c, p, d) } }(a, "function" == typeof (i = a.cb || i) ? i : i.pre || function () { }, i.post || function () { }, e, "", e) }; t.keywords = { additionalItems: !0, items: !0, contains: !0, additionalProperties: !0, propertyNames: !0, not: !0 }, t.arrayKeywords = { items: !0, allOf: !0, anyOf: !0, oneOf: !0 }, t.propsKeywords = { definitions: !0, properties: !0, patternProperties: !0, dependencies: !0 }, t.skipKeywords = { default: !0, enum: !0, const: !0, required: !0, maximum: !0, minimum: !0, exclusiveMaximum: !0, exclusiveMinimum: !0, multipleOf: !0, maxLength: !0, minLength: !0, pattern: !0, format: !0, maxItems: !0, minItems: !0, uniqueItems: !0, maxProperties: !0, minProperties: !0 } }), br = Pr; function Pr(e, t, r) { var a = this._refs[r]; if ("string" == typeof a) { if (!this._refs[a]) return Pr.call(this, e, t, a); a = this._refs[a] } if ((a = a || this._schemas[r]) instanceof vr) return kr(a.schema, this._opts.inlineRefs) ? a.schema : a.validate || this._compile(a); var i, o, n, s = wr.call(this, t, r); return s && (i = s.schema, t = s.root, n = s.baseId), i instanceof vr ? o = i.validate || e.call(this, i.schema, t, void 0, n) : void 0 !== i && (o = kr(i, this._opts.inlineRefs) ? i : e.call(this, i, t, void 0, n)), o } function wr(e, t) { var r = Nt.parse(t), a = Or(r), i = Sr(this._getId(e.schema)); if (0 === Object.keys(e.schema).length || a !== i) { var o = Fr(a), n = this._refs[o]; if ("string" == typeof n) return function (e, t, r) { var a = wr.call(this, e, t); if (a) { var i = a.schema, o = a.baseId; e = a.root; var n = this._getId(i); return n && (o = Ar(o, n)), _r.call(this, r, o, i, e) } }.call(this, e, n, r); if (n instanceof vr) n.validate || this._compile(n), e = n; else { if (!((n = this._schemas[o]) instanceof vr)) return; if (n.validate || this._compile(n), o == Fr(t)) return { schema: n, root: e, baseId: i }; e = n } if (!e.schema) return; i = Sr(this._getId(e.schema)) } return _r.call(this, r, i, e.schema, e) } Pr.normalizeId = Fr, Pr.fullPath = Sr, Pr.url = Ar, Pr.ids = function (e) { var t = Fr(this._getId(e)), r = { "": t }, a = { "": Sr(t, !1) }, i = {}, o = this; return gr(e, { allKeys: !0 }, function (e, t, n, s, u, l, c) { if ("" !== t) { var p = o._getId(e), d = r[s], f = a[s] + "/" + u; if (void 0 !== c && (f += "/" + ("number" == typeof c ? c : Bt.escapeFragment(c))), "string" == typeof p) { p = d = Fr(d ? Nt.resolve(d, p) : p); var h = o._refs[p]; if ("string" == typeof h && (h = o._refs[h]), h && h.schema) { if (!Qt(e, h.schema)) throw Error('id "' + p + '" resolves to more than one schema') } else if (p != Fr(f)) if ("#" == p[0]) { if (i[p] && !Qt(e, i[p])) throw Error('id "' + p + '" resolves to more than one schema'); i[p] = e } else o._refs[p] = f } r[t] = d, a[t] = f } }), i }, Pr.inlineRef = kr, Pr.schema = wr; var Er = Bt.toHash(["properties", "patternProperties", "enum", "dependencies", "definitions"]); function _r(e, t, r, a) { if (e.fragment = e.fragment || "", "/" == e.fragment.slice(0, 1)) { for (var i = e.fragment.split("/"), o = 1; i.length > o; o++) { var n = i[o]; if (n) { if (void 0 === (r = r[n = Bt.unescapeFragment(n)])) break; var s; if (!Er[n] && ((s = this._getId(r)) && (t = Ar(t, s)), r.$ref)) { var u = Ar(t, r.$ref), l = wr.call(this, a, u); l && (r = l.schema, a = l.root, t = l.baseId) } } } return void 0 !== r && r !== a.schema ? { schema: r, root: a, baseId: t } : void 0 } } var xr = Bt.toHash(["type", "format", "pattern", "maxLength", "minLength", "maxProperties", "minProperties", "maxItems", "minItems", "maximum", "minimum", "uniqueItems", "multipleOf", "required", "enum"]); function kr(e, t) { return !1 !== t && (void 0 === t || !0 === t ? function e(t) { var a; if (Array.isArray(t)) { for (var i = 0; t.length > i; i++)if ("object" == r(a = t[i]) && !e(a)) return !1 } else for (var o in t) { if ("$ref" == o) return !1; if ("object" == r(a = t[o]) && !e(a)) return !1 } return !0 }(e) : t ? function e(t) { var a, i = 0; if (Array.isArray(t)) { for (var o = 0; t.length > o; o++)if ("object" == r(a = t[o]) && (i += e(a)), i == 1 / 0) return 1 / 0 } else for (var n in t) { if ("$ref" == n) return 1 / 0; if (xr[n]) i++; else if ("object" == r(a = t[n]) && (i += e(a) + 1), i == 1 / 0) return 1 / 0 } return i }(e) <= t : void 0) } function Sr(e, t) { return !1 !== t && (e = Fr(e)), Or(Nt.parse(e)) } function Or(e) { return Nt.serialize(e).split("#")[0] + "#" } var jr = /#\/?$/; function Fr(e) { return e ? e.replace(jr, "") : "" } function Ar(e, t) { return t = Fr(t), Nt.resolve(e, t) } var Dr = { Validation: $r(function (e) { this.message = "validation failed", this.errors = e, this.ajv = this.validation = !0 }), MissingRef: $r(Ir) }; function Ir(e, t, r) { this.message = r || Ir.message(e, t), this.missingRef = br.url(e, t), this.missingSchema = br.normalizeId(br.fullPath(this.missingRef)) } function $r(e) { return e.prototype = Object.create(Error.prototype), e.prototype.constructor = e, e } Ir.message = function (e, t) { return "can't resolve reference " + t + " from id " + e }; var Rr = function (e, t) { t || (t = {}), "function" == typeof t && (t = { cmp: t }); var a, i = "boolean" == typeof t.cycles && t.cycles, o = t.cmp && (a = t.cmp, function (e) { return function (t, r) { return a({ key: t, value: e[t] }, { key: r, value: e[r] }) } }), n = []; return function e(t) { if (t && t.toJSON && "function" == typeof t.toJSON && (t = t.toJSON()), void 0 !== t) { if ("number" == typeof t) return isFinite(t) ? "" + t : "null"; if ("object" !== r(t)) return JSON.stringify(t); var a, s; if (Array.isArray(t)) { for (s = "[", a = 0; t.length > a; a++)a && (s += ","), s += e(t[a]) || "null"; return s + "]" } if (null === t) return "null"; if (-1 !== n.indexOf(t)) { if (i) return JSON.stringify("__cycle__"); throw new TypeError("Converting circular structure to JSON") } var u = n.push(t) - 1, l = Object.keys(t).sort(o && o(t)); for (s = "", a = 0; l.length > a; a++) { var c = l[a], p = e(t[c]); p && (s && (s += ","), s += JSON.stringify(c) + ":" + p) } return n.splice(u, 1), "{" + s + "}" } }(e) }, Tr = function (e, t, r) { var a = "", i = !0 === e.schema.$async, o = e.util.schemaHasRulesExcept(e.schema, e.RULES.all, "$ref"), n = e.self._getId(e.schema); if (e.isTop && (a += " var validate = ", i && (e.async = !0, a += "async "), a += "function(data, dataPath, parentData, parentDataProperty, rootData) { 'use strict'; ", n && (e.opts.sourceCode || e.opts.processCode) && (a += " /*# sourceURL=" + n + " */ ")), "boolean" == typeof e.schema || !o && !e.schema.$ref) { var s = e.level, u = e.dataLevel, l = e.schema["false schema"], c = e.schemaPath + e.util.getProperty("false schema"), p = e.errSchemaPath + "/false schema", d = !e.opts.allErrors, f = "data" + (u || ""), h = "valid" + s; if (!1 === e.schema) { e.isTop ? d = !0 : a += " var " + h + " = false; ", (K = K || []).push(a), a = "", !1 !== e.createErrors ? (a += " { keyword: 'false schema' , dataPath: (dataPath || '') + " + e.errorPath + " , schemaPath: " + e.util.toQuotedString(p) + " , params: {} ", !1 !== e.opts.messages && (a += " , message: 'boolean schema is false' "), e.opts.verbose && (a += " , schema: false , parentSchema: validate.schema" + e.schemaPath + " , data: " + f + " "), a += " } ") : a += " {} "; var m = a; a = K.pop(), a += !e.compositeRule && d ? e.async ? " throw new ValidationError([" + m + "]); " : " validate.errors = [" + m + "]; return false; " : " var err = " + m + ";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; " } else a += e.isTop ? i ? " return data; " : " validate.errors = null; return true; " : " var " + h + " = true; "; return e.isTop && (a += " }; return validate; "), a } if (e.isTop) { var y = e.isTop; s = e.level = 0, u = e.dataLevel = 0, f = "data"; e.rootId = e.resolve.fullPath(e.self._getId(e.root.schema)), e.baseId = e.baseId || e.rootId, delete e.isTop, e.dataPathArr = [void 0], a += " var vErrors = null; ", a += " var errors = 0;     ", a += " if (rootData === undefined) rootData = data; " } else { s = e.level, f = "data" + ((u = e.dataLevel) || ""); if (n && (e.baseId = e.resolve.url(e.baseId, n)), i && !e.async) throw Error("async schema in sync schema"); a += " var errs_" + s + " = errors;" } h = "valid" + s, d = !e.opts.allErrors; var v = "", g = "", b = e.schema.type, P = Array.isArray(b); if (P && 1 == b.length && (b = b[0], P = !1), e.schema.$ref && o) { if ("fail" == e.opts.extendRefs) throw Error('$ref: validation keywords used in schema at path "' + e.errSchemaPath + '" (see option extendRefs)'); !0 !== e.opts.extendRefs && (o = !1, e.logger.warn('$ref: keywords ignored in schema at path "' + e.errSchemaPath + '"')) } if (e.schema.$comment && e.opts.$comment && (a += " " + e.RULES.all.$comment.code(e, "$comment")), b) { if (e.opts.coerceTypes) var w = e.util.coerceToTypes(e.opts.coerceTypes, b); var E = e.RULES.types[b]; if (w || P || !0 === E || E && !J(E)) { c = e.schemaPath + ".type", p = e.errSchemaPath + "/type", c = e.schemaPath + ".type", p = e.errSchemaPath + "/type"; if (a += " if (" + e.util[P ? "checkDataTypes" : "checkDataType"](b, f, !0) + ") { ", w) { var _ = "dataType" + s, x = "coerced" + s; a += " var " + _ + " = typeof " + f + "; ", "array" == e.opts.coerceTypes && (a += " if (" + _ + " == 'object' && Array.isArray(" + f + ")) " + _ + " = 'array'; "), a += " var " + x + " = undefined; "; var k = "", S = w; if (S) for (var O, j = -1, F = S.length - 1; F > j;)O = S[j += 1], j && (a += " if (" + x + " === undefined) { ", k += "}"), "array" == e.opts.coerceTypes && "array" != O && (a += " if (" + _ + " == 'array' && " + f + ".length == 1) { " + x + " = " + f + " = " + f + "[0]; " + _ + " = typeof " + f + ";  } "), "string" == O ? a += " if (" + _ + " == 'number' || " + _ + " == 'boolean') " + x + " = '' + " + f + "; else if (" + f + " === null) " + x + " = ''; " : "number" == O || "integer" == O ? (a += " if (" + _ + " == 'boolean' || " + f + " === null || (" + _ + " == 'string' && " + f + " && " + f + " == +" + f + " ", "integer" == O && (a += " && !(" + f + " % 1)"), a += ")) " + x + " = +" + f + "; ") : "boolean" == O ? a += " if (" + f + " === 'false' || " + f + " === 0 || " + f + " === null) " + x + " = false; else if (" + f + " === 'true' || " + f + " === 1) " + x + " = true; " : "null" == O ? a += " if (" + f + " === '' || " + f + " === 0 || " + f + " === false) " + x + " = null; " : "array" == e.opts.coerceTypes && "array" == O && (a += " if (" + _ + " == 'string' || " + _ + " == 'number' || " + _ + " == 'boolean' || " + f + " == null) " + x + " = [" + f + "]; "); (K = K || []).push(a += " " + k + " if (" + x + " === undefined) {   "), a = "", !1 !== e.createErrors ? (a += " { keyword: 'type' , dataPath: (dataPath || '') + " + e.errorPath + " , schemaPath: " + e.util.toQuotedString(p) + " , params: { type: '", a += P ? "" + b.join(",") : "" + b, a += "' } ", !1 !== e.opts.messages && (a += " , message: 'should be ", a += P ? "" + b.join(",") : "" + b, a += "' "), e.opts.verbose && (a += " , schema: validate.schema" + c + " , parentSchema: validate.schema" + e.schemaPath + " , data: " + f + " "), a += " } ") : a += " {} "; m = a; a = K.pop(), a += !e.compositeRule && d ? e.async ? " throw new ValidationError([" + m + "]); " : " validate.errors = [" + m + "]; return false; " : " var err = " + m + ";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ", a += " } else {  "; var A = u ? "data" + (u - 1 || "") : "parentData"; a += " " + f + " = " + x + "; ", u || (a += "if (" + A + " !== undefined)"), a += " " + A + "[" + (u ? e.dataPathArr[u] : "parentDataProperty") + "] = " + x + "; } " } else { (K = K || []).push(a), a = "", !1 !== e.createErrors ? (a += " { keyword: 'type' , dataPath: (dataPath || '') + " + e.errorPath + " , schemaPath: " + e.util.toQuotedString(p) + " , params: { type: '", a += P ? "" + b.join(",") : "" + b, a += "' } ", !1 !== e.opts.messages && (a += " , message: 'should be ", a += P ? "" + b.join(",") : "" + b, a += "' "), e.opts.verbose && (a += " , schema: validate.schema" + c + " , parentSchema: validate.schema" + e.schemaPath + " , data: " + f + " "), a += " } ") : a += " {} "; m = a; a = K.pop(), a += !e.compositeRule && d ? e.async ? " throw new ValidationError([" + m + "]); " : " validate.errors = [" + m + "]; return false; " : " var err = " + m + ";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; " } a += " } " } } if (e.schema.$ref && !o) a += " " + e.RULES.all.$ref.code(e, "$ref") + " ", d && (a += " } if (errors === ", a += y ? "0" : "errs_" + s, a += ") { ", g += "}"); else { var D = e.RULES; if (D) for (var I = -1, $ = D.length - 1; $ > I;)if (J(E = D[I += 1])) { if (E.type && (a += " if (" + e.util.checkDataType(E.type, f) + ") { "), e.opts.useDefaults && !e.compositeRule) if ("object" == E.type && e.schema.properties) { var R = Object.keys(l = e.schema.properties); if (R) for (var T, C = -1, z = R.length - 1; z > C;) { if (void 0 !== (U = l[T = R[C += 1]]).default) a += "  if (" + (L = f + e.util.getProperty(T)) + " === undefined) " + L + " = ", a += "shared" == e.opts.useDefaults ? " " + e.useDefault(U.default) + " " : " " + JSON.stringify(U.default) + " ", a += "; " } } else if ("array" == E.type && Array.isArray(e.schema.items)) { var q = e.schema.items; if (q) { j = -1; for (var U, N = q.length - 1; N > j;) { var L; if (void 0 !== (U = q[j += 1]).default) a += "  if (" + (L = f + "[" + j + "]") + " === undefined) " + L + " = ", a += "shared" == e.opts.useDefaults ? " " + e.useDefault(U.default) + " " : " " + JSON.stringify(U.default) + " ", a += "; " } } } var V = E.rules; if (V) for (var M, Q = -1, B = V.length - 1; B > Q;)if (X(M = V[Q += 1])) { var H = M.code(e, M.keyword, E.type); H && (a += " " + H + " ", d && (v += "}")) } if (d && (a += " " + v + " ", v = ""), E.type && (a += " } ", b && b === E.type && !w)) { var K; c = e.schemaPath + ".type", p = e.errSchemaPath + "/type"; (K = K || []).push(a += " else { "), a = "", !1 !== e.createErrors ? (a += " { keyword: 'type' , dataPath: (dataPath || '') + " + e.errorPath + " , schemaPath: " + e.util.toQuotedString(p) + " , params: { type: '", a += P ? "" + b.join(",") : "" + b, a += "' } ", !1 !== e.opts.messages && (a += " , message: 'should be ", a += P ? "" + b.join(",") : "" + b, a += "' "), e.opts.verbose && (a += " , schema: validate.schema" + c + " , parentSchema: validate.schema" + e.schemaPath + " , data: " + f + " "), a += " } ") : a += " {} "; m = a; a = K.pop(), a += !e.compositeRule && d ? e.async ? " throw new ValidationError([" + m + "]); " : " validate.errors = [" + m + "]; return false; " : " var err = " + m + ";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ", a += " } " } d && (a += " if (errors === ", a += y ? "0" : "errs_" + s, a += ") { ", g += "}") } } function J(e) { for (var t = e.rules, r = 0; t.length > r; r++)if (X(t[r])) return !0 } function X(t) { return void 0 !== e.schema[t.keyword] || t.implements && function (t) { for (var r = t.implements, a = 0; r.length > a; a++)if (void 0 !== e.schema[r[a]]) return !0 }(t) } return d && (a += " " + g + " "), y ? (i ? (a += " if (errors === 0) return data;           ", a += " else throw new ValidationError(vErrors); ") : (a += " validate.errors = vErrors; ", a += " return errors === 0;       "), a += " }; return validate;") : a += " var " + h + " = errors === errs_" + s + ";", a = e.util.cleanUpCode(a), y && (a = e.util.finalCleanUpCode(a, i)), a }, Cr = Bt.ucs2length, zr = Dr.Validation, qr = function e(t, a, i, o) { var n = this, s = this._opts, u = [void 0], l = {}, c = [], p = {}, d = [], f = {}, h = []; a = a || { schema: t, refVal: u, refs: l }; var m = function (e, t, r) { var a = Ur.call(this, e, t, r); return 0 > a ? (this._compilations[a = this._compilations.length] = { schema: e, root: t, baseId: r }, { index: a, compiling: !1 }) : { index: a, compiling: !0 } }.call(this, t, a, o); var y = this._compilations[m.index]; if (m.compiling) return y.callValidate = function e() { var t = y.validate; var r = t.apply(this, arguments); e.errors = t.errors; return r }; var v = this._formats; var g = this.RULES; try { var b = w(t, a, i, o); y.validate = b; var P = y.callValidate; return P && (P.schema = b.schema, P.errors = null, P.refs = b.refs, P.refVal = b.refVal, P.root = b.root, P.$async = b.$async, s.sourceCode && (P.source = b.source)), b } finally { (function (e, t, r) { var a = Ur.call(this, e, t, r); 0 > a || this._compilations.splice(a, 1) }).call(this, t, a, o) } function w(t, r, i, o) { var p = !r || r && r.schema == t; if (r.schema != a.schema) return e.call(n, t, r, i, o); var f, m = !0 === t.$async, y = Tr({ isTop: !0, schema: t, isRoot: p, baseId: o, root: r, schemaPath: "", errSchemaPath: "#", errorPath: '""', MissingRefError: Dr.MissingRef, RULES: g, validate: Tr, util: Bt, resolve: br, resolveRef: E, usePattern: k, useDefault: S, useCustomRule: O, opts: s, formats: v, logger: n.logger, self: n }); y = Qr(u, Vr) + Qr(c, Nr) + Qr(d, Lr) + Qr(h, Mr) + y, s.processCode && (y = s.processCode(y)); try { var b = Function("self", "RULES", "formats", "root", "refVal", "defaults", "customRules", "equal", "ucs2length", "ValidationError", y); f = b(n, g, v, a, u, d, h, Qt, Cr, zr), u[0] = f } catch (e) { throw n.logger.error("Error compiling schema, function code:", y), e } return f.schema = t, f.errors = null, f.refs = l, f.refVal = u, f.root = p ? f : r, m && (f.$async = !0), !0 === s.sourceCode && (f.source = { code: y, patterns: c, defaults: d }), f } function E(t, r, o) { r = br.url(t, r); var c, p, d = l[r]; if (void 0 !== d) return x(c = u[d], p = "refVal[" + d + "]"); if (!o && a.refs) { var f = a.refs[r]; if (void 0 !== f) return p = _(r, c = a.refVal[f]), x(c, p) } p = _(r); var h = br.call(n, w, a, r); if (void 0 === h) { var m = i && i[r]; m && (h = br.inlineRef(m, s.inlineRefs) ? m : e.call(n, m, a, i, t)) } if (void 0 !== h) return function (e, t) { u[l[e]] = t }(r, h), x(h, p); !function (e) { delete l[e] }(r) } function _(e, t) { var r = u.length; return u[r] = t, l[e] = r, "refVal" + r } function x(e, t) { return "object" == r(e) || "boolean" == typeof e ? { code: t, schema: e, inline: !0 } : { code: t, $async: e && !!e.$async } } function k(e) { var t = p[e]; return void 0 === t && (t = p[e] = c.length, c[t] = e), "pattern" + t } function S(e) { switch (r(e)) { case "boolean": case "number": return "" + e; case "string": return Bt.toQuotedString(e); case "object": if (null === e) return "null"; var t = Rr(e), a = f[t]; return void 0 === a && (a = f[t] = d.length, d[a] = e), "default" + a } } function O(e, t, r, a) { var i = e.definition.validateSchema; if (i && !1 !== n._opts.validateSchema) { var o = i(t); if (!o) { var u = "keyword schema is invalid: " + n.errorsText(i.errors); if ("log" != n._opts.validateSchema) throw Error(u); n.logger.error(u) } } var l, c = e.definition.compile, p = e.definition.inline, d = e.definition.macro; if (c) l = c.call(n, t, r, a); else if (d) l = d.call(n, t, r, a), !1 !== s.validateSchema && n.validateSchema(l, !0); else if (p) l = p.call(n, a, e.keyword, t, r); else if (!(l = e.definition.validate)) return; if (void 0 === l) throw Error('custom keyword "' + e.keyword + '"failed to compile'); var f = h.length; return h[f] = l, { code: "customRule" + f, validate: l } } }; function Ur(e, t, r) { for (var a = 0; this._compilations.length > a; a++) { var i = this._compilations[a]; if (i.schema == e && i.root == t && i.baseId == r) return a } return -1 } function Nr(e, t) { return "var pattern" + e + " = new RegExp(" + Bt.toQuotedString(t[e]) + ");" } function Lr(e) { return "var default" + e + " = defaults[" + e + "];" } function Vr(e, t) { return void 0 === t[e] ? "" : "var refVal" + e + " = refVal[" + e + "];" } function Mr(e) { return "var customRule" + e + " = customRules[" + e + "];" } function Qr(e, t) { if (!e.length) return ""; for (var r = "", a = 0; e.length > a; a++)r += t(a, e); return r } var Br = ut(function (e) { var t = e.exports = function () { this._cache = {} }; t.prototype.put = function (e, t) { this._cache[e] = t }, t.prototype.get = function (e) { return this._cache[e] }, t.prototype.del = function (e) { delete this._cache[e] }, t.prototype.clear = function () { this._cache = {} } }), Hr = /^(\d\d\d\d)-(\d\d)-(\d\d)$/, Kr = [0, 31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31], Jr = /^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d:\d\d)?$/i, Xr = /^[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*$/i, Zr = /^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i, Gr = /^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i, Yr = /^(?:(?:http[s\u017F]?|ftp):\/\/)(?:(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+(?::(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?@)?(?:(?!10(?:\.[0-9]{1,3}){3})(?!127(?:\.[0-9]{1,3}){3})(?!169\.254(?:\.[0-9]{1,3}){2})(?!192\.168(?:\.[0-9]{1,3}){2})(?!172\.(?:1[6-9]|2[0-9]|3[01])(?:\.[0-9]{1,3}){2})(?:[1-9][0-9]?|1[0-9][0-9]|2[01][0-9]|22[0-3])(?:\.(?:1?[0-9]{1,2}|2[0-4][0-9]|25[0-5])){2}(?:\.(?:[1-9][0-9]?|1[0-9][0-9]|2[0-4][0-9]|25[0-4]))|(?:(?:(?:[0-9KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-?)*(?:[0-9KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)(?:\.(?:(?:[0-9KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-?)*(?:[0-9KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)*(?:\.(?:(?:[KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]){2,})))(?::[0-9]{2,5})?(?:\/(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?$/i, Wr = /^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i, ea = /^(?:\/(?:[^~/]|~0|~1)*)*$/, ta = /^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i, ra = /^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/, aa = ia; function ia(e) { return Bt.copy(ia[e = "full" == e ? "full" : "fast"]) } function oa(e) { var t = e.match(Hr); if (!t) return !1; var r = +t[2], a = +t[3]; return !(1 > r || r > 12 || 1 > a || a > (2 == r && function (e) { return e % 4 == 0 && (e % 100 != 0 || e % 400 == 0) }(+t[1]) ? 29 : Kr[r])) } function na(e, t) { var r = e.match(Jr); if (!r) return !1; var a = r[1], i = r[2], o = r[3]; return (23 >= a && 59 >= i && 59 >= o || 23 == a && 59 == i && 60 == o) && (!t || r[5]) } ia.fast = { date: /^\d\d\d\d-[0-1]\d-[0-3]\d$/, time: /^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d:\d\d)?$/i, "date-time": /^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d:\d\d)$/i, uri: /^(?:[a-z][a-z0-9+-.]*:)(?:\/?\/)?[^\s]*$/i, "uri-reference": /^(?:(?:[a-z][a-z0-9+-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i, "uri-template": Gr, url: Yr, email: /^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i, hostname: Xr, ipv4: /^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/, ipv6: /^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i, regex: ca, uuid: Wr, "json-pointer": ea, "json-pointer-uri-fragment": ta, "relative-json-pointer": ra }, ia.full = { date: oa, time: na, "date-time": function (e) { var t = e.split(sa); return 2 == t.length && oa(t[0]) && na(t[1], !0) }, uri: function (e) { return ua.test(e) && Zr.test(e) }, "uri-reference": /^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i, "uri-template": Gr, url: Yr, email: /^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i, hostname: function (e) { return 255 >= e.length && Xr.test(e) }, ipv4: /^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/, ipv6: /^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i, regex: ca, uuid: Wr, "json-pointer": ea, "json-pointer-uri-fragment": ta, "relative-json-pointer": ra }; var sa = /t|\s/i; var ua = /\/|:/; var la = /[^\\]\\Z/; function ca(e) { if (la.test(e)) return !1; try { return !0 } catch (e) { return !1 } } var pa = function (e, t, r) { var a, i = " ", o = e.level, n = e.dataLevel, s = e.schema[t], u = e.schemaPath + e.util.getProperty(t), l = e.errSchemaPath + "/" + t, c = !e.opts.allErrors, p = "data" + (n || ""), d = e.opts.$data && s && s.$data; d ? (i += " var schema" + o + " = " + e.util.getData(s.$data, n, e.dataPathArr) + "; ", a = "schema" + o) : a = s; var f = "maximum" == t, h = f ? "exclusiveMaximum" : "exclusiveMinimum", m = e.schema[h], y = e.opts.$data && m && m.$data, v = f ? "<" : ">", g = f ? ">" : "<", b = void 0; if (y) { var P = e.util.getData(m.$data, n, e.dataPathArr), w = "exclusive" + o, E = "exclType" + o, _ = "exclIsNumber" + o, x = "' + " + (O = "op" + o) + " + '"; i += " var schemaExcl" + o + " = " + P + "; "; var k; b = h; (k = k || []).push(i += " var " + w + "; var " + E + " = typeof " + (P = "schemaExcl" + o) + "; if (" + E + " != 'boolean' && " + E + " != 'undefined' && " + E + " != 'number') { "), i = "", !1 !== e.createErrors ? (i += " { keyword: '" + (b || "_exclusiveLimit") + "' , dataPath: (dataPath || '') + " + e.errorPath + " , schemaPath: " + e.util.toQuotedString(l) + " , params: {} ", !1 !== e.opts.messages && (i += " , message: '" + h + " should be boolean' "), e.opts.verbose && (i += " , schema: validate.schema" + u + " , parentSchema: validate.schema" + e.schemaPath + " , data: " + p + " "), i += " } ") : i += " {} "; var S = i; i = k.pop(), i += !e.compositeRule && c ? e.async ? " throw new ValidationError([" + S + "]); " : " validate.errors = [" + S + "]; return false; " : " var err = " + S + ";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ", i += " } else if ( ", d && (i += " (" + a + " !== undefined && typeof " + a + " != 'number') || "), i += " " + E + " == 'number' ? ( (" + w + " = " + a + " === undefined || " + P + " " + v + "= " + a + ") ? " + p + " " + g + "= " + P + " : " + p + " " + g + " " + a + " ) : ( (" + w + " = " + P + " === true) ? " + p + " " + g + "= " + a + " : " + p + " " + g + " " + a + " ) || " + p + " !== " + p + ") { var op" + o + " = " + w + " ? '" + v + "' : '" + v + "='; ", void 0 === s && (b = h, l = e.errSchemaPath + "/" + h, a = P, d = y) } else { x = v; if ((_ = "number" == typeof m) && d) { var O = "'" + x + "'"; i += " if ( ", d && (i += " (" + a + " !== undefined && typeof " + a + " != 'number') || "), i += " ( " + a + " === undefined || " + m + " " + v + "= " + a + " ? " + p + " " + g + "= " + m + " : " + p + " " + g + " " + a + " ) || " + p + " !== " + p + ") { " } else { _ && void 0 === s ? (w = !0, b = h, l = e.errSchemaPath + "/" + h, a = m, g += "=") : (_ && (a = Math[f ? "min" : "max"](m, s)), m === (!_ || a) ? (w = !0, b = h, l = e.errSchemaPath + "/" + h, g += "=") : (w = !1, x += "=")); O = "'" + x + "'"; i += " if ( ", d && (i += " (" + a + " !== undefined && typeof " + a + " != 'number') || "), i += " " + p + " " + g + " " + a + " || " + p + " !== " + p + ") { " } } b = b || t, (k = k || []).push(i), i = "", !1 !== e.createErrors ? (i += " { keyword: '" + (b || "_limit") + "' , dataPath: (dataPath || '') + " + e.errorPath + " , schemaPath: " + e.util.toQuotedString(l) + " , params: { comparison: " + O + ", limit: " + a + ", exclusive: " + w + " } ", !1 !== e.opts.messages && (i += " , message: 'should be " + x + " ", i += d ? "' + " + a : a + "'"), e.opts.verbose && (i += " , schema:  ", i += d ? "validate.schema" + u : "" + s, i += "         , parentSchema: validate.schema" + e.schemaPath + " , data: " + p + " "), i += " } ") : i += " {} "; S = i; return i = k.pop(), i += !e.compositeRule && c ? e.async ? " throw new ValidationError([" + S + "]); " : " validate.errors = [" + S + "]; return false; " : " var err = " + S + ";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ", i += " } ", c && (i += " else { "), i }, da = function (e, t, r) { var a, i = " ", o = e.level, n = e.dataLevel, s = e.schema[t], u = e.schemaPath + e.util.getProperty(t), l = e.errSchemaPath + "/" + t, c = !e.opts.allErrors, p = "data" + (n || ""), d = e.opts.$data && s && s.$data; d ? (i += " var schema" + o + " = " + e.util.getData(s.$data, n, e.dataPathArr) + "; ", a = "schema" + o) : a = s, i += "if ( ", d && (i += " (" + a + " !== undefined && typeof " + a + " != 'number') || "); var f = t, h = h || []; h.push(i += " " + p + ".length " + ("maxItems" == t ? ">" : "<") + " " + a + ") { "), i = "", !1 !== e.createErrors ? (i += " { keyword: '" + (f || "_limitItems") + "' , dataPath: (dataPath || '') + " + e.errorPath + " , schemaPath: " + e.util.toQuotedString(l) + " , params: { limit: " + a + " } ", !1 !== e.opts.messages && (i += " , message: 'should NOT have ", i += "maxItems" == t ? "more" : "fewer", i += " than ", i += d ? "' + " + a + " + '" : "" + s, i += " items' "), e.opts.verbose && (i += " , schema:  ", i += d ? "validate.schema" + u : "" + s, i += "         , parentSchema: validate.schema" + e.schemaPath + " , data: " + p + " "), i += " } ") : i += " {} "; var m = i; return i = h.pop(), i += !e.compositeRule && c ? e.async ? " throw new ValidationError([" + m + "]); " : " validate.errors = [" + m + "]; return false; " : " var err = " + m + ";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ", i += "} ", c && (i += " else { "), i }, fa = function (e, t, r) { var a, i = " ", o = e.level, n = e.dataLevel, s = e.schema[t], u = e.schemaPath + e.util.getProperty(t), l = e.errSchemaPath + "/" + t, c = !e.opts.allErrors, p = "data" + (n || ""), d = e.opts.$data && s && s.$data; d ? (i += " var schema" + o + " = " + e.util.getData(s.$data, n, e.dataPathArr) + "; ", a = "schema" + o) : a = s, i += "if ( ", d && (i += " (" + a + " !== undefined && typeof " + a + " != 'number') || "), i += !1 === e.opts.unicode ? " " + p + ".length " : " ucs2length(" + p + ") "; var f = t, h = h || []; h.push(i += " " + ("maxLength" == t ? ">" : "<") + " " + a + ") { "), i = "", !1 !== e.createErrors ? (i += " { keyword: '" + (f || "_limitLength") + "' , dataPath: (dataPath || '') + " + e.errorPath + " , schemaPath: " + e.util.toQuotedString(l) + " , params: { limit: " + a + " } ", !1 !== e.opts.messages && (i += " , message: 'should NOT be ", i += "maxLength" == t ? "longer" : "shorter", i += " than ", i += d ? "' + " + a + " + '" : "" + s, i += " characters' "), e.opts.verbose && (i += " , schema:  ", i += d ? "validate.schema" + u : "" + s, i += "         , parentSchema: validate.schema" + e.schemaPath + " , data: " + p + " "), i += " } ") : i += " {} "; var m = i; return i = h.pop(), i += !e.compositeRule && c ? e.async ? " throw new ValidationError([" + m + "]); " : " validate.errors = [" + m + "]; return false; " : " var err = " + m + ";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ", i += "} ", c && (i += " else { "), i }, ha = function (e, t, r) { var a, i = " ", o = e.level, n = e.dataLevel, s = e.schema[t], u = e.schemaPath + e.util.getProperty(t), l = e.errSchemaPath + "/" + t, c = !e.opts.allErrors, p = "data" + (n || ""), d = e.opts.$data && s && s.$data; d ? (i += " var schema" + o + " = " + e.util.getData(s.$data, n, e.dataPathArr) + "; ", a = "schema" + o) : a = s, i += "if ( ", d && (i += " (" + a + " !== undefined && typeof " + a + " != 'number') || "); var f = t, h = h || []; h.push(i += " Object.keys(" + p + ").length " + ("maxProperties" == t ? ">" : "<") + " " + a + ") { "), i = "", !1 !== e.createErrors ? (i += " { keyword: '" + (f || "_limitProperties") + "' , dataPath: (dataPath || '') + " + e.errorPath + " , schemaPath: " + e.util.toQuotedString(l) + " , params: { limit: " + a + " } ", !1 !== e.opts.messages && (i += " , message: 'should NOT have ", i += "maxProperties" == t ? "more" : "fewer", i += " than ", i += d ? "' + " + a + " + '" : "" + s, i += " properties' "), e.opts.verbose && (i += " , schema:  ", i += d ? "validate.schema" + u : "" + s, i += "         , parentSchema: validate.schema" + e.schemaPath + " , data: " + p + " "), i += " } ") : i += " {} "; var m = i; return i = h.pop(), i += !e.compositeRule && c ? e.async ? " throw new ValidationError([" + m + "]); " : " validate.errors = [" + m + "]; return false; " : " var err = " + m + ";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ", i += "} ", c && (i += " else { "), i }, ma = { $ref: function (e, t, r) { var a, i, o = " ", n = e.dataLevel, s = e.schema[t], u = e.errSchemaPath + "/" + t, l = !e.opts.allErrors, c = "data" + (n || ""), p = "valid" + e.level; if ("#" == s || "#/" == s) e.isRoot ? (a = e.async, i = "validate") : (a = !0 === e.root.schema.$async, i = "root.refVal[0]"); else { var d = e.resolveRef(e.baseId, s, e.isRoot); if (void 0 === d) { var f = e.MissingRefError.message(e.baseId, s); if ("fail" == e.opts.missingRefs) { e.logger.error(f), (v = v || []).push(o), o = "", !1 !== e.createErrors ? (o += " { keyword: '$ref' , dataPath: (dataPath || '') + " + e.errorPath + " , schemaPath: " + e.util.toQuotedString(u) + " , params: { ref: '" + e.util.escapeQuotes(s) + "' } ", !1 !== e.opts.messages && (o += " , message: 'can\\'t resolve reference " + e.util.escapeQuotes(s) + "' "), e.opts.verbose && (o += " , schema: " + e.util.toQuotedString(s) + " , parentSchema: validate.schema" + e.schemaPath + " , data: " + c + " "), o += " } ") : o += " {} "; var h = o; o = v.pop(), o += !e.compositeRule && l ? e.async ? " throw new ValidationError([" + h + "]); " : " validate.errors = [" + h + "]; return false; " : " var err = " + h + ";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ", l && (o += " if (false) { ") } else { if ("ignore" != e.opts.missingRefs) throw new e.MissingRefError(e.baseId, s, f); e.logger.warn(f), l && (o += " if (true) { ") } } else if (d.inline) { var m = e.util.copy(e); m.level++; var y = "valid" + m.level; m.schema = d.schema, m.schemaPath = "", m.errSchemaPath = s, o += " " + e.validate(m).replace(/validate\.schema/g, d.code) + " ", l && (o += " if (" + y + ") { ") } else a = !0 === d.$async || e.async && !1 !== d.$async, i = d.code } if (i) { var v; (v = v || []).push(o), o = "", o += e.opts.passContext ? " " + i + ".call(this, " : " " + i + "( ", o += " " + c + ", (dataPath || '')", '""' != e.errorPath && (o += " + " + e.errorPath); var g = o += " , " + (n ? "data" + (n - 1 || "") : "parentData") + " , " + (n ? e.dataPathArr[n] : "parentDataProperty") + ", rootData)  "; if (o = v.pop(), a) { if (!e.async) throw Error("async schema referenced by sync schema"); l && (o += " var " + p + "; "), o += " try { await " + g + "; ", l && (o += " " + p + " = true; "), o += " } catch (e) { if (!(e instanceof ValidationError)) throw e; if (vErrors === null) vErrors = e.errors; else vErrors = vErrors.concat(e.errors); errors = vErrors.length; ", l && (o += " " + p + " = false; "), o += " } ", l && (o += " if (" + p + ") { ") } else o += " if (!" + g + ") { if (vErrors === null) vErrors = " + i + ".errors; else vErrors = vErrors.concat(" + i + ".errors); errors = vErrors.length; } ", l && (o += " else { ") } return o }, allOf: function (e, t, r) { var a = " ", i = e.schema[t], o = e.schemaPath + e.util.getProperty(t), n = e.errSchemaPath + "/" + t, s = !e.opts.allErrors, u = e.util.copy(e), l = ""; u.level++; var c = "valid" + u.level, p = u.baseId, d = !0, f = i; if (f) for (var h, m = -1, y = f.length - 1; y > m;)h = f[m += 1], e.util.schemaHasRules(h, e.RULES.all) && (d = !1, u.schema = h, u.schemaPath = o + "[" + m + "]", u.errSchemaPath = n + "/" + m, a += "  " + e.validate(u) + " ", u.baseId = p, s && (a += " if (" + c + ") { ", l += "}")); return s && (a += d ? " if (true) { " : " " + l.slice(0, -1) + " "), a = e.util.cleanUpCode(a) }, anyOf: function (e, t, r) { var a = " ", i = e.level, o = e.dataLevel, n = e.schema[t], s = e.schemaPath + e.util.getProperty(t), u = e.errSchemaPath + "/" + t, l = !e.opts.allErrors, c = "data" + (o || ""), p = "valid" + i, d = "errs__" + i, f = e.util.copy(e), h = ""; f.level++; var m = "valid" + f.level; if (n.every(function (t) { return e.util.schemaHasRules(t, e.RULES.all) })) { var y = f.baseId; a += " var " + d + " = errors; var " + p + " = false;  "; var v = e.compositeRule; e.compositeRule = f.compositeRule = !0; var g = n; if (g) for (var b, P = -1, w = g.length - 1; w > P;)b = g[P += 1], f.schema = b, f.schemaPath = s + "[" + P + "]", f.errSchemaPath = u + "/" + P, a += "  " + e.validate(f) + " ", f.baseId = y, a += " " + p + " = " + p + " || " + m + "; if (!" + p + ") { ", h += "}"; e.compositeRule = f.compositeRule = v, a += " " + h + " if (!" + p + ") {   var err =   ", !1 !== e.createErrors ? (a += " { keyword: 'anyOf' , dataPath: (dataPath || '') + " + e.errorPath + " , schemaPath: " + e.util.toQuotedString(u) + " , params: {} ", !1 !== e.opts.messages && (a += " , message: 'should match some schema in anyOf' "), e.opts.verbose && (a += " , schema: validate.schema" + s + " , parentSchema: validate.schema" + e.schemaPath + " , data: " + c + " "), a += " } ") : a += " {} ", a += ";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ", !e.compositeRule && l && (a += e.async ? " throw new ValidationError(vErrors); " : " validate.errors = vErrors; return false; "), a += " } else {  errors = " + d + "; if (vErrors !== null) { if (" + d + ") vErrors.length = " + d + "; else vErrors = null; } ", e.opts.allErrors && (a += " } "), a = e.util.cleanUpCode(a) } else l && (a += " if (true) { "); return a }, $comment: function (e, t, r) { var a = " ", i = e.errSchemaPath + "/" + t, o = e.util.toQuotedString(e.schema[t]); return !0 === e.opts.$comment ? a += " console.log(" + o + ");" : "function" == typeof e.opts.$comment && (a += " self._opts.$comment(" + o + ", " + e.util.toQuotedString(i) + ", validate.root.schema);"), a }, const: function (e, t, r) { var a = " ", i = e.level, o = e.dataLevel, n = e.schema[t], s = e.schemaPath + e.util.getProperty(t), u = e.errSchemaPath + "/" + t, l = !e.opts.allErrors, c = "data" + (o || ""), p = "valid" + i, d = e.opts.$data && n && n.$data; d && (a += " var schema" + i + " = " + e.util.getData(n.$data, o, e.dataPathArr) + "; "), d || (a += " var schema" + i + " = validate.schema" + s + ";"); var f = f || []; f.push(a += "var " + p + " = equal(" + c + ", schema" + i + "); if (!" + p + ") {   "), a = "", !1 !== e.createErrors ? (a += " { keyword: 'const' , dataPath: (dataPath || '') + " + e.errorPath + " , schemaPath: " + e.util.toQuotedString(u) + " , params: { allowedValue: schema" + i + " } ", !1 !== e.opts.messages && (a += " , message: 'should be equal to constant' "), e.opts.verbose && (a += " , schema: validate.schema" + s + " , parentSchema: validate.schema" + e.schemaPath + " , data: " + c + " "), a += " } ") : a += " {} "; var h = a; return a = f.pop(), a += !e.compositeRule && l ? e.async ? " throw new ValidationError([" + h + "]); " : " validate.errors = [" + h + "]; return false; " : " var err = " + h + ";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ", a += " }", l && (a += " else { "), a }, contains: function (e, t, r) { var a = " ", i = e.level, o = e.dataLevel, n = e.schema[t], s = e.schemaPath + e.util.getProperty(t), u = e.errSchemaPath + "/" + t, l = !e.opts.allErrors, c = "data" + (o || ""), p = "valid" + i, d = "errs__" + i, f = e.util.copy(e); f.level++; var h = "valid" + f.level, m = "i" + i, y = f.dataLevel = e.dataLevel + 1, v = "data" + y, g = e.baseId, b = e.util.schemaHasRules(n, e.RULES.all); if (a += "var " + d + " = errors;var " + p + ";", b) { var P = e.compositeRule; e.compositeRule = f.compositeRule = !0, f.schema = n, f.schemaPath = s, f.errSchemaPath = u, a += " var " + h + " = false; for (var " + m + " = 0; " + m + " < " + c + ".length; " + m + "++) { ", f.errorPath = e.util.getPathExpr(e.errorPath, m, e.opts.jsonPointers, !0); var w = c + "[" + m + "]"; f.dataPathArr[y] = m; var E = e.validate(f); f.baseId = g, 2 > e.util.varOccurences(E, v) ? a += " " + e.util.varReplace(E, v, w) + " " : a += " var " + v + " = " + w + "; " + E + " ", a += " if (" + h + ") break; }  ", e.compositeRule = f.compositeRule = P, a += "  if (!" + h + ") {" } else a += " if (" + c + ".length == 0) {"; var _ = _ || []; _.push(a), a = "", !1 !== e.createErrors ? (a += " { keyword: 'contains' , dataPath: (dataPath || '') + " + e.errorPath + " , schemaPath: " + e.util.toQuotedString(u) + " , params: {} ", !1 !== e.opts.messages && (a += " , message: 'should contain a valid item' "), e.opts.verbose && (a += " , schema: validate.schema" + s + " , parentSchema: validate.schema" + e.schemaPath + " , data: " + c + " "), a += " } ") : a += " {} "; var x = a; return a = _.pop(), a += !e.compositeRule && l ? e.async ? " throw new ValidationError([" + x + "]); " : " validate.errors = [" + x + "]; return false; " : " var err = " + x + ";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ", a += " } else { ", b && (a += "  errors = " + d + "; if (vErrors !== null) { if (" + d + ") vErrors.length = " + d + "; else vErrors = null; } "), e.opts.allErrors && (a += " } "), a = e.util.cleanUpCode(a) }, dependencies: function (e, t, r) { var a = " ", i = e.level, o = e.dataLevel, n = e.schema[t], s = e.schemaPath + e.util.getProperty(t), u = e.errSchemaPath + "/" + t, l = !e.opts.allErrors, c = "data" + (o || ""), p = "errs__" + i, d = e.util.copy(e), f = ""; d.level++; var h = "valid" + d.level, m = {}, y = {}, v = e.opts.ownProperties; for (P in n) { var g = Array.isArray(T = n[P]) ? y : m; g[P] = T } a += "var " + p + " = errors;"; var b = e.errorPath; for (var P in a += "var missing" + i + ";", y) if ((g = y[P]).length) { if (a += " if ( " + c + e.util.getProperty(P) + " !== undefined ", v && (a += " && Object.prototype.hasOwnProperty.call(" + c + ", '" + e.util.escapeQuotes(P) + "') "), l) { a += " && ( "; var w = g; if (w) for (var E = -1, _ = w.length - 1; _ > E;)F = w[E += 1], E && (a += " || "), a += " ( ( " + ($ = c + (I = e.util.getProperty(F))) + " === undefined ", v && (a += " || ! Object.prototype.hasOwnProperty.call(" + c + ", '" + e.util.escapeQuotes(F) + "') "), a += ") && (missing" + i + " = " + e.util.toQuotedString(e.opts.jsonPointers ? F : I) + ") ) "; a += ")) {  "; var x = "missing" + i, k = "' + " + x + " + '"; e.opts._errorDataPathProperty && (e.errorPath = e.opts.jsonPointers ? e.util.getPathExpr(b, x, !0) : b + " + " + x); var S = S || []; S.push(a), a = "", !1 !== e.createErrors ? (a += " { keyword: 'dependencies' , dataPath: (dataPath || '') + " + e.errorPath + " , schemaPath: " + e.util.toQuotedString(u) + " , params: { property: '" + e.util.escapeQuotes(P) + "', missingProperty: '" + k + "', depsCount: " + g.length + ", deps: '" + e.util.escapeQuotes(1 == g.length ? g[0] : g.join(", ")) + "' } ", !1 !== e.opts.messages && (a += " , message: 'should have ", a += 1 == g.length ? "property " + e.util.escapeQuotes(g[0]) : "properties " + e.util.escapeQuotes(g.join(", ")), a += " when property " + e.util.escapeQuotes(P) + " is present' "), e.opts.verbose && (a += " , schema: validate.schema" + s + " , parentSchema: validate.schema" + e.schemaPath + " , data: " + c + " "), a += " } ") : a += " {} "; var O = a; a = S.pop(), a += !e.compositeRule && l ? e.async ? " throw new ValidationError([" + O + "]); " : " validate.errors = [" + O + "]; return false; " : " var err = " + O + ";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; " } else { a += " ) { "; var j = g; if (j) for (var F, A = -1, D = j.length - 1; D > A;) { F = j[A += 1]; var I = e.util.getProperty(F), $ = (k = e.util.escapeQuotes(F), c + I); e.opts._errorDataPathProperty && (e.errorPath = e.util.getPath(b, F, e.opts.jsonPointers)), a += " if ( " + $ + " === undefined ", v && (a += " || ! Object.prototype.hasOwnProperty.call(" + c + ", '" + e.util.escapeQuotes(F) + "') "), a += ") {  var err =   ", !1 !== e.createErrors ? (a += " { keyword: 'dependencies' , dataPath: (dataPath || '') + " + e.errorPath + " , schemaPath: " + e.util.toQuotedString(u) + " , params: { property: '" + e.util.escapeQuotes(P) + "', missingProperty: '" + k + "', depsCount: " + g.length + ", deps: '" + e.util.escapeQuotes(1 == g.length ? g[0] : g.join(", ")) + "' } ", !1 !== e.opts.messages && (a += " , message: 'should have ", a += 1 == g.length ? "property " + e.util.escapeQuotes(g[0]) : "properties " + e.util.escapeQuotes(g.join(", ")), a += " when property " + e.util.escapeQuotes(P) + " is present' "), e.opts.verbose && (a += " , schema: validate.schema" + s + " , parentSchema: validate.schema" + e.schemaPath + " , data: " + c + " "), a += " } ") : a += " {} ", a += ";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } " } } a += " }   ", l && (f += "}", a += " else { ") } e.errorPath = b; var R = d.baseId; for (var P in m) { var T; e.util.schemaHasRules(T = m[P], e.RULES.all) && (a += " " + h + " = true; if ( " + c + e.util.getProperty(P) + " !== undefined ", v && (a += " && Object.prototype.hasOwnProperty.call(" + c + ", '" + e.util.escapeQuotes(P) + "') "), a += ") { ", d.schema = T, d.schemaPath = s + e.util.getProperty(P), d.errSchemaPath = u + "/" + e.util.escapeFragment(P), a += "  " + e.validate(d) + " ", d.baseId = R, a += " }  ", l && (a += " if (" + h + ") { ", f += "}")) } return l && (a += "   " + f + " if (" + p + " == errors) {"), a = e.util.cleanUpCode(a) }, enum: function (e, t, r) { var a = " ", i = e.level, o = e.dataLevel, n = e.schema[t], s = e.schemaPath + e.util.getProperty(t), u = e.errSchemaPath + "/" + t, l = !e.opts.allErrors, c = "data" + (o || ""), p = "valid" + i, d = e.opts.$data && n && n.$data; d && (a += " var schema" + i + " = " + e.util.getData(n.$data, o, e.dataPathArr) + "; "); var f = "i" + i, h = "schema" + i; d || (a += " var " + h + " = validate.schema" + s + ";"), a += "var " + p + ";", d && (a += " if (schema" + i + " === undefined) " + p + " = true; else if (!Array.isArray(schema" + i + ")) " + p + " = false; else {"), a += p + " = false;for (var " + f + "=0; " + f + "<" + h + ".length; " + f + "++) if (equal(" + c + ", " + h + "[" + f + "])) { " + p + " = true; break; }", d && (a += "  }  "); var m = m || []; m.push(a += " if (!" + p + ") {   "), a = "", !1 !== e.createErrors ? (a += " { keyword: 'enum' , dataPath: (dataPath || '') + " + e.errorPath + " , schemaPath: " + e.util.toQuotedString(u) + " , params: { allowedValues: schema" + i + " } ", !1 !== e.opts.messages && (a += " , message: 'should be equal to one of the allowed values' "), e.opts.verbose && (a += " , schema: validate.schema" + s + " , parentSchema: validate.schema" + e.schemaPath + " , data: " + c + " "), a += " } ") : a += " {} "; var y = a; return a = m.pop(), a += !e.compositeRule && l ? e.async ? " throw new ValidationError([" + y + "]); " : " validate.errors = [" + y + "]; return false; " : " var err = " + y + ";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ", a += " }", l && (a += " else { "), a }, format: function (e, t, a) { var i = " ", o = e.level, n = e.dataLevel, s = e.schema[t], u = e.schemaPath + e.util.getProperty(t), l = e.errSchemaPath + "/" + t, c = !e.opts.allErrors, p = "data" + (n || ""); if (!1 === e.opts.format) return c && (i += " if (true) { "), i; var d, f = e.opts.$data && s && s.$data; f ? (i += " var schema" + o + " = " + e.util.getData(s.$data, n, e.dataPathArr) + "; ", d = "schema" + o) : d = s; var h = e.opts.unknownFormats, m = Array.isArray(h); if (f) i += " var " + (y = "format" + o) + " = formats[" + d + "]; var " + (v = "isObject" + o) + " = typeof " + y + " == 'object' && !(" + y + " instanceof RegExp) && " + y + ".validate; var " + (g = "formatType" + o) + " = " + v + " && " + y + ".type || 'string'; if (" + v + ") { ", e.async && (i += " var async" + o + " = " + y + ".async; "), i += " " + y + " = " + y + ".validate; } if (  ", f && (i += " (" + d + " !== undefined && typeof " + d + " != 'string') || "), i += " (", "ignore" != h && (i += " (" + d + " && !" + y + " ", m && (i += " && self._opts.unknownFormats.indexOf(" + d + ") == -1 "), i += ") || "), i += " (" + y + " && " + g + " == '" + a + "' && !(typeof " + y + " == 'function' ? ", i += e.async ? " (async" + o + " ? await " + y + "(" + p + ") : " + y + "(" + p + ")) " : " " + y + "(" + p + ") ", i += " : " + y + ".test(" + p + "))))) {"; else { var y; if (!(y = e.formats[s])) { if ("ignore" == h) return e.logger.warn('unknown format "' + s + '" ignored in schema at path "' + e.errSchemaPath + '"'), c && (i += " if (true) { "), i; if (m && h.indexOf(s) >= 0) return c && (i += " if (true) { "), i; throw Error('unknown format "' + s + '" is used in schema at path "' + e.errSchemaPath + '"') } var v, g = (v = "object" == r(y) && !(y instanceof RegExp) && y.validate) && y.type || "string"; if (v) { var b = !0 === y.async; y = y.validate } if (g != a) return c && (i += " if (true) { "), i; if (b) { if (!e.async) throw Error("async format in sync schema"); i += " if (!(await " + (P = "formats" + e.util.getProperty(s) + ".validate") + "(" + p + "))) { " } else { i += " if (! "; var P = "formats" + e.util.getProperty(s); v && (P += ".validate"), i += "function" == typeof y ? " " + P + "(" + p + ") " : " " + P + ".test(" + p + ") ", i += ") { " } } var w = w || []; w.push(i), i = "", !1 !== e.createErrors ? (i += " { keyword: 'format' , dataPath: (dataPath || '') + " + e.errorPath + " , schemaPath: " + e.util.toQuotedString(l) + " , params: { format:  ", i += f ? "" + d : "" + e.util.toQuotedString(s), i += "  } ", !1 !== e.opts.messages && (i += " , message: 'should match format \"", i += f ? "' + " + d + " + '" : "" + e.util.escapeQuotes(s), i += "\"' "), e.opts.verbose && (i += " , schema:  ", i += f ? "validate.schema" + u : "" + e.util.toQuotedString(s), i += "         , parentSchema: validate.schema" + e.schemaPath + " , data: " + p + " "), i += " } ") : i += " {} "; var E = i; return i = w.pop(), i += !e.compositeRule && c ? e.async ? " throw new ValidationError([" + E + "]); " : " validate.errors = [" + E + "]; return false; " : " var err = " + E + ";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ", i += " } ", c && (i += " else { "), i }, if: function (e, t, r) { var a = " ", i = e.level, o = e.dataLevel, n = e.schema[t], s = e.schemaPath + e.util.getProperty(t), u = e.errSchemaPath + "/" + t, l = !e.opts.allErrors, c = "data" + (o || ""), p = "valid" + i, d = "errs__" + i, f = e.util.copy(e); f.level++; var h = "valid" + f.level, m = e.schema.then, y = e.schema.else, v = void 0 !== m && e.util.schemaHasRules(m, e.RULES.all), g = void 0 !== y && e.util.schemaHasRules(y, e.RULES.all), b = f.baseId; if (v || g) { var P; f.createErrors = !1, f.schema = n, f.schemaPath = s, f.errSchemaPath = u, a += " var " + d + " = errors; var " + p + " = true;  "; var w = e.compositeRule; e.compositeRule = f.compositeRule = !0, a += "  " + e.validate(f) + " ", f.baseId = b, f.createErrors = !0, a += "  errors = " + d + "; if (vErrors !== null) { if (" + d + ") vErrors.length = " + d + "; else vErrors = null; }  ", e.compositeRule = f.compositeRule = w, v ? (a += " if (" + h + ") {  ", f.schema = e.schema.then, f.schemaPath = e.schemaPath + ".then", f.errSchemaPath = e.errSchemaPath + "/then", a += "  " + e.validate(f) + " ", f.baseId = b, a += " " + p + " = " + h + "; ", v && g ? a += " var " + (P = "ifClause" + i) + " = 'then'; " : P = "'then'", a += " } ", g && (a += " else { ")) : a += " if (!" + h + ") { ", g && (f.schema = e.schema.else, f.schemaPath = e.schemaPath + ".else", f.errSchemaPath = e.errSchemaPath + "/else", a += "  " + e.validate(f) + " ", f.baseId = b, a += " " + p + " = " + h + "; ", v && g ? a += " var " + (P = "ifClause" + i) + " = 'else'; " : P = "'else'", a += " } "), a += " if (!" + p + ") {   var err =   ", !1 !== e.createErrors ? (a += " { keyword: 'if' , dataPath: (dataPath || '') + " + e.errorPath + " , schemaPath: " + e.util.toQuotedString(u) + " , params: { failingKeyword: " + P + " } ", !1 !== e.opts.messages && (a += " , message: 'should match \"' + " + P + " + '\" schema' "), e.opts.verbose && (a += " , schema: validate.schema" + s + " , parentSchema: validate.schema" + e.schemaPath + " , data: " + c + " "), a += " } ") : a += " {} ", a += ";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ", !e.compositeRule && l && (a += e.async ? " throw new ValidationError(vErrors); " : " validate.errors = vErrors; return false; "), a += " }   ", l && (a += " else { "), a = e.util.cleanUpCode(a) } else l && (a += " if (true) { "); return a }, items: function (e, t, a) { var i = " ", o = e.level, n = e.dataLevel, s = e.schema[t], u = e.schemaPath + e.util.getProperty(t), l = e.errSchemaPath + "/" + t, c = !e.opts.allErrors, p = "data" + (n || ""), d = "valid" + o, f = "errs__" + o, h = e.util.copy(e), m = ""; h.level++; var y = "valid" + h.level, v = "i" + o, g = h.dataLevel = e.dataLevel + 1, b = "data" + g, P = e.baseId; if (i += "var " + f + " = errors;var " + d + ";", Array.isArray(s)) { var w = e.schema.additionalItems; if (!1 === w) { i += " " + d + " = " + p + ".length <= " + s.length + "; "; var E = l; l = e.errSchemaPath + "/additionalItems"; var _ = _ || []; _.push(i += "  if (!" + d + ") {   "), i = "", !1 !== e.createErrors ? (i += " { keyword: 'additionalItems' , dataPath: (dataPath || '') + " + e.errorPath + " , schemaPath: " + e.util.toQuotedString(l) + " , params: { limit: " + s.length + " } ", !1 !== e.opts.messages && (i += " , message: 'should NOT have more than " + s.length + " items' "), e.opts.verbose && (i += " , schema: false , parentSchema: validate.schema" + e.schemaPath + " , data: " + p + " "), i += " } ") : i += " {} "; var x = i; i = _.pop(), i += !e.compositeRule && c ? e.async ? " throw new ValidationError([" + x + "]); " : " validate.errors = [" + x + "]; return false; " : " var err = " + x + ";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ", i += " } ", l = E, c && (m += "}", i += " else { ") } var k = s; if (k) for (var S, O = -1, j = k.length - 1; j > O;)if (S = k[O += 1], e.util.schemaHasRules(S, e.RULES.all)) { i += " " + y + " = true; if (" + p + ".length > " + O + ") { "; var F = p + "[" + O + "]"; h.schema = S, h.schemaPath = u + "[" + O + "]", h.errSchemaPath = l + "/" + O, h.errorPath = e.util.getPathExpr(e.errorPath, O, e.opts.jsonPointers, !0), h.dataPathArr[g] = O; var A = e.validate(h); h.baseId = P, 2 > e.util.varOccurences(A, b) ? i += " " + e.util.varReplace(A, b, F) + " " : i += " var " + b + " = " + F + "; " + A + " ", i += " }  ", c && (i += " if (" + y + ") { ", m += "}") } "object" == r(w) && e.util.schemaHasRules(w, e.RULES.all) && (h.schema = w, h.schemaPath = e.schemaPath + ".additionalItems", h.errSchemaPath = e.errSchemaPath + "/additionalItems", i += " " + y + " = true; if (" + p + ".length > " + s.length + ") {  for (var " + v + " = " + s.length + "; " + v + " < " + p + ".length; " + v + "++) { ", h.errorPath = e.util.getPathExpr(e.errorPath, v, e.opts.jsonPointers, !0), F = p + "[" + v + "]", h.dataPathArr[g] = v, A = e.validate(h), h.baseId = P, 2 > e.util.varOccurences(A, b) ? i += " " + e.util.varReplace(A, b, F) + " " : i += " var " + b + " = " + F + "; " + A + " ", c && (i += " if (!" + y + ") break; "), i += " } }  ", c && (i += " if (" + y + ") { ", m += "}")) } else e.util.schemaHasRules(s, e.RULES.all) && (h.schema = s, h.schemaPath = u, h.errSchemaPath = l, i += "  for (var " + v + " = 0; " + v + " < " + p + ".length; " + v + "++) { ", h.errorPath = e.util.getPathExpr(e.errorPath, v, e.opts.jsonPointers, !0), F = p + "[" + v + "]", h.dataPathArr[g] = v, A = e.validate(h), h.baseId = P, 2 > e.util.varOccurences(A, b) ? i += " " + e.util.varReplace(A, b, F) + " " : i += " var " + b + " = " + F + "; " + A + " ", c && (i += " if (!" + y + ") break; "), i += " }"); return c && (i += " " + m + " if (" + f + " == errors) {"), i = e.util.cleanUpCode(i) }, maximum: pa, minimum: pa, maxItems: da, minItems: da, maxLength: fa, minLength: fa, maxProperties: ha, minProperties: ha, multipleOf: function (e, t, r) { var a, i = " ", o = e.level, n = e.dataLevel, s = e.schema[t], u = e.schemaPath + e.util.getProperty(t), l = e.errSchemaPath + "/" + t, c = !e.opts.allErrors, p = "data" + (n || ""), d = e.opts.$data && s && s.$data; d ? (i += " var schema" + o + " = " + e.util.getData(s.$data, n, e.dataPathArr) + "; ", a = "schema" + o) : a = s, i += "var division" + o + ";if (", d && (i += " " + a + " !== undefined && ( typeof " + a + " != 'number' || "), i += " (division" + o + " = " + p + " / " + a + ", ", i += e.opts.multipleOfPrecision ? " Math.abs(Math.round(division" + o + ") - division" + o + ") > 1e-" + e.opts.multipleOfPrecision + " " : " division" + o + " !== parseInt(division" + o + ") ", i += " ) ", d && (i += "  )  "); var f = f || []; f.push(i += " ) {   "), i = "", !1 !== e.createErrors ? (i += " { keyword: 'multipleOf' , dataPath: (dataPath || '') + " + e.errorPath + " , schemaPath: " + e.util.toQuotedString(l) + " , params: { multipleOf: " + a + " } ", !1 !== e.opts.messages && (i += " , message: 'should be multiple of ", i += d ? "' + " + a : a + "'"), e.opts.verbose && (i += " , schema:  ", i += d ? "validate.schema" + u : "" + s, i += "         , parentSchema: validate.schema" + e.schemaPath + " , data: " + p + " "), i += " } ") : i += " {} "; var h = i; return i = f.pop(), i += !e.compositeRule && c ? e.async ? " throw new ValidationError([" + h + "]); " : " validate.errors = [" + h + "]; return false; " : " var err = " + h + ";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ", i += "} ", c && (i += " else { "), i }, not: function (e, t, r) { var a = " ", i = e.level, o = e.dataLevel, n = e.schema[t], s = e.schemaPath + e.util.getProperty(t), u = e.errSchemaPath + "/" + t, l = !e.opts.allErrors, c = "data" + (o || ""), p = "errs__" + i, d = e.util.copy(e); d.level++; var f = "valid" + d.level; if (e.util.schemaHasRules(n, e.RULES.all)) { d.schema = n, d.schemaPath = s, d.errSchemaPath = u, a += " var " + p + " = errors;  "; var h, m = e.compositeRule; e.compositeRule = d.compositeRule = !0, d.createErrors = !1, d.opts.allErrors && (h = d.opts.allErrors, d.opts.allErrors = !1), a += " " + e.validate(d) + " ", d.createErrors = !0, h && (d.opts.allErrors = h), e.compositeRule = d.compositeRule = m; var y = y || []; y.push(a += " if (" + f + ") {   "), a = "", !1 !== e.createErrors ? (a += " { keyword: 'not' , dataPath: (dataPath || '') + " + e.errorPath + " , schemaPath: " + e.util.toQuotedString(u) + " , params: {} ", !1 !== e.opts.messages && (a += " , message: 'should NOT be valid' "), e.opts.verbose && (a += " , schema: validate.schema" + s + " , parentSchema: validate.schema" + e.schemaPath + " , data: " + c + " "), a += " } ") : a += " {} "; var v = a; a = y.pop(), a += !e.compositeRule && l ? e.async ? " throw new ValidationError([" + v + "]); " : " validate.errors = [" + v + "]; return false; " : " var err = " + v + ";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ", a += " } else {  errors = " + p + "; if (vErrors !== null) { if (" + p + ") vErrors.length = " + p + "; else vErrors = null; } ", e.opts.allErrors && (a += " } ") } else a += "  var err =   ", !1 !== e.createErrors ? (a += " { keyword: 'not' , dataPath: (dataPath || '') + " + e.errorPath + " , schemaPath: " + e.util.toQuotedString(u) + " , params: {} ", !1 !== e.opts.messages && (a += " , message: 'should NOT be valid' "), e.opts.verbose && (a += " , schema: validate.schema" + s + " , parentSchema: validate.schema" + e.schemaPath + " , data: " + c + " "), a += " } ") : a += " {} ", a += ";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ", l && (a += " if (false) { "); return a }, oneOf: function (e, t, r) { var a = " ", i = e.level, o = e.dataLevel, n = e.schema[t], s = e.schemaPath + e.util.getProperty(t), u = e.errSchemaPath + "/" + t, l = !e.opts.allErrors, c = "data" + (o || ""), p = "valid" + i, d = "errs__" + i, f = e.util.copy(e), h = ""; f.level++; var m = "valid" + f.level, y = f.baseId, v = "prevValid" + i, g = "passingSchemas" + i; a += "var " + d + " = errors , " + v + " = false , " + p + " = false , " + g + " = null; "; var b = e.compositeRule; e.compositeRule = f.compositeRule = !0; var P = n; if (P) for (var w, E = -1, _ = P.length - 1; _ > E;)w = P[E += 1], e.util.schemaHasRules(w, e.RULES.all) ? (f.schema = w, f.schemaPath = s + "[" + E + "]", f.errSchemaPath = u + "/" + E, a += "  " + e.validate(f) + " ", f.baseId = y) : a += " var " + m + " = true; ", E && (a += " if (" + m + " && " + v + ") { " + p + " = false; " + g + " = [" + g + ", " + E + "]; } else { ", h += "}"), a += " if (" + m + ") { " + p + " = " + v + " = true; " + g + " = " + E + "; }"; return e.compositeRule = f.compositeRule = b, a += h + "if (!" + p + ") {   var err =   ", !1 !== e.createErrors ? (a += " { keyword: 'oneOf' , dataPath: (dataPath || '') + " + e.errorPath + " , schemaPath: " + e.util.toQuotedString(u) + " , params: { passingSchemas: " + g + " } ", !1 !== e.opts.messages && (a += " , message: 'should match exactly one schema in oneOf' "), e.opts.verbose && (a += " , schema: validate.schema" + s + " , parentSchema: validate.schema" + e.schemaPath + " , data: " + c + " "), a += " } ") : a += " {} ", a += ";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ", !e.compositeRule && l && (a += e.async ? " throw new ValidationError(vErrors); " : " validate.errors = vErrors; return false; "), a += "} else {  errors = " + d + "; if (vErrors !== null) { if (" + d + ") vErrors.length = " + d + "; else vErrors = null; }", e.opts.allErrors && (a += " } "), a }, pattern: function (e, t, r) { var a, i = " ", o = e.level, n = e.dataLevel, s = e.schema[t], u = e.schemaPath + e.util.getProperty(t), l = e.errSchemaPath + "/" + t, c = !e.opts.allErrors, p = "data" + (n || ""), d = e.opts.$data && s && s.$data; d ? (i += " var schema" + o + " = " + e.util.getData(s.$data, n, e.dataPathArr) + "; ", a = "schema" + o) : a = s; var f = d ? "(new RegExp(" + a + "))" : e.usePattern(s); i += "if ( ", d && (i += " (" + a + " !== undefined && typeof " + a + " != 'string') || "); var h = h || []; h.push(i += " !" + f + ".test(" + p + ") ) {   "), i = "", !1 !== e.createErrors ? (i += " { keyword: 'pattern' , dataPath: (dataPath || '') + " + e.errorPath + " , schemaPath: " + e.util.toQuotedString(l) + " , params: { pattern:  ", i += d ? "" + a : "" + e.util.toQuotedString(s), i += "  } ", !1 !== e.opts.messages && (i += " , message: 'should match pattern \"", i += d ? "' + " + a + " + '" : "" + e.util.escapeQuotes(s), i += "\"' "), e.opts.verbose && (i += " , schema:  ", i += d ? "validate.schema" + u : "" + e.util.toQuotedString(s), i += "         , parentSchema: validate.schema" + e.schemaPath + " , data: " + p + " "), i += " } ") : i += " {} "; var m = i; return i = h.pop(), i += !e.compositeRule && c ? e.async ? " throw new ValidationError([" + m + "]); " : " validate.errors = [" + m + "]; return false; " : " var err = " + m + ";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ", i += "} ", c && (i += " else { "), i }, properties: function (e, t, a) { var i = " ", o = e.level, n = e.dataLevel, s = e.schema[t], u = e.schemaPath + e.util.getProperty(t), l = e.errSchemaPath + "/" + t, c = !e.opts.allErrors, p = "data" + (n || ""), d = "errs__" + o, f = e.util.copy(e), h = ""; f.level++; var m = "valid" + f.level, y = "key" + o, v = "idx" + o, g = f.dataLevel = e.dataLevel + 1, b = "data" + g, P = "dataProperties" + o, w = Object.keys(s || {}), E = e.schema.patternProperties || {}, _ = Object.keys(E), x = e.schema.additionalProperties, k = w.length || _.length, S = !1 === x, O = "object" == r(x) && Object.keys(x).length, j = e.opts.removeAdditional, F = S || O || j, A = e.opts.ownProperties, D = e.baseId, I = e.schema.required; if (I && (!e.opts.$data || !I.$data) && e.opts.loopRequired > I.length) var $ = e.util.toHash(I); if (i += "var " + d + " = errors;var " + m + " = true;", A && (i += " var " + P + " = undefined;"), F) { if (i += A ? " " + P + " = " + P + " || Object.keys(" + p + "); for (var " + v + "=0; " + v + "<" + P + ".length; " + v + "++) { var " + y + " = " + P + "[" + v + "]; " : " for (var " + y + " in " + p + ") { ", k) { if (i += " var isAdditional" + o + " = !(false ", w.length) if (w.length > 8) i += " || validate.schema" + u + ".hasOwnProperty(" + y + ") "; else { var R = w; if (R) for (var T = -1, C = R.length - 1; C > T;)X = R[T += 1], i += " || " + y + " == " + e.util.toQuotedString(X) + " " } if (_.length) { var z = _; if (z) for (var q = -1, U = z.length - 1; U > q;)ie = z[q += 1], i += " || " + e.usePattern(ie) + ".test(" + y + ") " } i += " ); if (isAdditional" + o + ") { " } if ("all" == j) i += " delete " + p + "[" + y + "]; "; else { var N = e.errorPath, L = "' + " + y + " + '"; if (e.opts._errorDataPathProperty && (e.errorPath = e.util.getPathExpr(e.errorPath, y, e.opts.jsonPointers)), S) if (j) i += " delete " + p + "[" + y + "]; "; else { var V = l; l = e.errSchemaPath + "/additionalProperties", (te = te || []).push(i += " " + m + " = false; "), i = "", !1 !== e.createErrors ? (i += " { keyword: 'additionalProperties' , dataPath: (dataPath || '') + " + e.errorPath + " , schemaPath: " + e.util.toQuotedString(l) + " , params: { additionalProperty: '" + L + "' } ", !1 !== e.opts.messages && (i += " , message: '", i += e.opts._errorDataPathProperty ? "is an invalid additional property" : "should NOT have additional properties", i += "' "), e.opts.verbose && (i += " , schema: false , parentSchema: validate.schema" + e.schemaPath + " , data: " + p + " "), i += " } ") : i += " {} "; var M = i; i = te.pop(), i += !e.compositeRule && c ? e.async ? " throw new ValidationError([" + M + "]); " : " validate.errors = [" + M + "]; return false; " : " var err = " + M + ";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ", l = V, c && (i += " break; ") } else if (O) if ("failing" == j) { i += " var " + d + " = errors;  "; var Q = e.compositeRule; e.compositeRule = f.compositeRule = !0, f.schema = x, f.schemaPath = e.schemaPath + ".additionalProperties", f.errSchemaPath = e.errSchemaPath + "/additionalProperties", f.errorPath = e.opts._errorDataPathProperty ? e.errorPath : e.util.getPathExpr(e.errorPath, y, e.opts.jsonPointers); var B = p + "[" + y + "]"; f.dataPathArr[g] = y; var H = e.validate(f); f.baseId = D, 2 > e.util.varOccurences(H, b) ? i += " " + e.util.varReplace(H, b, B) + " " : i += " var " + b + " = " + B + "; " + H + " ", i += " if (!" + m + ") { errors = " + d + "; if (validate.errors !== null) { if (errors) validate.errors.length = errors; else validate.errors = null; } delete " + p + "[" + y + "]; }  ", e.compositeRule = f.compositeRule = Q } else f.schema = x, f.schemaPath = e.schemaPath + ".additionalProperties", f.errSchemaPath = e.errSchemaPath + "/additionalProperties", f.errorPath = e.opts._errorDataPathProperty ? e.errorPath : e.util.getPathExpr(e.errorPath, y, e.opts.jsonPointers), B = p + "[" + y + "]", f.dataPathArr[g] = y, H = e.validate(f), f.baseId = D, 2 > e.util.varOccurences(H, b) ? i += " " + e.util.varReplace(H, b, B) + " " : i += " var " + b + " = " + B + "; " + H + " ", c && (i += " if (!" + m + ") break; "); e.errorPath = N } k && (i += " } "), i += " }  ", c && (i += " if (" + m + ") { ", h += "}") } var K = e.opts.useDefaults && !e.compositeRule; if (w.length) { var J = w; if (J) for (var X, Z = -1, G = J.length - 1; G > Z;) { if (X = J[Z += 1], e.util.schemaHasRules(se = s[X], e.RULES.all)) { var Y = e.util.getProperty(X), W = (B = p + Y, K && void 0 !== se.default); if (f.schema = se, f.schemaPath = u + Y, f.errSchemaPath = l + "/" + e.util.escapeFragment(X), f.errorPath = e.util.getPath(e.errorPath, X, e.opts.jsonPointers), f.dataPathArr[g] = e.util.toQuotedString(X), H = e.validate(f), f.baseId = D, 2 > e.util.varOccurences(H, b)) { H = e.util.varReplace(H, b, B); var ee = B } else ee = b, i += " var " + b + " = " + B + "; "; if (W) i += " " + H + " "; else { if ($ && $[X]) { i += " if ( " + ee + " === undefined ", A && (i += " || ! Object.prototype.hasOwnProperty.call(" + p + ", '" + e.util.escapeQuotes(X) + "') "), i += ") { " + m + " = false; ", N = e.errorPath, V = l; var te, re = e.util.escapeQuotes(X); e.opts._errorDataPathProperty && (e.errorPath = e.util.getPath(N, X, e.opts.jsonPointers)), l = e.errSchemaPath + "/required", (te = te || []).push(i), i = "", !1 !== e.createErrors ? (i += " { keyword: 'required' , dataPath: (dataPath || '') + " + e.errorPath + " , schemaPath: " + e.util.toQuotedString(l) + " , params: { missingProperty: '" + re + "' } ", !1 !== e.opts.messages && (i += " , message: '", i += e.opts._errorDataPathProperty ? "is a required property" : "should have required property \\'" + re + "\\'", i += "' "), e.opts.verbose && (i += " , schema: validate.schema" + u + " , parentSchema: validate.schema" + e.schemaPath + " , data: " + p + " "), i += " } ") : i += " {} ", M = i, i = te.pop(), i += !e.compositeRule && c ? e.async ? " throw new ValidationError([" + M + "]); " : " validate.errors = [" + M + "]; return false; " : " var err = " + M + ";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ", l = V, e.errorPath = N, i += " } else { " } else c ? (i += " if ( " + ee + " === undefined ", A && (i += " || ! Object.prototype.hasOwnProperty.call(" + p + ", '" + e.util.escapeQuotes(X) + "') "), i += ") { " + m + " = true; } else { ") : (i += " if (" + ee + " !== undefined ", A && (i += " &&   Object.prototype.hasOwnProperty.call(" + p + ", '" + e.util.escapeQuotes(X) + "') "), i += " ) { "); i += " " + H + " } " } } c && (i += " if (" + m + ") { ", h += "}") } } if (_.length) { var ae = _; if (ae) for (var ie, oe = -1, ne = ae.length - 1; ne > oe;) { var se; ie = ae[oe += 1], e.util.schemaHasRules(se = E[ie], e.RULES.all) && (f.schema = se, f.schemaPath = e.schemaPath + ".patternProperties" + e.util.getProperty(ie), f.errSchemaPath = e.errSchemaPath + "/patternProperties/" + e.util.escapeFragment(ie), i += A ? " " + P + " = " + P + " || Object.keys(" + p + "); for (var " + v + "=0; " + v + "<" + P + ".length; " + v + "++) { var " + y + " = " + P + "[" + v + "]; " : " for (var " + y + " in " + p + ") { ", i += " if (" + e.usePattern(ie) + ".test(" + y + ")) { ", f.errorPath = e.util.getPathExpr(e.errorPath, y, e.opts.jsonPointers), B = p + "[" + y + "]", f.dataPathArr[g] = y, H = e.validate(f), f.baseId = D, 2 > e.util.varOccurences(H, b) ? i += " " + e.util.varReplace(H, b, B) + " " : i += " var " + b + " = " + B + "; " + H + " ", c && (i += " if (!" + m + ") break; "), i += " } ", c && (i += " else " + m + " = true; "), i += " }  ", c && (i += " if (" + m + ") { ", h += "}")) } } return c && (i += " " + h + " if (" + d + " == errors) {"), i = e.util.cleanUpCode(i) }, propertyNames: function (e, t, r) { var a = " ", i = e.level, o = e.dataLevel, n = e.schema[t], s = e.schemaPath + e.util.getProperty(t), u = e.errSchemaPath + "/" + t, l = !e.opts.allErrors, c = "data" + (o || ""), p = "errs__" + i, d = e.util.copy(e); d.level++; var f = "valid" + d.level; if (a += "var " + p + " = errors;", e.util.schemaHasRules(n, e.RULES.all)) { d.schema = n, d.schemaPath = s, d.errSchemaPath = u; var h = "key" + i, m = "idx" + i, y = "i" + i, v = "' + " + h + " + '", g = "data" + (d.dataLevel = e.dataLevel + 1), b = "dataProperties" + i, P = e.opts.ownProperties, w = e.baseId; P && (a += " var " + b + " = undefined; "), a += P ? " " + b + " = " + b + " || Object.keys(" + c + "); for (var " + m + "=0; " + m + "<" + b + ".length; " + m + "++) { var " + h + " = " + b + "[" + m + "]; " : " for (var " + h + " in " + c + ") { ", a += " var startErrs" + i + " = errors; "; var E = h, _ = e.compositeRule; e.compositeRule = d.compositeRule = !0; var x = e.validate(d); d.baseId = w, 2 > e.util.varOccurences(x, g) ? a += " " + e.util.varReplace(x, g, E) + " " : a += " var " + g + " = " + E + "; " + x + " ", e.compositeRule = d.compositeRule = _, a += " if (!" + f + ") { for (var " + y + "=startErrs" + i + "; " + y + "<errors; " + y + "++) { vErrors[" + y + "].propertyName = " + h + "; }   var err =   ", !1 !== e.createErrors ? (a += " { keyword: 'propertyNames' , dataPath: (dataPath || '') + " + e.errorPath + " , schemaPath: " + e.util.toQuotedString(u) + " , params: { propertyName: '" + v + "' } ", !1 !== e.opts.messages && (a += " , message: 'property name \\'" + v + "\\' is invalid' "), e.opts.verbose && (a += " , schema: validate.schema" + s + " , parentSchema: validate.schema" + e.schemaPath + " , data: " + c + " "), a += " } ") : a += " {} ", a += ";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ", !e.compositeRule && l && (a += e.async ? " throw new ValidationError(vErrors); " : " validate.errors = vErrors; return false; "), l && (a += " break; "), a += " } }" } return l && (a += "  if (" + p + " == errors) {"), a = e.util.cleanUpCode(a) }, required: function (e, t, r) { var a = " ", i = e.level, o = e.dataLevel, n = e.schema[t], s = e.schemaPath + e.util.getProperty(t), u = e.errSchemaPath + "/" + t, l = !e.opts.allErrors, c = "data" + (o || ""), p = "valid" + i, d = e.opts.$data && n && n.$data; d && (a += " var schema" + i + " = " + e.util.getData(n.$data, o, e.dataPathArr) + "; "); var f = "schema" + i; if (!d) if (e.opts.loopRequired > n.length && e.schema.properties && Object.keys(e.schema.properties).length) { var h = [], m = n; if (m) for (var y, v = -1, g = m.length - 1; g > v;) { y = m[v += 1]; var b = e.schema.properties[y]; b && e.util.schemaHasRules(b, e.RULES.all) || (h[h.length] = y) } } else h = n; if (d || h.length) { var P = e.errorPath, w = d || h.length >= e.opts.loopRequired, E = e.opts.ownProperties; if (l) if (a += " var missing" + i + "; ", w) { d || (a += " var " + f + " = validate.schema" + s + "; "); var _ = "' + " + (F = "schema" + i + "[" + (O = "i" + i) + "]") + " + '"; e.opts._errorDataPathProperty && (e.errorPath = e.util.getPathExpr(P, F, e.opts.jsonPointers)), a += " var " + p + " = true; ", d && (a += " if (schema" + i + " === undefined) " + p + " = true; else if (!Array.isArray(schema" + i + ")) " + p + " = false; else {"), a += " for (var " + O + " = 0; " + O + " < " + f + ".length; " + O + "++) { " + p + " = " + c + "[" + f + "[" + O + "]] !== undefined ", E && (a += " &&   Object.prototype.hasOwnProperty.call(" + c + ", " + f + "[" + O + "]) "), a += "; if (!" + p + ") break; } ", d && (a += "  }  "), (k = k || []).push(a += "  if (!" + p + ") {   "), a = "", !1 !== e.createErrors ? (a += " { keyword: 'required' , dataPath: (dataPath || '') + " + e.errorPath + " , schemaPath: " + e.util.toQuotedString(u) + " , params: { missingProperty: '" + _ + "' } ", !1 !== e.opts.messages && (a += " , message: '", a += e.opts._errorDataPathProperty ? "is a required property" : "should have required property \\'" + _ + "\\'", a += "' "), e.opts.verbose && (a += " , schema: validate.schema" + s + " , parentSchema: validate.schema" + e.schemaPath + " , data: " + c + " "), a += " } ") : a += " {} "; var x = a; a = k.pop(), a += !e.compositeRule && l ? e.async ? " throw new ValidationError([" + x + "]); " : " validate.errors = [" + x + "]; return false; " : " var err = " + x + ";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ", a += " } else { " } else { a += " if ( "; var k, S = h; if (S) for (var O = -1, j = S.length - 1; j > O;)D = S[O += 1], O && (a += " || "), a += " ( ( " + (T = c + (R = e.util.getProperty(D))) + " === undefined ", E && (a += " || ! Object.prototype.hasOwnProperty.call(" + c + ", '" + e.util.escapeQuotes(D) + "') "), a += ") && (missing" + i + " = " + e.util.toQuotedString(e.opts.jsonPointers ? D : R) + ") ) "; a += ") {  ", _ = "' + " + (F = "missing" + i) + " + '", e.opts._errorDataPathProperty && (e.errorPath = e.opts.jsonPointers ? e.util.getPathExpr(P, F, !0) : P + " + " + F), (k = k || []).push(a), a = "", !1 !== e.createErrors ? (a += " { keyword: 'required' , dataPath: (dataPath || '') + " + e.errorPath + " , schemaPath: " + e.util.toQuotedString(u) + " , params: { missingProperty: '" + _ + "' } ", !1 !== e.opts.messages && (a += " , message: '", a += e.opts._errorDataPathProperty ? "is a required property" : "should have required property \\'" + _ + "\\'", a += "' "), e.opts.verbose && (a += " , schema: validate.schema" + s + " , parentSchema: validate.schema" + e.schemaPath + " , data: " + c + " "), a += " } ") : a += " {} ", x = a, a = k.pop(), a += !e.compositeRule && l ? e.async ? " throw new ValidationError([" + x + "]); " : " validate.errors = [" + x + "]; return false; " : " var err = " + x + ";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ", a += " } else { " } else if (w) { var F; d || (a += " var " + f + " = validate.schema" + s + "; "), _ = "' + " + (F = "schema" + i + "[" + (O = "i" + i) + "]") + " + '", e.opts._errorDataPathProperty && (e.errorPath = e.util.getPathExpr(P, F, e.opts.jsonPointers)), d && (a += " if (" + f + " && !Array.isArray(" + f + ")) {  var err =   ", !1 !== e.createErrors ? (a += " { keyword: 'required' , dataPath: (dataPath || '') + " + e.errorPath + " , schemaPath: " + e.util.toQuotedString(u) + " , params: { missingProperty: '" + _ + "' } ", !1 !== e.opts.messages && (a += " , message: '", a += e.opts._errorDataPathProperty ? "is a required property" : "should have required property \\'" + _ + "\\'", a += "' "), e.opts.verbose && (a += " , schema: validate.schema" + s + " , parentSchema: validate.schema" + e.schemaPath + " , data: " + c + " "), a += " } ") : a += " {} ", a += ";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } else if (" + f + " !== undefined) { "), a += " for (var " + O + " = 0; " + O + " < " + f + ".length; " + O + "++) { if (" + c + "[" + f + "[" + O + "]] === undefined ", E && (a += " || ! Object.prototype.hasOwnProperty.call(" + c + ", " + f + "[" + O + "]) "), a += ") {  var err =   ", !1 !== e.createErrors ? (a += " { keyword: 'required' , dataPath: (dataPath || '') + " + e.errorPath + " , schemaPath: " + e.util.toQuotedString(u) + " , params: { missingProperty: '" + _ + "' } ", !1 !== e.opts.messages && (a += " , message: '", a += e.opts._errorDataPathProperty ? "is a required property" : "should have required property \\'" + _ + "\\'", a += "' "), e.opts.verbose && (a += " , schema: validate.schema" + s + " , parentSchema: validate.schema" + e.schemaPath + " , data: " + c + " "), a += " } ") : a += " {} ", a += ";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } } ", d && (a += "  }  ") } else { var A = h; if (A) for (var D, I = -1, $ = A.length - 1; $ > I;) { D = A[I += 1]; var R = e.util.getProperty(D), T = (_ = e.util.escapeQuotes(D), c + R); e.opts._errorDataPathProperty && (e.errorPath = e.util.getPath(P, D, e.opts.jsonPointers)), a += " if ( " + T + " === undefined ", E && (a += " || ! Object.prototype.hasOwnProperty.call(" + c + ", '" + e.util.escapeQuotes(D) + "') "), a += ") {  var err =   ", !1 !== e.createErrors ? (a += " { keyword: 'required' , dataPath: (dataPath || '') + " + e.errorPath + " , schemaPath: " + e.util.toQuotedString(u) + " , params: { missingProperty: '" + _ + "' } ", !1 !== e.opts.messages && (a += " , message: '", a += e.opts._errorDataPathProperty ? "is a required property" : "should have required property \\'" + _ + "\\'", a += "' "), e.opts.verbose && (a += " , schema: validate.schema" + s + " , parentSchema: validate.schema" + e.schemaPath + " , data: " + c + " "), a += " } ") : a += " {} ", a += ";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } " } } e.errorPath = P } else l && (a += " if (true) {"); return a }, uniqueItems: function (e, t, r) { var a, i = " ", o = e.level, n = e.dataLevel, s = e.schema[t], u = e.schemaPath + e.util.getProperty(t), l = e.errSchemaPath + "/" + t, c = !e.opts.allErrors, p = "data" + (n || ""), d = "valid" + o, f = e.opts.$data && s && s.$data; if (f ? (i += " var schema" + o + " = " + e.util.getData(s.$data, n, e.dataPathArr) + "; ", a = "schema" + o) : a = s, (s || f) && !1 !== e.opts.uniqueItems) { f && (i += " var " + d + "; if (" + a + " === false || " + a + " === undefined) " + d + " = true; else if (typeof " + a + " != 'boolean') " + d + " = false; else { "), i += " var i = " + p + ".length , " + d + " = true , j; if (i > 1) { "; var h = e.schema.items && e.schema.items.type, m = Array.isArray(h); h && "object" != h && "array" != h && (!m || 0 > h.indexOf("object") && 0 > h.indexOf("array")) ? (i += " var itemIndices = {}, item; for (;i--;) { var item = " + p + "[i]; ", i += " if (" + e.util["checkDataType" + (m ? "s" : "")](h, "item", !0) + ") continue; ", m && (i += " if (typeof item == 'string') item = '\"' + item; "), i += " if (typeof itemIndices[item] == 'number') { " + d + " = false; j = itemIndices[item]; break; } itemIndices[item] = i; } ") : i += " outer: for (;i--;) { for (j = i; j--;) { if (equal(" + p + "[i], " + p + "[j])) { " + d + " = false; break outer; } } } ", i += " } ", f && (i += "  }  "); var y = y || []; y.push(i += " if (!" + d + ") {   "), i = "", !1 !== e.createErrors ? (i += " { keyword: 'uniqueItems' , dataPath: (dataPath || '') + " + e.errorPath + " , schemaPath: " + e.util.toQuotedString(l) + " , params: { i: i, j: j } ", !1 !== e.opts.messages && (i += " , message: 'should NOT have duplicate items (items ## ' + j + ' and ' + i + ' are identical)' "), e.opts.verbose && (i += " , schema:  ", i += f ? "validate.schema" + u : "" + s, i += "         , parentSchema: validate.schema" + e.schemaPath + " , data: " + p + " "), i += " } ") : i += " {} "; var v = i; i = y.pop(), i += !e.compositeRule && c ? e.async ? " throw new ValidationError([" + v + "]); " : " validate.errors = [" + v + "]; return false; " : " var err = " + v + ";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ", i += " } ", c && (i += " else { ") } else c && (i += " if (true) { "); return i }, validate: Tr }, ya = Bt.toHash, va = function () { var e = [{ type: "number", rules: [{ maximum: ["exclusiveMaximum"] }, { minimum: ["exclusiveMinimum"] }, "multipleOf", "format"] }, { type: "string", rules: ["maxLength", "minLength", "pattern", "format"] }, { type: "array", rules: ["maxItems", "minItems", "items", "contains", "uniqueItems"] }, { type: "object", rules: ["maxProperties", "minProperties", "required", "dependencies", "propertyNames", { properties: ["additionalProperties", "patternProperties"] }] }, { rules: ["$ref", "const", "enum", "not", "anyOf", "oneOf", "allOf", "if"] }], t = ["type", "$comment"]; return e.all = ya(t), e.types = ya(["number", "integer", "string", "array", "object", "boolean", "null"]), e.forEach(function (a) { a.rules = a.rules.map(function (a) { var i; if ("object" == r(a)) { var o = Object.keys(a)[0]; i = a[o], a = o, i.forEach(function (r) { t.push(r), e.all[r] = !0 }) } return t.push(a), e.all[a] = { keyword: a, code: ma[a], implements: i } }), e.all.$comment = { keyword: "$comment", code: ma.$comment }, a.type && (e.types[a.type] = a) }), e.keywords = ya(t.concat(["$schema", "$id", "id", "$data", "title", "description", "default", "definitions", "examples", "readOnly", "writeOnly", "contentMediaType", "contentEncoding", "additionalItems", "then", "else"])), e.custom = {}, e }, ga = ["multipleOf", "maximum", "exclusiveMaximum", "minimum", "exclusiveMinimum", "maxLength", "minLength", "pattern", "additionalItems", "maxItems", "minItems", "uniqueItems", "maxProperties", "minProperties", "required", "additionalProperties", "enum", "format", "const"], ba = function (e, t) { for (var r = 0; t.length > r; r++) { e = JSON.parse(JSON.stringify(e)); var a, i = t[r].split("/"), o = e; for (a = 1; i.length > a; a++)o = o[i[a]]; for (a = 0; ga.length > a; a++) { var n = ga[a], s = o[n]; s && (o[n] = { anyOf: [s, { $ref: "https://raw.githubusercontent.com/epoberezkin/ajv/master/lib/refs/data.json#" }] }) } } return e }, Pa = Dr.MissingRef, wa = function e(t, r, a) { var i = this; if ("function" != typeof this._opts.loadSchema) throw Error("options.loadSchema should be a function"); "function" == typeof r && (a = r, r = void 0); var o = n(t).then(function () { var e = i._addSchema(t, void 0, r); return e.validate || function e(t) { try { return i._compile(t) } catch (e) { if (e instanceof Pa) return function a(e) { var a = e.missingSchema; if (u(a)) throw Error("Schema " + a + " is loaded but " + e.missingRef + " cannot be resolved"); var o = i._loadingSchemas[a]; o || (o = i._loadingSchemas[a] = i._opts.loadSchema(a)).then(s, s); return o.then(function (e) { if (!u(a)) return n(e).then(function () { u(a) || i.addSchema(e, a, void 0, r) }) }).then(function () { return function e(t) { try { return i._compile(t) } catch (e) { if (e instanceof Pa) return a(e); throw e } function a(a) { var o = a.missingSchema; if (l(o)) throw Error("Schema " + o + " is loaded but " + a.missingRef + " cannot be resolved"); var s = i._loadingSchemas[o]; return s || (s = i._loadingSchemas[o] = i._opts.loadSchema(o)).then(u, u), s.then(function (e) { if (!l(o)) return n(e).then(function () { l(o) || i.addSchema(e, o, void 0, r) }) }).then(function () { return e(t) }); function u() { delete i._loadingSchemas[o] } function l(e) { return i._refs[e] || i._schemas[e] } } }(t) }); function s() { delete i._loadingSchemas[a] } function u(e) { return i._refs[e] || i._schemas[e] } }(e); throw e } function a(a) { var o = a.missingSchema; if (l(o)) throw Error("Schema " + o + " is loaded but " + a.missingRef + " cannot be resolved"); var s = i._loadingSchemas[o]; return s || (s = i._loadingSchemas[o] = i._opts.loadSchema(o)).then(u, u), s.then(function (e) { if (!l(o)) return n(e).then(function () { l(o) || i.addSchema(e, o, void 0, r) }) }).then(function () { return e(t) }); function u() { delete i._loadingSchemas[o] } function l(e) { return i._refs[e] || i._schemas[e] } } }(e) }); a && o.then(function (e) { a(null, e) }, a); return o; function n(t) { var r = t.$schema; return r && !i.getSchema(r) ? e.call(i, { $ref: r }, !0) : Promise.resolve() } }; var Ea = function (e, t, r) { var a, i, o = " ", n = e.level, s = e.dataLevel, u = e.schema[t], l = e.schemaPath + e.util.getProperty(t), c = e.errSchemaPath + "/" + t, p = !e.opts.allErrors, d = "data" + (s || ""), f = "valid" + n, h = "errs__" + n, m = e.opts.$data && u && u.$data; m ? (o += " var schema" + n + " = " + e.util.getData(u.$data, s, e.dataPathArr) + "; ", i = "schema" + n) : i = u; var y, v, g, b, P, w = "definition" + n, E = this.definition, _ = ""; if (m && E.$data) { var x = E.validateSchema; o += " var " + w + " = RULES.custom['" + t + "'].definition; var " + (P = "keywordValidate" + n) + " = " + w + ".validate;" } else { if (!(b = e.useCustomRule(this, u, e.schema, e))) return; i = "validate.schema" + l, P = b.code, y = E.compile, v = E.inline, g = E.macro } var k = P + ".errors", S = "i" + n, O = "ruleErr" + n, j = E.async; if (j && !e.async) throw Error("async keyword in sync schema"); if (v || g || (o += k + " = null;"), o += "var " + h + " = errors;var " + f + ";", m && E.$data && (_ += "}", o += " if (" + i + " === undefined) { " + f + " = true; } else { ", x && (_ += "}", o += " " + f + " = " + w + ".validateSchema(" + i + "); if (" + f + ") { ")), v) o += E.statements ? " " + b.validate + " " : " " + f + " = " + b.validate + "; "; else if (g) { var F = e.util.copy(e); _ = ""; F.level++; var A = "valid" + F.level; F.schema = b.validate, F.schemaPath = ""; var D = e.compositeRule; e.compositeRule = F.compositeRule = !0; var I = e.validate(F).replace(/validate\.schema/g, P); e.compositeRule = F.compositeRule = D, o += " " + I } else { (C = C || []).push(o), o = "", o += "  " + P + ".call( ", o += e.opts.passContext ? "this" : "self", o += y || !1 === E.schema ? " , " + d + " " : " , " + i + " , " + d + " , validate.schema" + e.schemaPath + " ", o += " , (dataPath || '')", '""' != e.errorPath && (o += " + " + e.errorPath); var $ = s ? "data" + (s - 1 || "") : "parentData", R = s ? e.dataPathArr[s] : "parentDataProperty", T = o += " , " + $ + " , " + R + " , rootData )  "; o = C.pop(), !1 === E.errors ? (o += " " + f + " = ", j && (o += "await "), o += T + "; ") : o += j ? " var " + (k = "customErrors" + n) + " = null; try { " + f + " = await " + T + "; } catch (e) { " + f + " = false; if (e instanceof ValidationError) " + k + " = e.errors; else throw e; } " : " " + k + " = null; " + f + " = " + T + "; " } if (E.modifying && (o += " if (" + $ + ") " + d + " = " + $ + "[" + R + "];"), o += "" + _, E.valid) p && (o += " if (true) { "); else { var C; o += " if ( ", void 0 === E.valid ? (o += " !", o += g ? "" + A : "" + f) : o += " " + !E.valid + " ", a = this.keyword, (C = C || []).push(o += ") { "), (C = C || []).push(o = ""), o = "", !1 !== e.createErrors ? (o += " { keyword: '" + (a || "custom") + "' , dataPath: (dataPath || '') + " + e.errorPath + " , schemaPath: " + e.util.toQuotedString(c) + " , params: { keyword: '" + this.keyword + "' } ", !1 !== e.opts.messages && (o += " , message: 'should pass \"" + this.keyword + "\" keyword validation' "), e.opts.verbose && (o += " , schema: validate.schema" + l + " , parentSchema: validate.schema" + e.schemaPath + " , data: " + d + " "), o += " } ") : o += " {} "; var z = o; o = C.pop(); var q = o += !e.compositeRule && p ? e.async ? " throw new ValidationError([" + z + "]); " : " validate.errors = [" + z + "]; return false; " : " var err = " + z + ";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "; o = C.pop(), v ? E.errors ? "full" != E.errors && (o += "  for (var " + S + "=" + h + "; " + S + "<errors; " + S + "++) { var " + O + " = vErrors[" + S + "]; if (" + O + ".dataPath === undefined) " + O + ".dataPath = (dataPath || '') + " + e.errorPath + "; if (" + O + ".schemaPath === undefined) { " + O + '.schemaPath = "' + c + '"; } ', e.opts.verbose && (o += " " + O + ".schema = " + i + "; " + O + ".data = " + d + "; "), o += " } ") : !1 === E.errors ? o += " " + q + " " : (o += " if (" + h + " == errors) { " + q + " } else {  for (var " + S + "=" + h + "; " + S + "<errors; " + S + "++) { var " + O + " = vErrors[" + S + "]; if (" + O + ".dataPath === undefined) " + O + ".dataPath = (dataPath || '') + " + e.errorPath + "; if (" + O + ".schemaPath === undefined) { " + O + '.schemaPath = "' + c + '"; } ', e.opts.verbose && (o += " " + O + ".schema = " + i + "; " + O + ".data = " + d + "; "), o += " } } ") : g ? (o += "   var err =   ", !1 !== e.createErrors ? (o += " { keyword: '" + (a || "custom") + "' , dataPath: (dataPath || '') + " + e.errorPath + " , schemaPath: " + e.util.toQuotedString(c) + " , params: { keyword: '" + this.keyword + "' } ", !1 !== e.opts.messages && (o += " , message: 'should pass \"" + this.keyword + "\" keyword validation' "), e.opts.verbose && (o += " , schema: validate.schema" + l + " , parentSchema: validate.schema" + e.schemaPath + " , data: " + d + " "), o += " } ") : o += " {} ", o += ";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ", !e.compositeRule && p && (o += e.async ? " throw new ValidationError(vErrors); " : " validate.errors = vErrors; return false; ")) : !1 === E.errors ? o += " " + q + " " : (o += " if (Array.isArray(" + k + ")) { if (vErrors === null) vErrors = " + k + "; else vErrors = vErrors.concat(" + k + "); errors = vErrors.length;  for (var " + S + "=" + h + "; " + S + "<errors; " + S + "++) { var " + O + " = vErrors[" + S + "]; if (" + O + ".dataPath === undefined) " + O + ".dataPath = (dataPath || '') + " + e.errorPath + ";  " + O + '.schemaPath = "' + c + '";  ', e.opts.verbose && (o += " " + O + ".schema = " + i + "; " + O + ".data = " + d + "; "), o += " } } else { " + q + " } "), o += " } ", p && (o += " else { ") } return o }, _a = /^[a-z_$][a-z0-9_$-]*$/i, xa = function (e, t) { var r = this.RULES; if (r.keywords[e]) throw Error("Keyword " + e + " is already defined"); if (!_a.test(e)) throw Error("Keyword " + e + " is not a valid identifier"); if (t) { if (t.macro && void 0 !== t.valid) throw Error('"valid" option cannot be used with macro keywords'); var a = t.type; if (Array.isArray(a)) { var i, o = a.length; for (i = 0; o > i; i++)l(a[i]); for (i = 0; o > i; i++)u(e, a[i], t) } else a && l(a), u(e, a, t); var n = !0 === t.$data && this._opts.$data; if (n && !t.validate) throw Error('$data support: "validate" function is not defined'); var s = t.metaSchema; s && (n && (s = { anyOf: [s, { $ref: "https://raw.githubusercontent.com/epoberezkin/ajv/master/lib/refs/data.json#" }] }), t.validateSchema = this.compile(s, !0)) } function u(e, t, a) { for (var i, o = 0; r.length > o; o++) { var n = r[o]; if (n.type == t) { i = n; break } } i || r.push(i = { type: t, rules: [] }); var s = { keyword: e, definition: a, custom: !0, code: Ea, implements: a.implements }; i.rules.push(s), r.custom[e] = s } function l(e) { if (!r.types[e]) throw Error("Unknown type " + e) } return r.keywords[e] = r.all[e] = !0, this }, ka = function (e) { var t = this.RULES.custom[e]; return t ? t.definition : this.RULES.keywords[e] || !1 }, Sa = function (e) { var t = this.RULES; delete t.keywords[e], delete t.all[e], delete t.custom[e]; for (var r = 0; t.length > r; r++)for (var a = t[r].rules, i = 0; a.length > i; i++)if (a[i].keyword == e) { a.splice(i, 1); break } return this }; const Oa = "http://json-schema.org/draft-07/schema#", ja = "https://raw.githubusercontent.com/epoberezkin/ajv/master/lib/refs/data.json#", Fa = "Meta-schema for $data reference (JSON Schema extension proposal)", Aa = ["$data"], Da = { $data: { type: "string", anyOf: [{ format: "relative-json-pointer" }, { format: "json-pointer" }] } }; var Ia = Object.freeze({ $schema: Oa, $id: ja, description: Fa, type: "object", required: Aa, properties: Da, additionalProperties: !1, default: { $schema: Oa, $id: ja, description: Fa, type: "object", required: Aa, properties: Da, additionalProperties: !1 } }); const $a = "http://json-schema.org/draft-07/schema#", Ra = "http://json-schema.org/draft-07/schema#", Ta = "Core schema meta-schema", Ca = { schemaArray: { type: "array", minItems: 1, items: { $ref: "#" } }, nonNegativeInteger: { type: "integer", minimum: 0 }, nonNegativeIntegerDefault0: { allOf: [{ $ref: "#/definitions/nonNegativeInteger" }, { default: 0 }] }, simpleTypes: { enum: ["array", "boolean", "integer", "null", "number", "object", "string"] }, stringArray: { type: "array", items: { type: "string" }, uniqueItems: !0, default: [] } }, za = ["object", "boolean"], qa = { $id: { type: "string", format: "uri-reference" }, $schema: { type: "string", format: "uri" }, $ref: { type: "string", format: "uri-reference" }, $comment: { type: "string" }, title: { type: "string" }, description: { type: "string" }, default: !0, readOnly: { type: "boolean", default: !1 }, examples: { type: "array", items: !0 }, multipleOf: { type: "number", exclusiveMinimum: 0 }, maximum: { type: "number" }, exclusiveMaximum: { type: "number" }, minimum: { type: "number" }, exclusiveMinimum: { type: "number" }, maxLength: { $ref: "#/definitions/nonNegativeInteger" }, minLength: { $ref: "#/definitions/nonNegativeIntegerDefault0" }, pattern: { type: "string", format: "regex" }, additionalItems: { $ref: "#" }, items: { anyOf: [{ $ref: "#" }, { $ref: "#/definitions/schemaArray" }], default: !0 }, maxItems: { $ref: "#/definitions/nonNegativeInteger" }, minItems: { $ref: "#/definitions/nonNegativeIntegerDefault0" }, uniqueItems: { type: "boolean", default: !1 }, contains: { $ref: "#" }, maxProperties: { $ref: "#/definitions/nonNegativeInteger" }, minProperties: { $ref: "#/definitions/nonNegativeIntegerDefault0" }, required: { $ref: "#/definitions/stringArray" }, additionalProperties: { $ref: "#" }, definitions: { type: "object", additionalProperties: { $ref: "#" }, default: {} }, properties: { type: "object", additionalProperties: { $ref: "#" }, default: {} }, patternProperties: { type: "object", additionalProperties: { $ref: "#" }, propertyNames: { format: "regex" }, default: {} }, dependencies: { type: "object", additionalProperties: { anyOf: [{ $ref: "#" }, { $ref: "#/definitions/stringArray" }] } }, propertyNames: { $ref: "#" }, const: !0, enum: { type: "array", items: !0, minItems: 1, uniqueItems: !0 }, type: { anyOf: [{ $ref: "#/definitions/simpleTypes" }, { type: "array", items: { $ref: "#/definitions/simpleTypes" }, minItems: 1, uniqueItems: !0 }] }, format: { type: "string" }, contentMediaType: { type: "string" }, contentEncoding: { type: "string" }, if: { $ref: "#" }, then: { $ref: "#" }, else: { $ref: "#" }, allOf: { $ref: "#/definitions/schemaArray" }, anyOf: { $ref: "#/definitions/schemaArray" }, oneOf: { $ref: "#/definitions/schemaArray" }, not: { $ref: "#" } }; var Ua = Object.freeze({ $schema: $a, $id: Ra, title: Ta, definitions: Ca, type: za, properties: qa, default: { $schema: $a, $id: Ra, title: Ta, definitions: Ca, type: za, properties: qa, default: !0 } }), Na = lt(Ia), La = lt(Ua), Va = Ha; Ha.prototype.validate = function (e, t) { var r; if ("string" == typeof e) { if (!(r = this.getSchema(e))) throw Error('no schema with key or ref "' + e + '"') } else { var a = this._addSchema(e); r = a.validate || this._compile(a) } var i = r(t); !0 !== r.$async && (this.errors = r.errors); return i }, Ha.prototype.compile = function (e, t) { var r = this._addSchema(e, void 0, t); return r.validate || this._compile(r) }, Ha.prototype.addSchema = function (e, t, r, a) { if (Array.isArray(e)) { for (var i = 0; e.length > i; i++)this.addSchema(e[i], void 0, r, a); return this } var o = this._getId(e); if (void 0 !== o && "string" != typeof o) throw Error("schema id must be string"); return Ya(this, t = br.normalizeId(t || o)), this._schemas[t] = this._addSchema(e, r, a, !0), this }, Ha.prototype.addMetaSchema = function (e, t, r) { return this.addSchema(e, t, r, !0), this }, Ha.prototype.validateSchema = function (e, t) { var a = e.$schema; if (void 0 !== a && "string" != typeof a) throw Error("$schema must be a string"); if (!(a = a || this._opts.defaultMeta || (i = this, o = i._opts.meta, i._opts.defaultMeta = "object" == r(o) ? i._getId(o) || o : i.getSchema(Ma) ? Ma : void 0, i._opts.defaultMeta))) return this.logger.warn("meta-schema not available"), this.errors = null, !0; var i, o; var n, s = this._formats.uri; this._formats.uri = "function" == typeof s ? this._schemaUriFormatFunc : this._schemaUriFormat; try { n = this.validate(a, e) } finally { this._formats.uri = s } if (!n && t) { var u = "schema is invalid: " + this.errorsText(); if ("log" != this._opts.validateSchema) throw Error(u); this.logger.error(u) } return n }, Ha.prototype.getSchema = function (e) { var t = Ka(this, e); switch (r(t)) { case "object": return t.validate || this._compile(t); case "string": return this.getSchema(t); case "undefined": return function (e, t) { var r = br.schema.call(e, { schema: {} }, t); if (r) { var a = r.schema, i = r.root, o = r.baseId, n = qr.call(e, a, i, void 0, o); return e._fragments[t] = new vr({ ref: t, fragment: !0, schema: a, root: i, baseId: o, validate: n }), n } }(this, e) } }, Ha.prototype.removeSchema = function (e) { if (e instanceof RegExp) return Ja(this, this._schemas, e), Ja(this, this._refs, e), this; switch (r(e)) { case "undefined": return Ja(this, this._schemas), Ja(this, this._refs), this._cache.clear(), this; case "string": var t = Ka(this, e); return t && this._cache.del(t.cacheKey), delete this._schemas[e], delete this._refs[e], this; case "object": var a = this._opts.serialize, i = a ? a(e) : e; this._cache.del(i); var o = this._getId(e); o && (o = br.normalizeId(o), delete this._schemas[o], delete this._refs[o]) }return this }, Ha.prototype.addFormat = function (e, t) { "string" == typeof t && (t = RegExp(t)); return this._formats[e] = t, this }, Ha.prototype.errorsText = function (e, t) { if (!(e = e || this.errors)) return "No errors"; for (var r = void 0 === (t = t || {}).separator ? ", " : t.separator, a = void 0 === t.dataVar ? "data" : t.dataVar, i = "", o = 0; e.length > o; o++) { var n = e[o]; n && (i += a + n.dataPath + " " + n.message + r) } return i.slice(0, -r.length) }, Ha.prototype._addSchema = function (e, t, a, i) { if ("object" != r(e) && "boolean" != typeof e) throw Error("schema should be object or boolean"); var o = this._opts.serialize, n = o ? o(e) : e, s = this._cache.get(n); if (s) return s; i = i || !1 !== this._opts.addUsedSchema; var u = br.normalizeId(this._getId(e)); u && i && Ya(this, u); var l, c = !1 !== this._opts.validateSchema && !t; c && !(l = u && u == br.normalizeId(e.$schema)) && this.validateSchema(e, !0); var p = br.ids.call(this, e), d = new vr({ id: u, schema: e, localRefs: p, cacheKey: n, meta: a }); "#" != u[0] && i && (this._refs[u] = d); this._cache.put(n, d), c && l && this.validateSchema(e, !0); return d }, Ha.prototype._compile = function (e, t) { if (e.compiling) return e.validate = i, i.schema = e.schema, i.errors = null, i.root = t || i, !0 === e.schema.$async && (i.$async = !0), i; var r, a; e.compiling = !0, e.meta && (r = this._opts, this._opts = this._metaOpts); try { a = qr.call(this, e.schema, t, e.localRefs) } catch (t) { throw delete e.validate, t } finally { e.compiling = !1, e.meta && (this._opts = r) } return e.validate = a, e.refs = a.refs, e.refVal = a.refVal, e.root = a.root, a; function i() { var t = e.validate, r = t.apply(this, arguments); return i.errors = t.errors, r } }, Ha.prototype.compileAsync = wa, Ha.prototype.addKeyword = xa, Ha.prototype.getKeyword = ka, Ha.prototype.removeKeyword = Sa, Ha.ValidationError = Dr.Validation, Ha.MissingRefError = Dr.MissingRef, Ha.$dataMetaSchema = ba; var Ma = "http://json-schema.org/draft-07/schema", Qa = ["removeAdditional", "useDefaults", "coerceTypes"], Ba = ["/properties"]; function Ha(e) { if (!(this instanceof Ha)) return new Ha(e); e = this._opts = Bt.copy(e) || {}, function (e) { var t = e._opts.logger; if (!1 === t) e.logger = { log: Wa, warn: Wa, error: Wa }; else { if (void 0 === t && (t = console), !("object" == r(t) && t.log && t.warn && t.error)) throw Error("logger must implement log, warn and error methods"); e.logger = t } }(this), this._schemas = {}, this._refs = {}, this._fragments = {}, this._formats = aa(e.format); var t = this._schemaUriFormat = this._formats["uri-reference"]; this._schemaUriFormatFunc = function (e) { return t.test(e) }, this._cache = e.cache || new Br, this._loadingSchemas = {}, this._compilations = [], this.RULES = va(), this._getId = function (e) { switch (e.schemaId) { case "auto": return Ga; case "id": return Xa; default: return Za } }(e), e.loopRequired = e.loopRequired || 1 / 0, "property" == e.errorDataPath && (e._errorDataPathProperty = !0), void 0 === e.serialize && (e.serialize = Rr), this._metaOpts = function (e) { for (var t = Bt.copy(e._opts), r = 0; Qa.length > r; r++)delete t[Qa[r]]; return t }(this), e.formats && function (e) { for (var t in e._opts.formats) { var r = e._opts.formats[t]; e.addFormat(t, r) } }(this), function (e) { var t; e._opts.$data && e.addMetaSchema(t = Na, t.$id, !0); if (!1 === e._opts.meta) return; var r = La; e._opts.$data && (r = ba(r, Ba)); e.addMetaSchema(r, Ma, !0), e._refs["http://json-schema.org/schema"] = Ma }(this), "object" == r(e.meta) && this.addMetaSchema(e.meta), function (e) { var t = e._opts.schemas; if (!t) return; if (Array.isArray(t)) e.addSchema(t); else for (var r in t) e.addSchema(t[r], r) }(this) } function Ka(e, t) { return t = br.normalizeId(t), e._schemas[t] || e._refs[t] || e._fragments[t] } function Ja(e, t, r) { for (var a in t) { var i = t[a]; i.meta || r && !r.test(a) || (e._cache.del(i.cacheKey), delete t[a]) } } function Xa(e) { return e.$id && this.logger.warn("schema $id ignored", e.$id), e.id } function Za(e) { return e.id && this.logger.warn("schema id ignored", e.id), e.$id } function Ga(e) { if (e.$id && e.id && e.$id != e.id) throw Error("schema $id is different from id"); return e.$id || e.id } function Ya(e, t) { if (e._schemas[t] || e._refs[t]) throw Error('schema with key or id "' + t + '" already exists') } function Wa() { } var ei, ti = Object.freeze({ default: Va, __moduleExports: Va, Ajv: Va.Ajv }); ei = Va || ti; var ri, ai, ii, oi, ni, si, ui, li, ci, pi, di, fi, hi, mi, yi, vi, gi = function (e) { return ei().compile(e) }, bi = function (e) { function t(r, a) { var i = e.call(this, r) || this; return Object.setPrototypeOf(i, t.prototype), i.details = a, i } return function (e, t) { function r() { this.constructor = e } a(e, t), e.prototype = null === t ? Object.create(t) : (r.prototype = t.prototype, new r) }(t, e), t }(Error); (ri = e.AlignOptions || (e.AlignOptions = {})).left = "left", ri.right = "right", ri.center = "center", ri.bottom = "bottom", ri.top = "top", (ai = e.AlignFacesOptions || (e.AlignFacesOptions = {})).left = "left", ai.right = "right", ai.center = "center", ai.bottom = "bottom", ai.top = "top", ai.faces = "faces", (ii = e.FitOptions || (e.FitOptions = {})).clip = "clip", ii.crop = "crop", ii.scale = "scale", ii.max = "max", (oi = e.BlurMode || (e.BlurMode = {})).linear = "linear", oi.gaussian = "gaussian", (ni = e.ShapeType || (e.ShapeType = {})).oval = "oval", ni.rect = "rect", (si = e.NoiseType || (e.NoiseType = {})).none = "none", si.low = "low", si.medium = "medium", si.high = "high", (ui = e.StyleType || (e.StyleType = {})).artwork = "artwork", ui.photo = "photo", (li = e.ColorspaceType || (e.ColorspaceType = {})).RGB = "RGB", li.CMYK = "CMYK", li.Input = "Input", (ci = e.CropfacesType || (e.CropfacesType = {})).thumb = "thumb", ci.crop = "crop", ci.fill = "fill", (pi = e.VideoTypes || (e.VideoTypes = {})).h264 = "h264", pi.h264_hi = "h264.hi", pi.webm = "webm", pi["webm-hi"] = "webm.hi", pi.ogg = "ogg", pi["ogg-hi"] = "ogg.hi", pi["hls-variant"] = "hls.variant", pi.mp3 = "mp3", pi.oga = "oga", pi.m4a = "m4a", pi.aac = "aac", pi.hls = "hls.variant.audio", (di = e.URLScreenshotAgent || (e.URLScreenshotAgent = {})).desktop = "desktop", di.mobile = "mobile", (fi = e.URLScreenshotMode || (e.URLScreenshotMode = {})).all = "all", fi.window = "window", (hi = e.URLScreenshotOrientation || (e.URLScreenshotOrientation = {})).portrait = "portrait", hi.landscape = "landscape", (mi = e.Locations || (e.Locations = {})).s3 = "s3", mi.azure = "azure", mi.gcs = "gcs", mi.rackspace = "rackspace", mi.dropbox = "dropbox", (yi = e.VideoAccess || (e.VideoAccess = {})).private = "private", yi.public = "public", (vi = e.VideoAccessMode || (e.VideoAccessMode = {})).preserve = "preserve", vi.constrain = "constrain", vi.letterbox = "letterbox", vi.pad = "pad", vi.crop = "crop"; var Pi, wi, Ei, _i, xi, ki, Si, Oi, ji, Fi, Ai, Di, Ii, $i, Ri, Ti, Ci = /^[\w\-]{20}$/, zi = function () { function e(e, t) { this.validator = gi(Ut), this.transforms = [], this.b64 = !1, this.source = e; var r = this.isSourceExternal(); if (r && !t) throw new bi("External sources requires apikey to handle transforms"); if (!r && "string" == typeof this.source && !Ci.test(this.source)) throw new bi("Invalid filestack source provided"); this.apikey = t } return e.prototype.setBase64 = function (e) { return this.b64 = e, this }, e.prototype.setCname = function (e) { return this.cname = e, this }, e.prototype.setCustomDomain = function (e) { return this.customDomain = e, this }, e.prototype.getValidationSchema = function () { return Ut }, e.prototype.getTransformations = function () { return this.transforms }, e.prototype.toString = function () { var e = []; e.push(this.getCdnHost()), this.apikey && e.push(this.apikey); var t = this.generateTransformString(), r = this.source; return this.b64 ? (this.transforms.length > 0 && (t = "b64/" + btoa(JSON.stringify(this.transforms))), Array.isArray(r) && (r = this.arrayToString(r)), r = "b64://" + btoa(r)) : r = Array.isArray(r) ? this.arrayToString(r) : this.escapeValue(r), t.length && e.push(t), e.push(r), e.join("/") }, e.prototype.addTask = function (e, t) { if (this.validateTask(e, t), "cache" !== e && "boolean" == typeof t) { if (!t) return this; t = void 0 } else "object" !== r(t) || Object.keys(t).length || (t = void 0); return this.transforms.push({ name: e, params: t }), this }, e.prototype.reset = function () { return this.transforms = [], this }, e.prototype.flip = function () { return this.addTask("flip", !0) }, e.prototype.flop = function () { return this.addTask("flop", !0) }, e.prototype.enhance = function () { return this.addTask("enhance", !0) }, e.prototype.redeye = function () { return this.addTask("redeye", !0) }, e.prototype.monochrome = function () { return this.addTask("monochrome", !0) }, e.prototype.negative = function () { return this.addTask("negative", !0) }, e.prototype.tags = function () { return this.addTask("tags", !0) }, e.prototype.sfw = function () { return this.addTask("sfw", !0) }, e.prototype.store = function (e) { return this.addTask("store", e) }, e.prototype.cache = function (e) { return this.addTask("cache", e) }, e.prototype.resize = function (e) { return this.addTask("resize", e) }, e.prototype.crop = function (e) { return this.addTask("crop", e) }, e.prototype.rotate = function (e) { return this.addTask("rotate", e) }, e.prototype.detectFaces = function (e) { return this.addTask("detect_faces", e) }, e.prototype.cropFaces = function (e) { return this.addTask("crop_faces", e) }, e.prototype.pixelateFaces = function (e) { return this.addTask("pixelate_faces", e) }, e.prototype.blurFaces = function (e) { return this.addTask("blur_faces", e) }, e.prototype.roundedCorners = function (e) { return this.addTask("rounded_corners", e) }, e.prototype.polaroid = function (e) { return this.addTask("polaroid", e) }, e.prototype.vignette = function (e) { return this.addTask("vignette", e) }, e.prototype.tornEdges = function (e) { return this.addTask("torn_edges", e) }, e.prototype.shadow = function (e) { return this.addTask("shadow", e) }, e.prototype.circle = function (e) { return this.addTask("circle", e) }, e.prototype.border = function (e) { return this.addTask("border", e) }, e.prototype.sharpen = function (e) { return this.addTask("sharpen", e) }, e.prototype.blur = function (e) { return this.addTask("blur", e) }, e.prototype.blackwhite = function (e) { return this.addTask("blackwhite", e) }, e.prototype.sepia = function (e) { return this.addTask("sepia", e) }, e.prototype.pixelate = function (e) { return this.addTask("pixelate", e) }, e.prototype.oilPaint = function (e) { return this.addTask("oil_paint", e) }, e.prototype.modulate = function (e) { return this.addTask("modulate", e) }, e.prototype.partialPixelate = function (e) { return this.addTask("partial_pixelate", e) }, e.prototype.partialBlur = function (e) { return this.addTask("partial_blur", e) }, e.prototype.collage = function (e) { return this.addTask("collage", e) }, e.prototype.upscale = function (e) { return this.addTask("upscale", e) }, e.prototype.ascii = function (e) { return this.addTask("ascii", e) }, e.prototype.quality = function (e) { return this.addTask("quality", e) }, e.prototype.security = function (e) { return this.addTask("security", e) }, e.prototype.output = function (e) { return this.addTask("output", e) }, e.prototype.videoConvert = function (e) { return this.addTask("video_convert", e) }, e.prototype.URLScreenshot = function (e) { return this.addTask("urlscreenshot", e) }, e.prototype.PDFInfo = function (e) { return this.addTask("pdfinfo", e) }, e.prototype.PDFConvert = function (e) { return this.addTask("pdfconvert", e) }, e.prototype.isSourceExternal = function () { if (!this.source) throw new bi("Source not Set"); var e = Array.isArray(this.source) ? this.source : [this.source]; for (var t in e) if (e.hasOwnProperty(t) && (0 === e[t].indexOf("src:") || 0 === e[t].indexOf("http"))) return !0; return !1 }, e.prototype.validateTask = function (e, t) { var r = {}; if (r[e] = t, !this.validator(r)) throw new bi('Task "' + e + '" validation error, Params: ' + JSON.stringify(t), this.validator.errors) }, e.prototype.getCdnHost = function () { var e = t.urls; return this.customDomain && (e.cdnUrl = this.customDomain), (e = $t(e, this.cname)).cdnUrl }, e.prototype.generateTransformString = function () { var e = this, t = []; return this.transforms.forEach(function (r) { t.push(e.optionToString(r.name, r.params)) }), t.join("/") }, e.prototype.optionToString = function (e, t) { var a = this, i = []; return void 0 === t ? e : "object" !== r(t) || Object.keys(t).length ? "boolean" == typeof t ? t ? e : "cache" === e ? "cache=false" : "" : (Object.keys(t).forEach(function (e) { i.push(Array.isArray(t[e]) ? e + ":" + a.arrayToString(t[e]) : e + ":" + a.escapeValue(t[e])) }), e + "=" + i.join(",")) : e }, e.prototype.escapeValue = function (e) { return "string" != typeof e ? e : e.indexOf("/") > -1 ? '"' + e + '"' : e }, e.prototype.arrayToString = function (e) { var t = this; return "[" + e.map(function (e) { return Array.isArray(e) ? t.arrayToString(e) : t.escapeValue(e) }) + "]" }, e }(); (Pi = e.EAlignOptions || (e.EAlignOptions = {})).left = "left", Pi.right = "right", Pi.center = "center", Pi.bottom = "bottom", Pi.top = "top", (wi = e.EAlignFacesOptions || (e.EAlignFacesOptions = {})).left = "left", wi.right = "right", wi.center = "center", wi.bottom = "bottom", wi.top = "top", wi.faces = "faces", (Ei = e.EFitOptions || (e.EFitOptions = {})).clip = "clip", Ei.crop = "crop", Ei.scale = "scale", Ei.max = "max", (_i = e.EBlurMode || (e.EBlurMode = {})).linear = "linear", _i.gaussian = "gaussian", (xi = e.EShapeType || (e.EShapeType = {})).oval = "oval", xi.rect = "rect", (ki = e.ENoiseType || (e.ENoiseType = {})).none = "none", ki.low = "low", ki.medium = "medium", ki.high = "high", (Si = e.EStyleType || (e.EStyleType = {})).artwork = "artwork", Si.photo = "photo", (Oi = e.EColorspaceType || (e.EColorspaceType = {})).RGB = "RGB", Oi.CMYK = "CMYK", Oi.Input = "Input", (ji = e.ECropfacesType || (e.ECropfacesType = {})).thumb = "thumb", ji.crop = "crop", ji.fill = "fill", (Fi = e.EVideoTypes || (e.EVideoTypes = {})).h264 = "h264", Fi.h264_hi = "h264.hi", Fi.webm = "webm", Fi["webm-hi"] = "webm.hi", Fi.ogg = "ogg", Fi["ogg-hi"] = "ogg.hi", Fi["hls-variant"] = "hls.variant", Fi.mp3 = "mp3", Fi.oga = "oga", Fi.m4a = "m4a", Fi.aac = "aac", Fi.hls = "hls.variant.audio", (Ai = e.EUrlscreenshotAgent || (e.EUrlscreenshotAgent = {})).desktop = "desktop", Ai.mobile = "mobile", (Di = e.EUrlscreenshotMode || (e.EUrlscreenshotMode = {})).all = "all", Di.window = "window", (Ii = e.EUrlscreenshotOrientation || (e.EUrlscreenshotOrientation = {})).portrait = "portrait", Ii.landscape = "landscape", ($i = e.EVideoLocations || (e.EVideoLocations = {})).s3 = "s3", $i.azure = "azure", $i.gcs = "gcs", $i.rackspace = "rackspace", $i.dropbox = "dropbox", (Ri = e.EVideoAccess || (e.EVideoAccess = {})).private = "private", Ri.public = "public", (Ti = e.EVideoAccessMode || (e.EVideoAccessMode = {})).preserve = "preserve", Ti.constrain = "constrain", Ti.letterbox = "letterbox", Ti.pad = "pad", Ti.crop = "crop"; var qi = function (e, t, a, i) { void 0 === a && (a = {}), void 0 === i && (i = !1), a = function e(t) { for (var a = {}, i = Object.keys(t), o = 0; i.length > o; o++) { var n = i[o].split(/(?=[A-Z])/).join("_").toLowerCase(); a[n] = "object" !== r(t[i[o]]) || Array.isArray(t[i[o]]) ? t[i[o]] : e(t[i[o]]) } return a }(a), e.policy && e.signature && (a.security = { policy: e.policy, signature: e.signature }); var o = new zi(t, e.apikey); return o.setCname(e.cname), o.setBase64(i), e.urls.cdnUrl.indexOf("localhost") > -1 && o.setCustomDomain(e.urls.cdnUrl), Object.keys(a).forEach(function (e) { ("boolean" != typeof a[e] || a[e] || "cache" === e) && o.addTask(e, a[e]) }), "" + o }; var Ui, Ni, Li, Vi = { atob: function (e) { if ((e = (e = "".concat(e)).replace(/[ \t\n\f\r]/g, "")).length % 4 == 0 && (e = e.replace(/==?$/, "")), e.length % 4 == 1 || /[^+/0-9A-Za-z]/.test(e)) return null; for (var t = "", r = 0, a = 0, i = 0; e.length > i; i++)r <<= 6, r |= (o = e[i], /[A-Z]/.test(o) ? o.charCodeAt(0) - 65 : /[a-z]/.test(o) ? o.charCodeAt(0) - 97 + 26 : /[0-9]/.test(o) ? o.charCodeAt(0) - 48 + 52 : "+" === o ? 62 : "/" === o ? 63 : void 0), 24 === (a += 6) && (t += String.fromCharCode((16711680 & r) >> 16), t += String.fromCharCode((65280 & r) >> 8), t += String.fromCharCode(255 & r), r = a = 0); var o; return 12 === a ? t += String.fromCharCode(r >>= 4) : 18 === a && (t += String.fromCharCode((65280 & (r >>= 2)) >> 8), t += String.fromCharCode(255 & r)), t }, btoa: function (e) { var t; for (e = "".concat(e), t = 0; e.length > t; t++)if (e.charCodeAt(t) > 255) return null; var r = ""; for (t = 0; e.length > t; t += 3) { var a = [void 0, void 0, void 0, void 0]; a[0] = e.charCodeAt(t) >> 2, a[1] = (3 & e.charCodeAt(t)) << 4, e.length > t + 1 && (a[1] |= e.charCodeAt(t + 1) >> 4, a[2] = (15 & e.charCodeAt(t + 1)) << 2), e.length > t + 2 && (a[2] |= e.charCodeAt(t + 2) >> 6, a[3] = 63 & e.charCodeAt(t + 2)); for (var i = 0; a.length > i; i++)r += void 0 === a[i] ? "=" : 26 > (o = a[i]) ? String.fromCharCode(o + 65) : 52 > o ? String.fromCharCode(o - 26 + 97) : 62 > o ? String.fromCharCode(o - 52 + 48) : 62 === o ? "+" : 63 === o ? "/" : void 0 } var o; return r } }, Mi = Vi.atob, Qi = Vi.btoa, Bi = ut(function (e, t) { e.exports = function (e) { var t = ["0", "1", "2", "3", "4", "5", "6", "7", "8", "9", "a", "b", "c", "d", "e", "f"]; function r(e, t) { var r = e[0], a = e[1], i = e[2], o = e[3]; a = ((a += ((i = ((i += ((o = ((o += ((r = ((r += (a & i | ~a & o) + t[0] - 680876936 | 0) << 7 | r >>> 25) + a | 0) & a | ~r & i) + t[1] - 389564586 | 0) << 12 | o >>> 20) + r | 0) & r | ~o & a) + t[2] + 606105819 | 0) << 17 | i >>> 15) + o | 0) & o | ~i & r) + t[3] - 1044525330 | 0) << 22 | a >>> 10) + i | 0, a = ((a += ((i = ((i += ((o = ((o += ((r = ((r += (a & i | ~a & o) + t[4] - 176418897 | 0) << 7 | r >>> 25) + a | 0) & a | ~r & i) + t[5] + 1200080426 | 0) << 12 | o >>> 20) + r | 0) & r | ~o & a) + t[6] - 1473231341 | 0) << 17 | i >>> 15) + o | 0) & o | ~i & r) + t[7] - 45705983 | 0) << 22 | a >>> 10) + i | 0, a = ((a += ((i = ((i += ((o = ((o += ((r = ((r += (a & i | ~a & o) + t[8] + 1770035416 | 0) << 7 | r >>> 25) + a | 0) & a | ~r & i) + t[9] - 1958414417 | 0) << 12 | o >>> 20) + r | 0) & r | ~o & a) + t[10] - 42063 | 0) << 17 | i >>> 15) + o | 0) & o | ~i & r) + t[11] - 1990404162 | 0) << 22 | a >>> 10) + i | 0, a = ((a += ((i = ((i += ((o = ((o += ((r = ((r += (a & i | ~a & o) + t[12] + 1804603682 | 0) << 7 | r >>> 25) + a | 0) & a | ~r & i) + t[13] - 40341101 | 0) << 12 | o >>> 20) + r | 0) & r | ~o & a) + t[14] - 1502002290 | 0) << 17 | i >>> 15) + o | 0) & o | ~i & r) + t[15] + 1236535329 | 0) << 22 | a >>> 10) + i | 0, a = ((a += ((i = ((i += ((o = ((o += ((r = ((r += (a & o | i & ~o) + t[1] - 165796510 | 0) << 5 | r >>> 27) + a | 0) & i | a & ~i) + t[6] - 1069501632 | 0) << 9 | o >>> 23) + r | 0) & a | r & ~a) + t[11] + 643717713 | 0) << 14 | i >>> 18) + o | 0) & r | o & ~r) + t[0] - 373897302 | 0) << 20 | a >>> 12) + i | 0, a = ((a += ((i = ((i += ((o = ((o += ((r = ((r += (a & o | i & ~o) + t[5] - 701558691 | 0) << 5 | r >>> 27) + a | 0) & i | a & ~i) + t[10] + 38016083 | 0) << 9 | o >>> 23) + r | 0) & a | r & ~a) + t[15] - 660478335 | 0) << 14 | i >>> 18) + o | 0) & r | o & ~r) + t[4] - 405537848 | 0) << 20 | a >>> 12) + i | 0, a = ((a += ((i = ((i += ((o = ((o += ((r = ((r += (a & o | i & ~o) + t[9] + 568446438 | 0) << 5 | r >>> 27) + a | 0) & i | a & ~i) + t[14] - 1019803690 | 0) << 9 | o >>> 23) + r | 0) & a | r & ~a) + t[3] - 187363961 | 0) << 14 | i >>> 18) + o | 0) & r | o & ~r) + t[8] + 1163531501 | 0) << 20 | a >>> 12) + i | 0, a = ((a += ((i = ((i += ((o = ((o += ((r = ((r += (a & o | i & ~o) + t[13] - 1444681467 | 0) << 5 | r >>> 27) + a | 0) & i | a & ~i) + t[2] - 51403784 | 0) << 9 | o >>> 23) + r | 0) & a | r & ~a) + t[7] + 1735328473 | 0) << 14 | i >>> 18) + o | 0) & r | o & ~r) + t[12] - 1926607734 | 0) << 20 | a >>> 12) + i | 0, a = ((a += ((i = ((i += ((o = ((o += ((r = ((r += (a ^ i ^ o) + t[5] - 378558 | 0) << 4 | r >>> 28) + a | 0) ^ a ^ i) + t[8] - 2022574463 | 0) << 11 | o >>> 21) + r | 0) ^ r ^ a) + t[11] + 1839030562 | 0) << 16 | i >>> 16) + o | 0) ^ o ^ r) + t[14] - 35309556 | 0) << 23 | a >>> 9) + i | 0, a = ((a += ((i = ((i += ((o = ((o += ((r = ((r += (a ^ i ^ o) + t[1] - 1530992060 | 0) << 4 | r >>> 28) + a | 0) ^ a ^ i) + t[4] + 1272893353 | 0) << 11 | o >>> 21) + r | 0) ^ r ^ a) + t[7] - 155497632 | 0) << 16 | i >>> 16) + o | 0) ^ o ^ r) + t[10] - 1094730640 | 0) << 23 | a >>> 9) + i | 0, a = ((a += ((i = ((i += ((o = ((o += ((r = ((r += (a ^ i ^ o) + t[13] + 681279174 | 0) << 4 | r >>> 28) + a | 0) ^ a ^ i) + t[0] - 358537222 | 0) << 11 | o >>> 21) + r | 0) ^ r ^ a) + t[3] - 722521979 | 0) << 16 | i >>> 16) + o | 0) ^ o ^ r) + t[6] + 76029189 | 0) << 23 | a >>> 9) + i | 0, a = ((a += ((i = ((i += ((o = ((o += ((r = ((r += (a ^ i ^ o) + t[9] - 640364487 | 0) << 4 | r >>> 28) + a | 0) ^ a ^ i) + t[12] - 421815835 | 0) << 11 | o >>> 21) + r | 0) ^ r ^ a) + t[15] + 530742520 | 0) << 16 | i >>> 16) + o | 0) ^ o ^ r) + t[2] - 995338651 | 0) << 23 | a >>> 9) + i | 0, a = ((a += ((o = ((o += (a ^ ((r = ((r += (i ^ (a | ~o)) + t[0] - 198630844 | 0) << 6 | r >>> 26) + a | 0) | ~i)) + t[7] + 1126891415 | 0) << 10 | o >>> 22) + r | 0) ^ ((i = ((i += (r ^ (o | ~a)) + t[14] - 1416354905 | 0) << 15 | i >>> 17) + o | 0) | ~r)) + t[5] - 57434055 | 0) << 21 | a >>> 11) + i | 0, a = ((a += ((o = ((o += (a ^ ((r = ((r += (i ^ (a | ~o)) + t[12] + 1700485571 | 0) << 6 | r >>> 26) + a | 0) | ~i)) + t[3] - 1894986606 | 0) << 10 | o >>> 22) + r | 0) ^ ((i = ((i += (r ^ (o | ~a)) + t[10] - 1051523 | 0) << 15 | i >>> 17) + o | 0) | ~r)) + t[1] - 2054922799 | 0) << 21 | a >>> 11) + i | 0, a = ((a += ((o = ((o += (a ^ ((r = ((r += (i ^ (a | ~o)) + t[8] + 1873313359 | 0) << 6 | r >>> 26) + a | 0) | ~i)) + t[15] - 30611744 | 0) << 10 | o >>> 22) + r | 0) ^ ((i = ((i += (r ^ (o | ~a)) + t[6] - 1560198380 | 0) << 15 | i >>> 17) + o | 0) | ~r)) + t[13] + 1309151649 | 0) << 21 | a >>> 11) + i | 0, a = ((a += ((o = ((o += (a ^ ((r = ((r += (i ^ (a | ~o)) + t[4] - 145523070 | 0) << 6 | r >>> 26) + a | 0) | ~i)) + t[11] - 1120210379 | 0) << 10 | o >>> 22) + r | 0) ^ ((i = ((i += (r ^ (o | ~a)) + t[2] + 718787259 | 0) << 15 | i >>> 17) + o | 0) | ~r)) + t[9] - 343485551 | 0) << 21 | a >>> 11) + i | 0, e[0] = r + e[0] | 0, e[1] = a + e[1] | 0, e[2] = i + e[2] | 0, e[3] = o + e[3] | 0 } function a(e) { var t, r = []; for (t = 0; 64 > t; t += 4)r[t >> 2] = e.charCodeAt(t) + (e.charCodeAt(t + 1) << 8) + (e.charCodeAt(t + 2) << 16) + (e.charCodeAt(t + 3) << 24); return r } function i(e) { var t, r = []; for (t = 0; 64 > t; t += 4)r[t >> 2] = e[t] + (e[t + 1] << 8) + (e[t + 2] << 16) + (e[t + 3] << 24); return r } function o(e) { var t, i, o, n, s, u, l = e.length, c = [1732584193, -271733879, -1732584194, 271733878]; for (t = 64; l >= t; t += 64)r(c, a(e.substring(t - 64, t))); for (e = e.substring(t - 64), i = e.length, o = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], t = 0; i > t; t += 1)o[t >> 2] |= e.charCodeAt(t) << (t % 4 << 3); if (o[t >> 2] |= 128 << (t % 4 << 3), t > 55) for (r(c, o), t = 0; 16 > t; t += 1)o[t] = 0; return n = (n = 8 * l).toString(16).match(/(.*?)(.{0,8})$/), s = parseInt(n[2], 16), u = parseInt(n[1], 16) || 0, o[14] = s, o[15] = u, r(c, o), c } function n(e) { var r, a = ""; for (r = 0; 4 > r; r += 1)a += t[e >> 8 * r + 4 & 15] + t[e >> 8 * r & 15]; return a } function s(e) { var t; for (t = 0; e.length > t; t += 1)e[t] = n(e[t]); return e.join("") } function u(e) { return /[\u0080-\uFFFF]/.test(e) && (e = unescape(encodeURIComponent(e))), e } function l(e) { var t, r = [], a = e.length; for (t = 0; a - 1 > t; t += 2)r.push(parseInt(e.substr(t, 2), 16)); return String.fromCharCode.apply(String, r) } function c() { this.reset() } return s(o("hello")), "undefined" == typeof ArrayBuffer || ArrayBuffer.prototype.slice || function () { function t(e, t) { return 0 > (e = 0 | e || 0) ? Math.max(e + t, 0) : Math.min(e, t) } ArrayBuffer.prototype.slice = function (r, a) { var i, o, n, s, u = this.byteLength, l = t(r, u), c = u; return a !== e && (c = t(a, u)), l > c ? new ArrayBuffer(0) : (i = c - l, o = new ArrayBuffer(i), n = new Uint8Array(o), s = new Uint8Array(this, l, i), n.set(s), o) } }(), c.prototype.append = function (e) { return this.appendBinary(u(e)), this }, c.prototype.appendBinary = function (e) { this._buff += e, this._length += e.length; var t, i = this._buff.length; for (t = 64; i >= t; t += 64)r(this._hash, a(this._buff.substring(t - 64, t))); return this._buff = this._buff.substring(t - 64), this }, c.prototype.end = function (e) { var t, r, a = this._buff, i = a.length, o = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]; for (t = 0; i > t; t += 1)o[t >> 2] |= a.charCodeAt(t) << (t % 4 << 3); return this._finish(o, i), r = s(this._hash), e && (r = l(r)), this.reset(), r }, c.prototype.reset = function () { return this._buff = "", this._length = 0, this._hash = [1732584193, -271733879, -1732584194, 271733878], this }, c.prototype.getState = function () { return { buff: this._buff, length: this._length, hash: this._hash } }, c.prototype.setState = function (e) { return this._buff = e.buff, this._length = e.length, this._hash = e.hash, this }, c.prototype.destroy = function () { delete this._hash, delete this._buff, delete this._length }, c.prototype._finish = function (e, t) { var a, i, o, n = t; if (e[n >> 2] |= 128 << (n % 4 << 3), n > 55) for (r(this._hash, e), n = 0; 16 > n; n += 1)e[n] = 0; a = (a = 8 * this._length).toString(16).match(/(.*?)(.{0,8})$/), i = parseInt(a[2], 16), o = parseInt(a[1], 16) || 0, e[14] = i, e[15] = o, r(this._hash, e) }, c.hash = function (e, t) { return c.hashBinary(u(e), t) }, c.hashBinary = function (e, t) { var r = s(o(e)); return t ? l(r) : r }, (c.ArrayBuffer = function () { this.reset() }).prototype.append = function (e) { var t, a, o, n, s, u = (a = this._buff.buffer, o = e, n = !0, (s = new Uint8Array(a.byteLength + o.byteLength)).set(new Uint8Array(a)), s.set(new Uint8Array(o), a.byteLength), n ? s : s.buffer), l = u.length; for (this._length += e.byteLength, t = 64; l >= t; t += 64)r(this._hash, i(u.subarray(t - 64, t))); return this._buff = l > t - 64 ? new Uint8Array(u.buffer.slice(t - 64)) : new Uint8Array(0), this }, c.ArrayBuffer.prototype.end = function (e) { var t, r, a = this._buff, i = a.length, o = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]; for (t = 0; i > t; t += 1)o[t >> 2] |= a[t] << (t % 4 << 3); return this._finish(o, i), r = s(this._hash), e && (r = l(r)), this.reset(), r }, c.ArrayBuffer.prototype.reset = function () { return this._buff = new Uint8Array(0), this._length = 0, this._hash = [1732584193, -271733879, -1732584194, 271733878], this }, c.ArrayBuffer.prototype.getState = function () { var e = c.prototype.getState.call(this); return e.buff = String.fromCharCode.apply(null, new Uint8Array(e.buff)), e }, c.ArrayBuffer.prototype.setState = function (e) { return e.buff = function (e, t) { var r, a = e.length, i = new ArrayBuffer(a), o = new Uint8Array(i); for (r = 0; a > r; r += 1)o[r] = e.charCodeAt(r); return t ? o : i }(e.buff, !0), c.prototype.setState.call(this, e) }, c.ArrayBuffer.prototype.destroy = c.prototype.destroy, c.ArrayBuffer.prototype._finish = c.prototype._finish, c.ArrayBuffer.hash = function (e, t) { var a = s(function (e) { var t, a, o, n, s, u, l = e.length, c = [1732584193, -271733879, -1732584194, 271733878]; for (t = 64; l >= t; t += 64)r(c, i(e.subarray(t - 64, t))); for (e = l > t - 64 ? e.subarray(t - 64) : new Uint8Array(0), a = e.length, o = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], t = 0; a > t; t += 1)o[t >> 2] |= e[t] << (t % 4 << 3); if (o[t >> 2] |= 128 << (t % 4 << 3), t > 55) for (r(c, o), t = 0; 16 > t; t += 1)o[t] = 0; return n = (n = 8 * l).toString(16).match(/(.*?)(.{0,8})$/), s = parseInt(n[2], 16), u = parseInt(n[1], 16) || 0, o[14] = s, o[15] = u, r(c, o), c }(new Uint8Array(e))); return t ? l(a) : a }, c }() }).ArrayBuffer, Hi = function (e) { return Qi(Bi.hash(e, !0)) }, Ki = function (e, t) { var r = function (e, t) { var r = e.config, a = t * r.partSize; return { start: a, end: Math.min(a + r.partSize, e.file.size) } }(e, t); return e.file.slice(r.start, r.end) }, Ji = function (e, t) { return (r = Ki(t, e.number), new Promise(function (e, t) { var a; File && FileReader && Blob ? ((a = new FileReader).onloadend = e, a.onerror = t, a.readAsArrayBuffer(r)) : t(Error("The File APIs are not fully supported by your browser")) })).then(function (t) { var r = t.target.result; return i({}, e, { buffer: r, size: r.byteLength, md5: Hi(r) }) }); var r }, Xi = function (e) { var t, r = e; return "string" == typeof e && (r = function (e, t) { var r; void 0 === t && (t = 512); var a = ""; 0 > e.split(",")[0].indexOf("base64") || (r = e.split(",")[1]), void 0 !== r && (a = e.split(",")[0].split(":")[1].split(";")[0], e = decodeURI(r)); for (var i = Mi(e), o = [], n = 0; i.length > n; n += t) { for (var s = i.slice(n, n + t), u = Array(s.length), l = 0; s.length > l; l += 1)u[l] = s.charCodeAt(l); var c = new Uint8Array(u); o.push(c) } return new Blob(o, { type: a }) }(r)), r && ("" + (t = r) == "[object File]" || "" + t == "[object Blob]") ? Promise.resolve(r) : Promise.reject(new TypeError("File argument is not a valid Blob")) }, Zi = function (e, t) { return t.customName || e.name }, Gi = function (e) { return e && "https://" + e }, Yi = function (e, t) { var a = t.store, i = {}; return Object.keys(e).forEach(function (t) { "object" === r(e[t]) && (e[t] = JSON.stringify(e[t])), e[t] && (i[t] = e[t]) }), Object.keys(a).forEach(function (e) { "object" === r(a[e]) && (a[e] = JSON.stringify(a[e])), a[e] && (i[e] = a[e]) }), i }, Wi = function (e, t) { var r = t.config, a = t.params, o = Gi(a.location_url), n = a.location_region, s = i({ apikey: r.apikey, part: e.number + 1, size: e.size, md5: e.md5 }, a); void 0 !== e.offset && (s.multipart = !0, s.offset = 0 === e.offset ? "0" : e.offset); var u = Yi(s, r), l = Ot("post", o + "/multipart/upload"); return n && l.set("Filestack-Upload-Region", n), l.timeout(r.timeout), l.field(u), new Promise(function (e, t) { l.end(function (r, a) { return r ? t(r) : e(a) }) }) }, eo = function (e, t, r, a) { var i = a.timeout || e.byteLength / 100, o = xt(t.url).set(t.headers).timeout(i).send(e); return r ? o.on("progress", r) : o }, to = "init", ro = "running", ao = "done", io = "failed", oo = "paused", no = function (e, t) { return function () { for (var r = [], a = 0; arguments.length > a; a++)r[a] = arguments[a]; return e.state.status === io ? Promise.resolve() : new Promise(function (a) { !function i() { e.state.status === oo ? setTimeout(function () { return i() }, 100) : a(t.apply(void 0, r)) }() }) } }, so = function (e, t) { return { buffer: null, chunks: [], chunkSize: t.config.intelligentChunkSize ? t.config.intelligentChunkSize : (r = navigator.userAgent || navigator.vendor || window.opera, /(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(r) || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(r.substr(0, 4)) ? 1048576 : 8388608), intelligentOverride: !1, loaded: 0, number: e, request: null, size: 0 }; var r }, uo = function (e, t) { return o(void 0, void 0, void 0, function () { var r, a, s, u; return n(this, function (l) { switch (l.label) { case 0: return !0 === (r = t.config).intelligent || e.intelligentOverride ? (a = no(t, function (e) { return function (e, t) { return o(void 0, void 0, void 0, function () { var r, a; return n(this, function (i) { switch (i.label) { case 0: return [4, Wi(e, t)]; case 1: return r = i.sent().body, t.config.onProgress && (a = Ct(function (t) { t.loaded > e.loaded && (e.loaded = t.loaded) }, t.config.progressInterval)), e.request = eo(e.buffer, r, a, t.config), [4, e.request]; case 2: return i.sent(), e.loaded = e.size, [2, e.request] } }) }) }(e, t) }), e.chunks = function (e, t) { for (var r = 0, a = []; e.size > r;) { var i = e.buffer.slice(r, Math.min(r + t, e.size)), o = { buffer: i, offset: r, size: i.byteLength, number: e.number, md5: Hi(i) }; a.push(o), r += t } return a }(e, e.chunkSize), [4, Promise.all(e.chunks.map(It(r.concurrency, a)))]) : [3, 2]; case 1: return l.sent(), [2, function (e, t) { var r = t.config, a = Gi(t.params.location_url), o = i({ apikey: r.apikey, part: e.number + 1, size: t.file.size }, t.params), n = Yi(o, r); return Ot("post", a + "/multipart/commit").timeout(r.timeout).field(n) }(e, t)]; case 2: return [4, Wi(e, t)]; case 3: return s = l.sent().body, r.onProgress && (u = Ct(function (t) { t.loaded > e.loaded && (e.loaded = t.loaded) }, r.progressInterval)), e.request = eo(e.buffer, s, u, r), [2, e.request] } }) }) }, lo = function e(t) { t.buffer = void 0, t.request = void 0, t.chunks && t.chunks.length && t.chunks.forEach(e) }, co = function (e) { var t = e.config, r = e.state, a = e.file, i = Object.keys(r.parts).map(function (e) { return r.parts[e] }), o = i.map(function (e) { return e.loaded }), n = i.map(function (e) { return e.chunks }).reduce(function (e, t) { return e.concat(t) }, []).map(function (e) { return e.loaded }).filter(function (e) { return e }), s = o; (!0 === t.intelligent && (s = n), "fallback" === t.intelligent) && (s = i.filter(function (e) { return !e.intelligentOverride }).map(function (e) { return e.loaded }).concat(n)); var u = s.reduce(function (e, t) { return e + t }, 0), l = function (e, t) { return Math.round(e / t.size * 100) }(u, a), c = { totalBytes: u, totalPercent: l }, p = r.previousPayload || {}; return p.totalPercent > l && (c.totalBytes = p.totalBytes, c.totalPercent = p.totalPercent), r.previousPayload = c, c }, po = function (e, t) { return o(void 0, void 0, void 0, function () { var r, a, s, u, l, c, p, d, f, h, m, y, v, g, b, P, w = this; return n(this, function (E) { switch (E.label) { case 0: return r = e.file, a = e.state, s = e.config, u = function (t) { t && (a.progressTick = setInterval(function () { var r = co(e); 100 === r.totalPercent && clearInterval(a.progressTick), t(r) }, s.progressInterval)) }, l = function (e) { e && (e({ totalBytes: r.size, totalPercent: 100 }), clearInterval(a.progressTick)) }, t.pause = function () { a.status === ro && (a.status = oo, clearInterval(a.progressTick)) }, t.resume = function () { a.status === oo && (a.status = ro, u(s.onProgress)) }, c = function () { Object.keys(a.parts).map(function (e) { return a.parts[e] }).forEach(function (e) { e.request && e.request.abort(), e.chunks.forEach(function (e) { e.request && e.request.abort() }), lo(e) }) }, p = function () { c(), clearInterval(a.progressTick), a.status = io, r.buffer && (r.buffer = null) }, d = new Promise(function (e, r) { t.cancel = function () { a.status !== ro && a.status !== oo || (p(), r(Error("Upload cancelled"))) } }), f = function (e) { return Promise.race([d, e]) }, h = function (e, t, i, o) { var n = a.retries[e] || 0, u = Math.min(s.retryMaxTime, 1e3 * Math.pow(s.retryFactor, n)), l = new Promise(function (l, c) { if (n === s.retry || 400 === i.status && "PUT" !== i.method || 401 === i.status || 403 === i.status || 404 === i.status || o && 32768 >= o.chunkSize) return p(), c(i); var d = function () { return setTimeout(function () { return l(t()) }, u) }; return o && (s.intelligent || o.intelligentOverride) && ("PUT" === i.method && (i.crossDomain || 400 === i.status) || "ECONNABORTED" === i.code && i.timeout || "ECONNRESET" === i.code || "ETIMEDOUT" === i.code) ? (o.chunkSize /= 2, s.onRetry && s.onRetry({ location: e, parts: a.parts, filename: Zi(r, s), chunkSize: o.chunkSize, attempt: void 0 }), "fallback" === s.intelligent && (o.intelligentOverride = !0), d()) : (a.retries[e] = n += 1, s.onRetry && s.onRetry({ location: e, parts: a.parts, filename: Zi(r, s), attempt: n }), d()) }); return f(l) }, a.status = ro, [4, f(function (e) { var t = e.config, r = e.file, a = { apikey: t.apikey, filename: Zi(r, t), mimetype: t.mimetype || r.type || "application/octet-stream", size: r.size }; t.policy && t.signature && (a.policy = t.policy, a.signature = t.signature), t.intelligent && (a.multipart = !0); var i = Yi(a, t); return Ot("post", t.host + "/multipart/start").timeout(t.timeout).field(i) }(e))]; case 1: return m = E.sent().body, e.params = m, y = no(e, function (t) { return o(w, void 0, void 0, function () { var r, i, o, u, l; return n(this, function (n) { switch (n.label) { case 0: return [4, Ji(t, e)]; case 1: if (0 === (r = n.sent()).size) return [2, Promise.reject(Error("Upload aborted due to empty chunk."))]; i = "upload part " + (r.number + 1), a.parts[r.number] = r, n.label = 2; case 2: return n.trys.push([2, 4, , 5]), [4, uo(r, e)]; case 3: return o = n.sent(), u = o.headers.etag, 206 === o.status ? [2, h(i, function () { return y(r) }, Error("Intelligent part failed to commit"), r)] : (r.loaded = r.size, lo(r), s.intelligent || u ? [2, u] : [2, Promise.reject(Error("Response from S3 is missing ETag header."))]); case 4: return l = n.sent(), [2, h(i, function () { return y(r) }, l, r)]; case 5: return [2] } }) }) }), v = function (e, t, r) { void 0 === r && (r = 1); for (var a = []; t > e; e += r)a.push(e); return a }(0, Math.ceil(r.size / s.partSize)).map(function (t) { return so(t, e) }), g = Promise.all(v.map(It(s.concurrency, y))), u(s.onProgress), [4, f(g)]; case 2: return b = E.sent(), P = no(e, function () { return o(w, void 0, void 0, function () { var t, o; return n(this, function (n) { switch (n.label) { case 0: return n.trys.push([0, 2, , 3]), [4, function (e, t) { var r = t.config, a = t.file, o = t.params, n = Gi(o.location_url), s = o.location_region, u = i({ apikey: r.apikey, size: a.size, filename: Zi(a, r), mimetype: r.mimetype || a.type || "application/octet-stream", parts: function (e) { return e.map(function (e, t) { return t + 1 + ":" + e }).join(";") }(e) }, o); r.intelligent && (u.multipart = !0, delete u.parts), r.policy && r.signature && (u.policy = r.policy, u.signature = r.signature); var l = Yi(u, r), c = Ot("post", n + "/multipart/complete"); return s && c.set("Filestack-Upload-Region", s), c.timeout(r.timeout), c.field(l) }(b, e)]; case 1: return 202 === (t = n.sent()).status ? [2, new Promise(function (e) { setTimeout(function () { return e(P()) }, 1e3) })] : (a.status = ao, l(s.onProgress), r.buffer && (r.buffer = null), t.body && t.body.error && t.body.error.text ? [2, Promise.reject(Error("File upload error: " + t.body.error.text))] : [2, t.body]); case 2: return o = n.sent(), [2, h("complete", P, o)]; case 3: return [2] } }) }) }), [2, f(P())] } }) }) }, fo = function (e, t, r) { if (!t || "string" != typeof t) throw Error("A valid Filestack handle or storage alias is required for preview"); Rt("preview", [{ name: "id", type: et }, { name: "css", type: et }], r); var a = Tt(r), o = function (e, t, r, a) { var o = i({}, r), n = a && a.policy || e.policy, s = a && a.signature || e.signature, u = s && n, l = [e.urls.cdnUrl], c = o.css && encodeURIComponent('"' + o.css + '"'), p = c ? "preview=css:" + c : "preview"; return -1 !== t.indexOf("src:") ? l.push(e.apikey + "/" + p) : l.push(p), u && l.push("security=policy:" + n + ",signature:" + s), l.push(t), l.join("/") }(e, t, a); if (a.id) { var n = a.id, s = document.createElement("iframe"), u = document.getElementById(n); if (s.src = o, s.width = "100%", s.height = "100%", !u) throw Error('DOM Element with id "' + n + '" not found.'); return u.appendChild(s) } return window.open(o, t) }, ho = function () { function e(e, t) { this.cache = !1, this.session = e, this.cloudApiUrl = e.urls.cloudApiUrl, t && t.sessionCache && (this.cache = t.sessionCache) } return Object.defineProperty(e.prototype, "token", { get: function () { if (this.cache) { var e = localStorage.getItem("__fs_picker_token"); if (e) return e } return this._token }, set: function (e) { this.cache && localStorage.setItem("__fs_picker_token", e), this._token = e }, enumerable: !0, configurable: !0 }), e.prototype.prefetch = function () { var e = { apikey: this.session.apikey }; return Ot("get", this.cloudApiUrl + "/prefetch").query(e).then(function (e) { return e.body }) }, e.prototype.list = function (e, t) { var r = this; void 0 === t && (t = {}); var a = { apikey: this.session.apikey, clouds: e, flow: "web", token: this.token }; return this.session.policy && this.session.signature && (a.policy = this.session.policy, a.signature = this.session.signature), new Promise(function (e, i) { var o = Ot("post", r.cloudApiUrl + "/folder/list").send(a).end(function (t, a) { t ? i(t) : (a.body && a.body.token && (r.token = a.body.token), e(a.body)) }); t.cancel = function () { o.abort(), i(Error("Cancelled")) } }) }, e.prototype.store = function (e, t, r, a, i) { var o, n = this; void 0 === r && (r = {}), void 0 === a && (a = {}), void 0 === i && (i = {}), void 0 === r.location && (r.location = "s3"); var s = { apikey: this.session.apikey, token: this.token, flow: "web", clouds: (o = {}, o[e] = { path: t, store: Tt(r) }, o) }; return "customsource" === e && a.customSourcePath && (s.clouds.customsource.customSourcePath = a.customSourcePath), "customsource" === e && a.customSourceContainer && (s.clouds.customsource.customSourceContainer = a.customSourceContainer), this.session.policy && this.session.signature && (s.policy = this.session.policy, s.signature = this.session.signature), new Promise(function (t, r) { var a = Ot("post", n.cloudApiUrl + "/store/").send(s).end(function (a, i) { a ? r(a) : (i.body && i.body.token && (n.token = i.body.token), t(i.body && i.body[e] ? i.body[e] : i.body)) }); i.cancel = function () { a.abort(), r(Error("Cancelled")) } }) }, e.prototype.link = function (e, t, r, a) { var i, o = this; void 0 === r && (r = {}), void 0 === a && (a = {}); var n = { apikey: this.session.apikey, token: this.token, flow: "web", clouds: (i = {}, i[e] = { path: t }, i) }; return "customsource" === e && r.customSourcePath && (n.clouds.customsource.customSourcePath = r.customSourcePath), "customsource" === e && r.customSourceContainer && (n.clouds.customsource.customSourceContainer = r.customSourceContainer), this.session.policy && this.session.signature && (n.policy = this.session.policy, n.signature = this.session.signature), new Promise(function (t, r) { var i = Ot("post", o.cloudApiUrl + "/link/").send(n).end(function (a, i) { a ? r(a) : (i.body && i.body.token && (o.token = i.body.token), t(i.body[e] ? i.body[e] : i.body)) }); a.cancel = function () { i.abort(), r(Error("Cancelled")) } }) }, e.prototype.logout = function (e) { var t, r = this, a = { apikey: this.session.apikey, flow: "web", token: this.token }; return e ? a.clouds = ((t = {})[e] = {}, t) : this.cache && localStorage.removeItem("__fs_picker_token"), new Promise(function (e, t) { Ot("post", r.cloudApiUrl + "/auth/logout/").send(a).end(function (a, i) { a ? t(a) : (i.body && i.body.token && (r.token = i.body.token), e(i.body)) }) }) }, e.prototype.metadata = function (e) { var t = this, r = { apikey: this.session.apikey, url: e }; return this.session.policy && this.session.signature && (r.policy = this.session.policy, r.signature = this.session.signature), new Promise(function (e, a) { Ot("post", t.cloudApiUrl + "/metadata").send(r).end(function (t, r) { t ? a(t) : e(r.body) }) }) }, e.prototype.tokInit = function (e) { var t = this; if ("video" !== e && "audio" !== e) throw Error("Type must be one of video or audio."); return new Promise(function (r, a) { return Ot("post", t.cloudApiUrl + "/recording/" + e + "/init").end(function (e, t) { e ? a(e) : r(t) }) }) }, e.prototype.tokStart = function (e, t, r) { var a = this; if ("video" !== e && "audio" !== e) throw Error("Type must be one of video or audio."); var i = { apikey: t, session_id: r }; return new Promise(function (t, r) { return Ot("post", a.cloudApiUrl + "/recording/" + e + "/start").send(i).end(function (e, a) { e ? r(e) : t(a) }) }) }, e.prototype.tokStop = function (e, t, r, a) { var i = this; if ("video" !== e && "audio" !== e) throw Error("Type must be one of video or audio."); var o = { apikey: t, session_id: r, archive_id: a }; return new Promise(function (t, r) { return Ot("post", i.cloudApiUrl + "/recording/" + e + "/stop").send(o).end(function (e, a) { e ? r(e) : t(a) }) }) }, e }(), mo = "function" == typeof Symbol && "symbol" === r(Symbol.iterator) ? function (e) { return r(e) } : function (e) { return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : r(e) }, yo = (Ui = void 0, "object" === ("undefined" == typeof window ? "undefined" : mo(window)) && ((Ui = window.filestackInternals) || (Ui = {}, window.filestackInternals = Ui), Ui.loader || (Ui.loader = { modules: {} })), Ui), vo = yo && yo.loader.modules, go = function (e, t) { var r = vo[e]; if (r || (vo[e] = {}, r = vo[e]), r.instance) return Promise.resolve(r.instance); if (r.promise) return r.promise; var a = new Promise(function (a, i) { !function o() { "complete" === document.readyState ? function () { r.resolvePromise = a; var o = document.createElement("script"); o.src = e, o.onerror = i, t && (o.id = t), document.body.appendChild(o) }() : setTimeout(o, 50) }() }); return r.promise = a, a }, bo = "__filestack-picker-module"; !function (e) { e.cw = "CW", e.ccw = "CCW" }(Ni || (Ni = {})), function (e) { e.inline = "inline", e.overlay = "overlay", e.dropPane = "dropPane" }(Li || (Li = {})); var Po = function () { function e(e, t) { this._initialized = this.loadModule(e, t) } return e.prototype.open = function () { return o(this, void 0, void 0, function () { return n(this, function (e) { switch (e.label) { case 0: return [4, this._initialized]; case 1: return [4, e.sent().open()]; case 2: return e.sent(), [2] } }) }) }, e.prototype.crop = function (e) { return o(this, void 0, void 0, function () { return n(this, function (t) { switch (t.label) { case 0: return [4, this._initialized]; case 1: return [4, t.sent().crop(e)]; case 2: return t.sent(), [2] } }) }) }, e.prototype.close = function () { return o(this, void 0, void 0, function () { return n(this, function (e) { switch (e.label) { case 0: return [4, this._initialized]; case 1: return [4, e.sent().close()]; case 2: return e.sent(), [2] } }) }) }, e.prototype.cancel = function () { return o(this, void 0, void 0, function () { return n(this, function (e) { switch (e.label) { case 0: return [4, this._initialized]; case 1: return [4, e.sent().cancel()]; case 2: return e.sent(), [2] } }) }) }, e.prototype.loadModule = function (e, t) { return o(this, void 0, void 0, function () { return n(this, function (r) { switch (r.label) { case 0: return [4, go(e.session.urls.pickerUrl, bo)]; case 1: return [2, new (r.sent())(e, t)] } }) }) }, e }(), wo = function () { function e(e, r) { var a = this; if (!e || "string" != typeof e || 0 === e.length) throw Error("An apikey is required to initialize the Filestack client"); var i = t.urls; if (this.session = { apikey: e, urls: i }, r) { var o = r.cname, n = r.security; if (n && (!n.policy || !n.signature)) throw Error("Both policy and signature are required for client security"); if (n && n.policy && n.signature && (this.session.policy = n.policy, this.session.signature = n.signature), o) { this.session.urls = $t(this.session.urls, o); var s = /filestackapi.com|filestackcontent.com/i; this.session.cname = o, Object.keys(i).forEach(function (e) { a.session.urls[e] = i[e].replace(s, o) }) } } this.cloud = new ho(this.session, r) } return e.prototype.logout = function (e) { return this.cloud.logout(e) }, e.prototype.metadata = function (e, t, r) { return function (e, t, r, a) { if (!t || "string" != typeof t) throw Error("A valid Filestack handle is required for metadata"); Rt("metadata", [{ name: "size", type: Ze }, { name: "mimetype", type: Ze }, { name: "filename", type: Ze }, { name: "width", type: Ze }, { name: "height", type: Ze }, { name: "uploaded", type: Ze }, { name: "writeable", type: Ze }, { name: "cloud", type: Ze }, { name: "sourceUrl", type: Ze }, { name: "md5", type: Ze }, { name: "sha1", type: Ze }, { name: "sha224", type: Ze }, { name: "sha256", type: Ze }, { name: "sha384", type: Ze }, { name: "sha512", type: Ze }, { name: "location", type: Ze }, { name: "path", type: Ze }, { name: "container", type: Ze }, { name: "exif", type: Ze }], r); var o = i({}, r); o.source_url = o.sourceUrl, o.policy = a && a.policy || e.policy, o.signature = a && a.signature || e.signature; var n = e.urls.fileApiUrl + "/" + t + "/metadata"; return new Promise(function (e, r) { _t(n).query(Tt(o)).end(function (a, o) { if (a) return r(a); e(i({}, o.body, { handle: t })) }) }) }(this.session, e, t, r) }, e.prototype.picker = function (e) { return function (e, t) { return new Po(e, t) }(this, e) }, e.prototype.preview = function (e, t) { return fo(this.session, e, t) }, e.prototype.remove = function (e, t) { return zt(this.session, e, !1, t) }, e.prototype.removeMetadata = function (e, t) { return zt(this.session, e, !0, t) }, e.prototype.storeURL = function (e, t, r, a) { return function (e, t, r, a, o) { if (!t || "string" != typeof t) throw Error("url is required for storeURL"); e.policy = o && o.policy || e.policy, e.signature = o && o.signature || e.signature; var n = new zi(t, e.apikey); return n.setCname(e.cname), (e.urls.cdnUrl.indexOf("localhost") > -1 || e.urls.cdnUrl.indexOf("badurl") > -1) && n.setCustomDomain(e.urls.cdnUrl), e.policy && e.signature && n.security({ policy: e.policy, signature: e.signature }), n.store(r), new Promise(function (e, t) { var r = _t("" + n); return a && (a.cancel = function () { r.abort(), t(Error("Upload cancelled")) }), r.then(function (t) { if (t.body && t.body.url) { var r = t.body.url.split("/").pop(), a = i({}, t.body, { handle: r, mimetype: t.body.type }); return e(a) } return e(t.body) }).catch(function (e) { t(e) }) }) }(this.session, e, t, r, a) }, e.prototype.retrieve = function (e, t, r) { return function (e, t, r, a) { if (void 0 === r && (r = {}), !t || 0 === t.length || "string" != typeof t) throw Error("File handle is required"); Rt("retrieveOptions", [{ name: "metadata", type: Ze }, { name: "head", type: Ze }, { name: "dl", type: Ze }, { name: "cache", type: Ze }, { name: "extension", type: et }], r); var o = i({}, r); o.key = e.apikey, o.policy = a && a.policy || e.policy, o.signature = a && a.signature || e.signature; var n, s, u = At.get, l = Dt.blob; if (o.head && (u = At.head, l = Dt.json, delete o.head), o.extension && o.extension.length && (n = o.extension, delete o.extension), o.metadata) { if (u === At.head) throw Error("Head and metadata options cannot be used together"); l = Dt.json, s = o.metadata, delete o.metadata } var c = e.urls.fileApiUrl + "/" + t + (n ? "+" + n : "") + (s ? "/metadata" : ""); return new Promise(function (e, t) { St[u](c).query(o).responseType(l).end(function (r, a) { return r ? t(r) : u === At.head ? e(a.headers) : void e(a.body) }) }) }(this.session, e, t, r) }, e.prototype.transform = function (e, t, r) { return void 0 === r && (r = !1), qi(this.session, e, t, r) }, e.prototype.upload = function (e, t, r, a, o) { return function (e, t, r, a, o, n) { return void 0 === r && (r = {}), void 0 === a && (a = {}), void 0 === o && (o = {}), Xi(t).then(function (t) { if (void 0 !== t.size && 0 === t.size || 0 === t.length) return Promise.reject(Error("file has a size of 0.")); var s = [{ name: "host", type: et }, { name: "path", type: Ze }, { name: "mimetype", type: et }, { name: "partSize", type: We }, { name: "concurrency", type: rt(Ye, function (e) { return e > 0 }) }, { name: "onProgress", type: Ge }, { name: "progressInterval", type: Ye }, { name: "onRetry", type: Ge }, { name: "retry", type: Ye }, { name: "retryFactor", type: Ye }, { name: "retryMaxTime", type: Ye }, { name: "timeout", type: Ye }, { name: "intelligent", type: at([Ze, tt.of("fallback")]) }, { name: "intelligentChunkSize", type: We }], u = et, l = it({ id: et }), c = at([u, l]); c.dispatch = function (e) { return e.id ? l : u }; var p = [{ name: "location", type: tt.of("s3 gcs rackspace azure dropbox") }, { name: "region", type: et }, { name: "path", type: et }, { name: "container", type: et }, { name: "filename", type: et }, { name: "access", type: tt.of("public private") }, { name: "workflows", type: nt(c) }]; Rt("upload (options)", s, r), Rt("upload (storeOptions)", p, a); var d, f = i({}, a), h = i({}, r); f.filename ? d = f.filename : void 0 === t.name && (d = t.type ? "untitled." + t.type.split("/").pop() : "untitled"), void 0 === f.location && (f.location = "s3"), h.intelligent && (h.partSize = 8388608); var m = i({ host: e.urls.uploadApiUrl, apikey: e.apikey, policy: n && n.policy || e.policy, signature: n && n.signature || e.signature, partSize: 6291456, concurrency: 3, progressInterval: 1e3, retry: 10, retryFactor: 2, retryMaxTime: 15e3, customName: d, mimetype: r.mimetype, store: { workflows: f.workflows, store_location: f.location, store_region: f.region, store_container: f.container, store_path: f.path, store_access: f.access }, timeout: 12e4 }, h); return po({ file: t, config: m, state: { parts: {}, progressTick: null, previousPayload: null, retries: {}, status: to } }, o) }) }(this.session, e, t, r, a, o) }, e }(); e.init = function (e, t) { return new wo(e, t) }, e.version = "1.14.6", e.TransformSchema = Ut, e.getSecurity = function () { console.warn("This method is only availale in Node runtimes") }, e.transform = qi, e.Filelink = zi, Object.defineProperty(e, "__esModule", { value: !0 }) });
//# sourceMappingURL=filestack.min.js.map